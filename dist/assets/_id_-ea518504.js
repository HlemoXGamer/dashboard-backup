import{D as S,O as R,r as j,o as T,b as B,w as r,q as t,z as q,s as m,aX as z,n as D,y as A,a1 as C,I as F,a_ as J,C as L,aP as M,l as P,R as X,a2 as O,aZ as U}from"./index-c869d194.js";import{V as Z}from"./VDataTable-5f8f63bf.js";import{s as E,f as G}from"./vouchers-a392856a.js";import"./VCheckboxBtn-afc87216.js";import"./VSelectionControl-43a717d4.js";import"./VSelect-a0dad563.js";import"./VList-cd8262bf.js";import"./ssrBoot-655fc28d.js";import"./VDivider-9f6a7662.js";import"./dialog-transition-cba1c577.js";import"./VMenu-a34876aa.js";import"./VOverlay-5749ee97.js";import"./lazy-1ec28e08.js";import"./VChip-27e400a7.js";import"./filter-1ae2559c.js";import"./VTable-ec73e090.js";const H={__name:"VouchersOrdersTable",setup(o){const e=S().t,l=R(()=>[{title:e("Order ID"),key:"o_id"},{title:e("Name"),sortable:!1,key:"c_name"},{title:e("Area"),sortable:!1,key:"o_area"},{title:e("Branch"),sortable:!1,key:"o_branch"},{title:e("Before Total"),key:"o_be_total"},{title:e("After Total"),key:"o_af_total"},{title:e("Actions"),sortable:!1,key:"actions",align:"center"}]);return(a,u)=>{const n=j("IconBtn");return T(),B(m(Z),{headers:m(l),"items-per-page":15,class:"pb-5 mt-0"},{"item.actions":r(({item:d})=>[t(n,{onClick:_=>a.$router.push(`/orders/${d.raw.o_id}`)},{default:r(()=>[t(q,{icon:"mdi-eye"})]),_:2},1032,["onClick"])]),_:1},8,["headers"])}}},K={class:"text-h4 py-1 mb-3"},Q={__name:"VoucherSummary",props:{data:{type:Object,default:{}}},setup(o){return(s,e)=>{const l=J;return T(),B(F,{rounded:"lg",class:"pb-6 px-0",variant:"flat"},{default:r(()=>[t(z,null,{default:r(()=>[D("p",K,A(s.$t("Voucher Details")),1),t(C,{class:"px-2 mt-3"},{default:r(()=>[t(l,{readonly:"",label:s.$t("Code"),class:"mx-4 flex-grow-1",modelValue:o.data.v_code,"onUpdate:modelValue":e[0]||(e[0]=a=>o.data.v_code=a)},null,8,["label","modelValue"]),t(l,{readonly:"",label:s.$t("Name"),class:"mx-4 flex-grow-1",modelValue:o.data.v_name,"onUpdate:modelValue":e[1]||(e[1]=a=>o.data.v_name=a)},null,8,["label","modelValue"]),t(l,{readonly:"",label:s.$t("Type"),class:"mx-4 flex-grow-1",modelValue:o.data.v_type_name,"onUpdate:modelValue":e[2]||(e[2]=a=>o.data.v_type_name=a)},null,8,["label","modelValue"])]),_:1}),t(C,{class:"px-2 mt-7"},{default:r(()=>[t(l,{readonly:"",label:s.$t("Amount"),class:"mx-4 flex-grow-1",modelValue:o.data.v_amount,"onUpdate:modelValue":e[3]||(e[3]=a=>o.data.v_amount=a)},null,8,["label","modelValue"]),t(l,{readonly:"",label:s.$t("Usage"),class:"mx-4 flex-grow-1",modelValue:o.data.v_usage,"onUpdate:modelValue":e[4]||(e[4]=a=>o.data.v_usage=a)},null,8,["label","modelValue"]),t(l,{readonly:"",label:s.$t("Limit"),class:"mx-4 flex-grow-1",modelValue:o.data.v_limit,"onUpdate:modelValue":e[5]||(e[5]=a=>o.data.v_limit=a)},null,8,["label","modelValue"])]),_:1})]),_:1})]),_:1})}}};const W={class:"text-h4 pt-3 pb-2"},N={__name:"[id]",setup(o){var u;const s=(u=JSON.parse(localStorage.getItem("userData")))==null?void 0:u.type,e=M().params.id,l=P({v_name:"",v_code:"",v_prefix:null,v_description_ar:"",v_description_en:"",v_limit:"",v_min_total:"",v_amount:"",v_type:"",v_time_period_start:"",v_time_period_end:"",v_date_period_start:"",v_date_period_end:"",v_is_active:0,v_usage:""}),a=async()=>{s=="admin"?await E(e).then(n=>{let{v_name:d,v_code:_,v_prefix:i,v_description_ar:c,v_description_en:v,v_limit:p,v_min_total:f,v_amount:y,v_type:V,v_type_name:b,v_time_period_start:g,v_time_period_end:x,v_date_period_start:$,v_date_period_end:h,v_is_active:k,v_orders:w,v_usage:I}=n.data.data;l.value={v_name:d,v_code:_,v_prefix:i,v_description_ar:c,v_description_en:v,v_limit:p,v_min_total:f,v_amount:y,v_type:V,v_type_name:b,v_time_period_start:g,v_time_period_end:x,v_date_period_start:$,v_date_period_end:h,v_is_active:k,v_orders:w,v_usage:I}}):s=="markter"&&await G(e).then(n=>{let{v_name:d,v_code:_,v_prefix:i,v_description_ar:c,v_description_en:v,v_limit:p,v_min_total:f,v_amount:y,v_type:V,v_type_name:b,v_time_period_start:g,v_time_period_end:x,v_date_period_start:$,v_date_period_end:h,v_is_active:k,v_orders:w,v_usage:I}=n.data.data;l.value={v_name:d,v_code:_,v_prefix:i,v_description_ar:c,v_description_en:v,v_limit:p,v_min_total:f,v_amount:y,v_type:V,v_type_name:b,v_time_period_start:g,v_time_period_end:x,v_date_period_start:$,v_date_period_end:h,v_is_active:k,v_orders:w,v_usage:I}})};return X(()=>{a()}),(n,d)=>{const _=Q,i=H;return T(),B(C,{class:"mt-4 px-4",justify:"space-around"},{default:r(()=>[t(O,{class:"pt-0"},{default:r(()=>[t(_,{data:m(l)},null,8,["data"]),t(O,{class:"px-5 rounded mt-10",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:r(()=>[D("p",W,A(n.$t("Orders")),1),t(i,{items:m(l).v_orders},null,8,["items"])]),_:1})]),_:1})]),_:1})}}};typeof U=="function"&&U(N);const pe=L(N,[["__scopeId","data-v-cc8ec5cb"]]);export{pe as default};
