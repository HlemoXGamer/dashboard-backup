import{D as ae,O as P,o as _,b as I,w as t,q as e,aX as w,s as i,I as N,l as b,R,n as L,y as S,U as g,W as m,G as h,a_ as le,az as $,H as x,C as te,aP as ne,c as oe,aZ as A}from"./index-0bb0cc22.js";import{V as se}from"./VDataTable-572aad38.js";import{g as de}from"./cities-955d9270.js";import{V as T}from"./VCombobox-548e6126.js";import{_ as ie}from"./AppDateTimePicker-3f8e0ddf.js";import{_ as ue}from"./DialogCloseBtn-91460259.js";import{V as me}from"./VDialog-e64705aa.js";import{b as re,d as E}from"./branches-b77eb682.js";import{a as fe}from"./areas-cc050dd0.js";import"./VCheckboxBtn-7ff81017.js";import"./VSelectionControl-aba741ed.js";import"./VSelect-6fcb57fa.js";import"./VList-960630c2.js";import"./ssrBoot-e4838fc0.js";import"./VDivider-ea64b2d6.js";import"./dialog-transition-71d07923.js";import"./VMenu-eab6c9ac.js";import"./VOverlay-61faf366.js";import"./lazy-765d4dbc.js";import"./VChip-e155d780.js";import"./filter-654261dc.js";import"./VTable-8db878f5.js";const ce={__name:"BranchesViewTable",props:{data:{type:Array,default:[]},loading:{type:Boolean,default:!1}},setup(n){const d=ae().t,o=P(()=>[{title:d("Day"),key:"day"},{title:d("Time"),sortable:!1,key:"time"},{title:d("Item Name"),sortable:!1,key:"item_name"},{title:d("Action"),sortable:!1,key:"action"},{title:d("Details"),sortable:!1,key:"details"}]);return(a,s)=>(_(),I(N,{rounded:"lg",class:"pb-0 px-0",variant:"flat",loading:n.loading},{default:t(()=>[e(w,{class:"pa-0"},{default:t(()=>[e(i(se),{items:n.data,headers:i(o),"items-per-page":15,class:"pb-5 mt-0",title:"Branches Log"},null,8,["items","headers"])]),_:1})]),_:1},8,["loading"]))}},be={class:"text-h4 py-1 mb-3"},Ve={__name:"BranchesViewSummary",props:{data:{type:Object,default:{}}},setup(n){const r=b([]),d=()=>{de().then(({data:o,meta:a})=>{r.value=o.data,console.log(r.value)})};return R(()=>{d()}),(o,a)=>{const s=le;return _(),I(N,{rounded:"lg",class:"pb-6 px-0",variant:"flat"},{default:t(()=>[e(w,null,{default:t(()=>[L("p",be,S(o.$t("Branches Details")),1),e(g,{class:"px-2 mt-3"},{default:t(()=>[e(m,null,{default:t(()=>[e(s,{readonly:"",label:o.$t("Name"),class:"mx-4 flex-grow-1",modelValue:n.data.name_en,"onUpdate:modelValue":a[0]||(a[0]=l=>n.data.name_en=l)},null,8,["label","modelValue"])]),_:1}),e(m,null,{default:t(()=>[e(s,{readonly:"",label:o.$t("Phone Number"),class:"mx-4 flex-grow-1",modelValue:n.data.phone_no,"onUpdate:modelValue":a[1]||(a[1]=l=>n.data.phone_no=l)},null,8,["label","modelValue"])]),_:1}),e(m,null,{default:t(()=>[e(s,{readonly:"",label:o.$t("Email"),class:"mx-4 flex-grow-1",modelValue:n.data.email,"onUpdate:modelValue":a[2]||(a[2]=l=>n.data.email=l)},null,8,["label","modelValue"])]),_:1})]),_:1}),e(g,{class:"px-2 mt-7"},{default:t(()=>[e(m,null,{default:t(()=>[e(T,{readonly:"",class:"mx-4 flex-grow-1",modelValue:n.data.days,"onUpdate:modelValue":a[3]||(a[3]=l=>n.data.days=l),label:o.$t("Working Days"),"return-object":!1,items:n.data.days,multiple:"",style:{width:"100%"},variant:"outlined","item-value":"id","item-title":"name"},null,8,["modelValue","label","items"])]),_:1}),e(m,null,{default:t(()=>[e(s,{readonly:"",label:o.$t("Start Working Hours"),class:"mx-4 flex-grow-1",modelValue:n.data.start,"onUpdate:modelValue":a[4]||(a[4]=l=>n.data.start=l)},null,8,["label","modelValue"])]),_:1}),e(m,null,{default:t(()=>[e(s,{readonly:"",label:o.$t("End Working Hours"),class:"mx-4 flex-grow-1",modelValue:n.data.end,"onUpdate:modelValue":a[5]||(a[5]=l=>n.data.end=l)},null,8,["label","modelValue"])]),_:1})]),_:1}),e(g,{class:"px-2 mt-7"},{default:t(()=>[e(m,null,{default:t(()=>[e(s,{readonly:"",label:o.$t("Estimate Time"),class:"mx-4 flex-grow-1",modelValue:n.data.est_time,"onUpdate:modelValue":a[6]||(a[6]=l=>n.data.est_time=l)},null,8,["label","modelValue"])]),_:1}),e(m,null,{default:t(()=>[e(s,{readonly:"",label:o.$t("Branch Code"),class:"mx-4 flex-grow-1",modelValue:n.data.code,"onUpdate:modelValue":a[7]||(a[7]=l=>n.data.code=l)},null,8,["label","modelValue"])]),_:1}),e(m,null,{default:t(()=>[e(T,{readonly:"",class:"mx-4 flex-grow-1",modelValue:i(r),"onUpdate:modelValue":a[8]||(a[8]=l=>h(r)?r.value=l:null),label:o.$t("Cities"),"return-object":!1,items:i(r),multiple:"",style:{width:"100%"},variant:"outlined","item-value":"id","item-title":"name"},null,8,["modelValue","label","items"])]),_:1})]),_:1}),e(g,{class:"px-2 mt-7"},{default:t(()=>[e(m,null,{default:t(()=>[e(T,{readonly:"",class:"mx-4 flex-grow-1",modelValue:n.data.areas,"onUpdate:modelValue":a[9]||(a[9]=l=>n.data.areas=l),label:o.$t("Areas"),"return-object":!1,items:n.data.areas,multiple:"",style:{width:"100%"},variant:"outlined","item-value":"id","item-title":"name"},null,8,["modelValue","label","items"])]),_:1}),e(m,null,{default:t(()=>[e(s,{readonly:"",label:o.$t("Street Name"),class:"mx-4 flex-grow-1",modelValue:n.data.street_name,"onUpdate:modelValue":a[10]||(a[10]=l=>n.data.street_name=l)},null,8,["label","modelValue"])]),_:1}),e(m,null,{default:t(()=>[e(s,{readonly:"",label:o.$t("Building Number"),class:"mx-4 flex-grow-1",modelValue:n.data.building_no,"onUpdate:modelValue":a[11]||(a[11]=l=>n.data.building_no=l)},null,8,["label","modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},pe={__name:"BranchesViewDialog",emits:["exit"],setup(n,{emit:r}){const d=b(null),o=()=>{r("exit",!0,d.value),d.value=null};return(a,s)=>{const l=ue,y=ie;return _(),I(me,{persistent:"",class:"v-dialog-sm"},{default:t(()=>[e(l,{onClick:s[0]||(s[0]=c=>a.$emit("close"))}),e(N,{title:a.$t("Pick a custom Date")},{default:t(()=>[e(w,{class:"d-flex"},{default:t(()=>[e(y,{class:"ms-1","prepend-inner-icon":"tabler-calendar",modelValue:i(d),"onUpdate:modelValue":s[1]||(s[1]=c=>h(d)?d.value=c:null)},null,8,["modelValue"])]),_:1}),e(w,{class:"d-flex justify-end gap-3 flex-wrap"},{default:t(()=>[e($,{onClick:s[2]||(s[2]=c=>o()),loading:a.loading,disabled:!i(d)},{default:t(()=>[x(S(a.$t("Pick")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1},8,["title"])]),_:1})}}};const ge={class:"text-h4 pt-3 pb-0"},W={__name:"[id]",setup(n){var j;const r=(j=JSON.parse(localStorage.getItem("userData")))==null?void 0:j.type,d=b([]),o=b([]),a=b(!1),s=b(null),l=b(!1),y=b({start:"",end:"",name_en:"",name_ar:"",phone_no:"",city_id:null,areas:[],street_name:"",building_no:"",email:"",password:"",est_time:"",delivery_fee:.5,code:"",working_days:[],is_active:0}),c=b("today"),k=P(()=>u=>c.value===u?"elevated":"tonal"),B=ne().params.id,H=async()=>{await re(B).then(u=>{let{start:f,end:V,name_en:C,name_ar:U,phone_no:p,areas:q,city_id:z,street_name:F,building_no:G,email:J,password:M,est_time:X,delivery_fee:Y,code:Z,days:K,is_active:Q}=u.data.data;y.value={start:f,end:V,name_en:C,name_ar:U,phone_no:p,areas:q,days:K,city_id:z,street_name:F,building_no:G,email:J,password:M,est_time:X,delivery_fee:Y,code:Z,is_active:Q},y.value.email=u.data.data.user.email,fe().then(({data:ee,meta:ye})=>{d.value=ee.data})})},v=(u,f)=>{l.value=!0,u===!0?(a.value=!1,r=="admin"&&E(`${c.value}&branchId=${B}${f!==null?"&day="+f:""}`).then(({data:V})=>{o.value=V.data}).finally(()=>{l.value=!1})):r=="admin"&&E(`${c.value}&branchId=${B}`).then(({data:V})=>{o.value=V.data}).finally(()=>{l.value=!1})},O=()=>{a.value=!1,c.value="today",s.value=null,v(!0)},D=u=>{u==c.value&&u!=="custom"||(c.value=u,setTimeout(()=>{u=="custom"?a.value=!0:v(!1)},100))};return R(()=>{r==="admin"&&(H(),v(!1))}),(u,f)=>{const V=pe,C=Ve,U=ce;return _(),oe("div",null,[e(V,{onExit:v,modelValue:i(a),"onUpdate:modelValue":f[0]||(f[0]=p=>h(a)?a.value=p:null),onClose:O},null,8,["modelValue"]),e(g,{class:"mt-4 px-4",justify:"space-around"},{default:t(()=>[e(m,{class:"pt-0"},{default:t(()=>[e(C,{data:i(y),cities:u.cities},null,8,["data","cities"]),e(g,{class:"gap-5 pt-16 pl-3 pb-0"},{default:t(()=>[e($,{disabled:i(l),variant:i(k)("today"),onClick:f[1]||(f[1]=p=>D("today"))},{default:t(()=>[x("Today")]),_:1},8,["disabled","variant"]),e($,{disabled:i(l),variant:i(k)("yesterday"),onClick:f[2]||(f[2]=p=>D("yesterday"))},{default:t(()=>[x("Yesterday")]),_:1},8,["disabled","variant"]),e($,{disabled:i(l),variant:i(k)("custom"),onClick:f[3]||(f[3]=p=>D("custom"))},{default:t(()=>[x("Custom")]),_:1},8,["disabled","variant"])]),_:1}),e(m,{class:"px-5 rounded mt-10",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:t(()=>[L("p",ge,S(u.$t("Branches Log")),1),e(U,{data:i(o),loading:i(l)},null,8,["data","loading"])]),_:1})]),_:1})]),_:1})])}}};typeof A=="function"&&A(W);const He=te(W,[["__scopeId","data-v-46d11351"]]);export{He as default};
