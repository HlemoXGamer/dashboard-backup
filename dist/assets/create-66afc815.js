import{_ as ba}from"./AppDateTimePicker-ebef9202.js";import{_ as ya}from"./OrderProducts-4d24dd27.js";import{_ as ha}from"./DialogCloseBtn-48f8e223.js";import{ba as Ce,bb as Va,C as ka,l as d,D as wa,O as Pe,aV as $a,R as xa,aB as Da,o as i,c as ee,q as r,w as o,I as me,F as Te,a as Ee,s as a,b as v,aX as ae,az as S,H as F,y as m,G as j,n as g,aY as Ca,z as Oe,U as c,W as b,a$ as Ve,b0 as ke,b1 as w,b2 as we,bc as $e,A as _,bd as Sa,t as Fa,aZ as Me,aW as Ia,a_ as Ua,a8 as Ba,a9 as Na}from"./index-ad2993f7.js";import{g as Aa}from"./areas-983af585.js";import{a as ja,g as Pa}from"./branches-184b6c69.js";import{c as Ta}from"./employees-efea9f18.js";import{c as Ea,a as Oa,b as Ma}from"./orders-d22951f6.js";import{c as qa,a as Ha,b as Ra}from"./orders-0f5f515e.js";import{a as Ka}from"./products-2a3241f8.js";import{g as Wa}from"./products-f5d23f71.js";import{t as za}from"./files-2e167225.js";import{V as xe}from"./VDialog-4638eca2.js";import{V as qe}from"./VSelect-576901a0.js";import{V as ve}from"./VCombobox-ae6b5c5e.js";import{V as La}from"./VChip-fdf1f131.js";import{V as Ya}from"./VSwitch-180e105d.js";import{V as Ga}from"./VCheckbox-a4f92a59.js";import{V as De}from"./VDivider-a4c379b7.js";import"./VDataTable-daa4a933.js";import"./VCheckboxBtn-2ae56f31.js";import"./VSelectionControl-b31af3b9.js";import"./VList-47dbdee0.js";import"./ssrBoot-92250925.js";import"./filter-daa277b8.js";import"./VTable-df2976c6.js";import"./VOverlay-66432da1.js";import"./lazy-c5173e2a.js";import"./dialog-transition-d6433381.js";import"./VMenu-f6142df3.js";function Ja(){return Ce.get("/areas")}let{get:Qa,show:Zl,update:et,create:at,remove:lt}=Va("/restaurant-apis/branches");function Xa(){return Ce.get("/restaurant-apis/branch/service-cost")}function Za(z){return Ce.post("/restaurant-apis/employee/check",z)}const el=z=>(Ba("data-v-52472e67"),z=z(),Na(),z),al=["disabled"],ll={style:{width:"120px",height:"120px",border:"2px solid lightgrey"},class:"product_image px-0 py-0 rounded mx-1 mt-4 position-relative d-flex align-center justify-center"},tl={class:"w-100 h-100",style:{overflow:"hidden"}},sl=["src"],rl={class:"text-h4 pt-3 pb-2"},ol={class:"text-h4 pt-3"},nl={class:"text-h4 pt-3"},ul={class:"text-h4 pt-3 mb-0"},dl={class:"text-h4 pt-3 mb-4"},il={class:"text-h4 pt-3 mb-1"},pl={class:"text-h4 pt-3 mb-5"},cl={key:0,class:"w-100 flex-grow-1 d-flex"},ml={key:1,class:"w-100 flex-grow-1 d-flex"},vl={class:"text-h4 pt-3 mb-5"},fl={class:"mb-2"},_l={class:"mb-2"},gl=el(()=>g("p",{class:"mb-2"},"Total",-1)),bl={class:"mb-2"},yl={class:"mb-2"},hl={class:"mb-2"},Vl={class:"mb-0"},kl={class:"mb-0"},He={__name:"create",setup(z){var Be;const le=d(new Date().toISOString()),fe=wa(),te=fe.t,Re=Pe(()=>{if(fe.locale.value==="en")return"name_en";if(fe.locale.value==="ar")return"name_ar"}),k=(Be=JSON.parse(localStorage.getItem("userData")))==null?void 0:Be.type,I=d(""),de=d(),Se=d(),h=$a(),ie=d(!1),K=d([]),x=d([]),pe=d([]),E=d(!1),L=d(!1),se=d(!1),Y=d(!1),G=d(!1),O=d(!1),re=d(!1),J=d(!1),_e=d([]),y=d(1),Q=d(),P=d([]),U=d(0),M=d(!1),X=d(0),ge=d(!1),be=d([]),C=d(""),q=d(""),H=d(""),ye=d(0),N=d(""),T=d(!1),B=d(null),W=d(null),Z=d(!1),oe=d(null),ce=d(1),Ke=!1,l=d({is_pickup:!0,products:[],email:"",name:"",agent:"",address_city:1,delivery_date:"",delivery_time:"",delivery_cost:"",address_building_no:"",block_no:"",address_floor:"",address_phone:"",address_apartment:"",address_address_area:null,address_street_name:"",branch_id:null,v_code:"",employee_code:"",extra:"",flavor:""}),$=d([]),We=()=>{Y.value=!0,Aa().then(({data:e,meta:t})=>{pe.value=e.data,Y.value=!1})},ze=()=>{Y.value=!0,Ja().then(({data:e})=>{pe.value=e.data,Y.value=!1})},Le=()=>{L.value=!0,Qa().then(({data:e})=>{K.value=e.data,L.value=!0,K.value=e.data.filter(t=>t.is_active===1),x.value=e.data.filter(t=>t.id===2),B.value=x.value[0].start,oe.value=B.value,W.value=x.value[0].end,X.value+=1,L.value=!1})},Ye=()=>{se.value=!0,Ka().then(({data:e,meta:t})=>{_e.value=e.data,se.value=!1})},Ge=()=>{se.value=!0,Wa().then(({data:e,meta:t})=>{_e.value=e.data,se.value=!1})},Je=()=>{var e;(e=de.value)==null||e.validate().then(async({valid:t})=>{t&&(E.value=!0,Ea({phone:`${I.value}`}).then(n=>{h.success("Customer found!"),be.value=n.data.data.length?n.data.data[0]:[],l.value.email=n.data.email,l.value.name=n.data.name,ge.value=!0,E.value=!1,Ie()}).catch(n=>{h.error(n.response.data.message),E.value=!1}))})},Qe=()=>{var e;(e=de.value)==null||e.validate().then(async({valid:t})=>{t&&(E.value=!0,qa({phone:`${I.value}`}).then(n=>{h.success("Customer found!"),be.value=n.data.data.length?n.data.data[0]:[],l.value.email=n.data.email,l.value.name=n.data.name,ge.value=!0,E.value=!1,Ie()}).catch(n=>{h.error(n.response.data.message),E.value=!1}))})},Xe=()=>{L.value=!0,ja().then(({data:e})=>{K.value=e.data.filter(t=>t.is_active===1),x.value=e.data.filter(t=>t.id===2),B.value=x.value[0].start,oe.value=B.value,W.value=x.value[0].end,X.value+=1,L.value=!1})},Ze=()=>{Pa().then(({data:e,meta:t})=>{l.value.delivery_cost=e.data.delivery_cost})},ea=()=>{Xa().then(({data:e,meta:t})=>{l.value.delivery_cost=e.data.delivery_cost})},aa=()=>{M.value=!0,Oa({v_code:C.value,total:U.value}).then(e=>{const t={fixed:" KWD",percentage:"%"};l.value.v_code=C.value,C.value="",q.value=parseInt(e.data.discount_rate)+t[e.data.discount_type],H.value=e.data.discount_type,h.success(e.data.message),M.value=!1}).catch(e=>{h.error(e.response.data.message),M.value=!1})},la=()=>{M.value=!0,Ha({v_code:C.value,total:U.value}).then(e=>{const t={fixed:" KWD",percentage:"%"};l.value.v_code=C.value,C.value="",q.value=parseInt(e.data.discount_rate)+t[e.data.discount_type],H.value=e.data.discount_type,h.success(e.data.message),M.value=!1}).catch(e=>{h.error(e.response.data.message),M.value=!1})},ta=Pe(()=>(H.value=="fixed"?ye.value=parseInt(U.value-parseInt(q.value)):H.value=="percentage"?ye.value=parseInt(U.value)-parseInt(U.value)*parseInt(q.value)/100:H.value=="free_delivery",ye.value+(l.value.delivery_cost??0))),sa=()=>{const e=Q.value;if(P.value.includes(e)){l.value.products.find(n=>n.product_id===e.id).quantity=parseInt(l.value.products.find(n=>n.product_id===e.id).quantity)+parseInt(y.value);let t=P.value.find(n=>n==e);t.quantity=parseInt(t.quantity)+parseInt(y.value),t.total=t.total+y.value*e.price,U.value+=y.value*e.price,e.has_note==1&&l.value.products.find(n=>n.product_id==e.id).notes.push("")}else{if(e.has_image==1&&e.has_note==1){l.value.products.push({product_id:e.id,quantity:parseInt(y.value),images:[],notes:[]});for(let t=0;t<y.value;t++)l.value.products.find(n=>n.product_id==e.id).notes[t]="";e.images=0,$.value.push({product_id:e.id})}else if(e.has_image==1&&e.has_note==0)l.value.products.push({product_id:e.id,quantity:parseInt(y.value),images:[]}),e.images=0,$.value.push({product_id:e.id});else if(e.has_image==0&&e.has_note==1){l.value.products.push({product_id:e.id,quantity:parseInt(y.value),notes:[]});for(let t=0;t<y.value;t++)l.value.products.find(n=>n.product_id==e.id).notes[t]=""}else l.value.products.push({product_id:e.id,quantity:parseInt(y.value)});e.quantity=y.value,U.value+=e.price*y.value,e.total=e.price*y.value,P.value.push(e)}Q.value=null,y.value=1},Fe=()=>{const e=new Date;if(l.value.delivery_time=null,l.value.is_pickup===!1&&(l.value.delivery_date=null,l.value.delivery_time=null),l.value.is_pickup===!0&&(l.value.address_address_area==null||l.value.address_address_area==""))x.value=K.value.filter(t=>t.id===2);else if(l.value.delivery_date!==he(e)&&l.value.is_pickup===!0)x.value=K.value.filter(t=>t.id===2),l.value.branch_id=2;else if(l.value.delivery_date==he(e)){const t=K.value.filter(n=>n.areas.find(u=>u.name===l.value.address_address_area)!==void 0);t.find(n=>n.id==l.value.branch_id)||(l.value.branch_id=null),x.value=t}else if(l.value.is_pickup===!1&&l.value.address_address_area!==null&&l.value.address_address_area!==""){const t=K.value.filter(n=>n.areas.find(u=>u.name===l.value.address_address_area)!==void 0);t.find(n=>n.id==l.value.branch_id)||(l.value.branch_id=null),x.value=t}},ne=()=>{x.value.find(e=>e.id===l.value.branch_id),X.value+=1,ra()},he=e=>{const t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0");return`${e.getFullYear()}-${n}-${t}`},ra=()=>{var t,n,p,u;const e=new Date;if(e.toISOString(),Fe(),x.value.find(f=>f.id==l.value.branch_id),l.value.delivery_date==he(e)){const f=e.getHours(),s=e.getMinutes(),[D,A]=(t=B.value.split(":"))==null?void 0:t.map(Number),[R,ue]=(n=W.value.split(":"))==null?void 0:n.map(Number);if(f>R||f===R&&s>=ue)Z.value=!0;else if(f<D||f===D&&s<A)B.value=oe.value;else{const Ne=new Date(new Date().setMinutes(new Date().getMinutes()+40)),Ae=Ne.getHours(),_a=Ne.getMinutes();(p=B.value.split(":"))==null||p.map(Number);const[je,ga]=(u=W.value.split(":"))==null?void 0:u.map(Number);Ae>je||Ae===je&&_a>=ga?Z.value=!0:B.value=new Date(new Date().setMinutes(new Date().getMinutes()+40)).toTimeString().slice(0,5)}}else Z.value=!1,B.value=oe.value;X.value+=1,l.value.delivery_time=null},Ie=()=>{const e=be.value;l.value.address_apartment=e==null?void 0:e.apartment,l.value.block_no=e==null?void 0:e.block_no,l.value.address_building_no=e==null?void 0:e.building_num,l.value.address_floor=e==null?void 0:e.floor,l.value.address_street_name=e==null?void 0:e.street_name,l.value.address_address_area=e==null?void 0:e.area_name,l.value.address_phone=I.value,ge.value=!1},oa=e=>{U.value=U.value-e.price*e.quantity,P.value.splice(P.value.indexOf(e),1),l.value.products.splice(l.value.products.indexOf(l.value.products.find(t=>t.product_id==e.id)),1),e.has_image==1&&$.value.splice($.value.indexOf($.value.find(t=>t.product_id==e.id)),1)},na=async()=>{var e,t,n;if(l.value.is_pickup===!1){const p=new Date().getHours(),u=new Date().getMinutes(),[f,s]=(e=oe.value.split(":"))==null?void 0:e.map(Number),[D,A]=(t=W.value.split(":"))==null?void 0:t.map(Number);if(p>D||p===D&&u>=A||p<f||p===f&&u<s)return h.error("The Branch is currently closed.")}(n=Se.value)==null||n.validate().then(async({valid:p})=>{if(p){let u=new FormData;if(u.append("branch_id",l.value.branch_id),u.append("is_pickup",l.value.is_pickup),u.append("email",l.value.email),u.append("name",l.value.name),u.append("agent",l.value.agent),u.append("address_city",l.value.address_city),l.value.delivery_date!==null&&u.append("delivery_date",l.value.delivery_date+" "+l.value.delivery_time+":00"),l.value.delivery_time!==null&&u.append("delivery_time",l.value.delivery_time),u.append("delivery_cost",l.value.delivery_cost),u.append("address_building_no",l.value.address_building_no),u.append("block_no",l.value.block_no),u.append("address_floor",l.value.address_floor),u.append("address_phone",l.value.address_phone),u.append("address_apartment",l.value.address_apartment),u.append("address_address_area",l.value.address_address_area),u.append("address_street_name",l.value.address_street_name),u.append("v_code",l.value.v_code),u.append("employee_code",l.value.employee_code),u.append("extra",l.value.extra),u.append("flavor",l.value.flavor),l.value.products.forEach((f,s)=>{var D,A;u.append(`products[${s}][product_id]`,f.product_id),u.append(`products[${s}][quantity]`,f.quantity),(D=f.images)==null||D.forEach((R,ue)=>{u.append(`products[${s}][images][${ue}]`,R.file)}),(A=f.notes)==null||A.forEach((R,ue)=>{u.append(`products[${s}][notes][${ue}]`,R)})}),$.value.length>0)return h.error("You must pick at least the min. number of Images for each Product");if(l.value.products.length==0)return h.error("You need to select at least 1 product");if(U.value<5)return h.error("The Total Cost Without The Delivery Cost Must Be More Than 5 KWD");ie.value=!0;try{k=="admin"?await Ma(u):k=="restaurant"&&await Ra(u),h.success("Order created successfully"),Ia.back(),ie.value=!1}catch(f){console.log(f),ie.value=!1}}})},ua=()=>{J.value=!0,Ta({employee_code:N.value}).then(({data:e})=>{const t={fixed:" KWD",percentage:"%"};h.success(e.meesage),q.value=parseInt(e.discount_rate)+t[e.discount_type],H.value=e.discount_type,l.value.employee_code=N.value}).catch(({response:e})=>{h.error(e.data.message)}).finally(()=>{J.value=!1})},da=()=>{J.value=!0,Za({employee_code:N.value}).then(({data:e})=>{const t={fixed:" KWD",percentage:"%"};h.success(e.meesage),q.value=parseInt(e.discount_rate)+t[e.discount_type],H.value=e.discount_type,l.value.employee_code=N.value}).catch(({response:e})=>{h.error(e.data.message)}).finally(()=>{J.value=!1})},ia=()=>{q.value="",H.value="",N.value="",C.value="",l.value.v_code="",l.value.employee_code=""},V=d(),pa=e=>{G.value=!0,V.value=e.id},ca=e=>{O.value=!0,V.value=e.id},ma=e=>{re.value=!0,V.value=e},va=async e=>{let t=P.value.find(u=>u.id==V.value),n=l.value.products.find(u=>u.product_id==V.value);const p={file:e.target.files[0],id:n.images.length,binary:""};await za(p.file).then(u=>{p.binary=u}),n.images.push(p),t.images+=1,t.images==t.quantity&&$.value.splice($.value.indexOf($.value.find(u=>u.product_id==V.value.product_id))),e.target.value=""},fa=e=>{let t=l.value.products.find(p=>p.product_id==V.value),n=P.value.find(p=>p.id==V.value);n.images-=1,n.images==n.quantity?$.value.splice($.value.indexOf($.value.find(p=>p.product_id==V.value))):$.value.map(p=>p.product_id).includes(n.id)||$.value.push({product_id:n.id}),t.images.splice(t.images.indexOf(e),1)},Ue=d(new Date().toISOString());return xa(()=>{k=="admin"?(Xe(),Ye(),We(),Ze()):k=="restaurant"&&(Ge(),ze(),Le(),ea());let e=setInterval(()=>{le.value=new Date().toISOString(),new Date(Ue.value).getDate()!==new Date(le.value).getDate()&&(Ue.value=le.value,ce.value=ce.value*2)},1e3);Da(()=>{clearInterval(e)})}),(e,t)=>{const n=Ua,p=ha,u=ya,f=ba;return i(),ee("div",null,[r(xe,{modelValue:a(re),"onUpdate:modelValue":t[1]||(t[1]=s=>j(re)?re.value=s:null),persistent:"",class:"v-dialog-sm"},{default:o(()=>[r(me,{title:e.$t("Products Notes")},{default:o(()=>[(i(!0),ee(Te,null,Ee(a(l).products.find(s=>s.product_id==a(V).id).notes,(s,D)=>(i(),v(ae,{class:"pt-2"},{default:o(()=>[r(n,{label:`Note #${D+1}`,class:"flex-grow-1",modelValue:a(l).products.find(A=>A.product_id==a(V).id).notes[D],"onUpdate:modelValue":A=>a(l).products.find(R=>R.product_id==a(V).id).notes[D]=A},null,8,["label","modelValue","onUpdate:modelValue"])]),_:2},1024))),256)),r(ae,{class:"d-flex justify-end gap-3 flex-wrap"},{default:o(()=>[r(S,{onClick:t[0]||(t[0]=s=>re.value=!1)},{default:o(()=>[F(m(e.$t("Save")),1)]),_:1})]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"]),r(xe,{modelValue:a(G),"onUpdate:modelValue":t[3]||(t[3]=s=>j(G)?G.value=s:null),persistent:"",class:"v-dialog-sm"},{default:o(()=>[r(p,{onClick:t[2]||(t[2]=s=>G.value=!a(G))}),r(me,{title:"Product Images"},{default:o(()=>[r(ae,{class:"d-flex flex-row align-center px-0 pb-5 pt-0 flex-wrap px-5"},{default:o(()=>[g("div",{style:Ca([a(l).products.find(s=>s.product_id==a(V)).images.length==a(l).products.find(s=>s.product_id==a(V)).quantity*10?"pointer-events: none;":"",{width:"120px",height:"120px",border:"2px solid lightgrey"}]),class:"add_image px-0 py-0 rounded mx-1 mt-4 position-relative d-flex align-center justify-center"},[r(Oe,{class:"position-absolute",icon:"tabler-plus"}),g("input",{onChange:va,type:"file",name:"file",style:{opacity:"0",height:"100%"},class:"h-100",multiple:"",accept:"image/png, image/gif, image/jpeg",disabled:a(l).products.find(s=>s.product_id==a(V)).images.length==a(l).products.find(s=>s.product_id==a(V)).quantity*10},null,40,al)],4),(i(!0),ee(Te,null,Ee(a(l).products.find(s=>s.product_id==a(V)).images,s=>(i(),ee("div",ll,[r(S,{size:"33",color:"error",class:"delete_btn position-absolute px-1 py-1"},{default:o(()=>[r(Oe,{icon:"tabler-trash",size:"22",onClick:D=>fa(s)},null,8,["onClick"])]),_:2},1024),g("div",tl,[g("img",{src:s.binary,style:{"object-fit":"cover"},class:"w-100 h-100",alt:"product_image"},null,8,sl)])]))),256))]),_:1})]),_:1})]),_:1},8,["modelValue"]),r(xe,{modelValue:a(O),"onUpdate:modelValue":t[9]||(t[9]=s=>j(O)?O.value=s:null),persistent:"",class:"v-dialog-sm"},{default:o(()=>[r(p,{onClick:t[4]||(t[4]=s=>O.value=!a(O))}),r(me,{title:"Additional Options"},{default:o(()=>[r(ae,null,{default:o(()=>[r(c,null,{default:o(()=>[r(b,null,{default:o(()=>[r(qe,{"prepend-inner-icon":"tabler-building-store",placeholder:"Flavor",label:e.$t("Flavor"),modelValue:a(l).flavor,"onUpdate:modelValue":t[5]||(t[5]=s=>a(l).flavor=s),items:[],"item-value":"id","item-title":"name",variant:"outlined","return-object":!1,class:"flex-grow-1 my-1 mx-2"},null,8,["label","modelValue"])]),_:1}),r(b,null,{default:o(()=>[r(ve,{"prepend-inner-icon":"tabler-package",modelValue:a(l).extra,"onUpdate:modelValue":t[6]||(t[6]=s=>a(l).extra=s),items:[],"item-title":"name","item-value":"id",variant:"outlined",label:e.$t("Extra"),class:"flex-grow-1 my-1 mx-2",multiple:""},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1}),r(ae,{class:"d-flex justify-end gap-3 flex-wrap"},{default:o(()=>[r(S,{color:"secondary",variant:"tonal",onClick:t[7]||(t[7]=s=>O.value=!1),disabled:e.loadingDialog},{default:o(()=>[F(" Cancel ")]),_:1},8,["disabled"]),r(S,{onClick:t[8]||(t[8]=s=>O.value=!1),loading:e.loadingDialog},{default:o(()=>[F(" OK ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),r(c,{class:"mt-4 px-2",justify:"space-around"},{default:o(()=>[r(a(Ve),{ref_key:"refVForm",ref:Se,onSubmit:ke(na,["prevent"]),class:"w-100 d-flex"},{default:o(()=>[r(b,{class:"pt-0",cols:e.$vuetify.display.smAndDown?12:8},{default:o(()=>[g("p",rl,m(e.$t("Create Order")),1),a(k)=="admin"?(i(),v(a(Ve),{key:0,ref_key:"phoneForm",ref:de,onSubmit:ke(Je,["prevent"])},{default:o(()=>[r(b,{class:"px-5 rounded pb-7",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:o(()=>[g("p",ol,m(e.$t("Search by Phone Number")),1),r(b,null,{default:o(()=>[r(c,{justify:"space-between",align:"start"},{default:o(()=>[r(n,{rules:[a(w),a(we),a($e)],min:1,"prepend-inner-icon":"tabler-phone",style:{width:"100%"},class:"pe-3 flex-grow-1",modelValue:a(I),"onUpdate:modelValue":t[10]||(t[10]=s=>j(I)?I.value=s:null),placeholder:a(te)("Phone Number")},null,8,["rules","modelValue","placeholder"]),r(S,{type:"submit",disabled:!a(I),loading:a(E)},{default:o(()=>[F(m(e.$t("Search")),1)]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])):_("",!0),a(k)=="restaurant"?(i(),v(a(Ve),{key:1,ref_key:"phoneForm",ref:de,onSubmit:ke(Qe,["prevent"])},{default:o(()=>[r(b,{class:"px-5 rounded pb-7",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:o(()=>[g("p",nl,m(e.$t("Search by Phone Number")),1),r(b,null,{default:o(()=>[r(c,{justify:"space-between",align:"start"},{default:o(()=>[r(n,{rules:[a(w),a(we),a($e)],min:1,"prepend-inner-icon":"tabler-phone",style:{width:"100%"},class:"pe-3 flex-grow-1",modelValue:a(I),"onUpdate:modelValue":t[11]||(t[11]=s=>j(I)?I.value=s:null),placeholder:a(te)("Phone Number")},null,8,["rules","modelValue","placeholder"]),r(S,{type:"submit",disabled:!a(I),loading:a(E)},{default:o(()=>[F(m(e.$t("Search")),1)]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])):_("",!0),r(b,{class:"mt-7 px-5 rounded pb-10",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:o(()=>[g("p",ul,m(e.$t("Products")),1),r(b,null,{default:o(()=>[r(c,{justify:"space-between",align:"end"},{default:o(()=>[r(ve,{"prepend-inner-icon":"tabler-package",loading:a(se),modelValue:a(Q),"onUpdate:modelValue":t[12]||(t[12]=s=>j(Q)?Q.value=s:null),items:a(_e),"item-title":"name_en","item-value":"id",style:{width:"100%"},variant:"outlined",label:e.$t("Products"),class:"flex-grow-1 my-1 w-50 mx-2"},null,8,["loading","modelValue","items","label"]),r(n,{label:e.$t("Quantity"),type:"number",class:"flex-grow-1 mx-2 my-1 w-25",modelValue:a(y),"onUpdate:modelValue":t[13]||(t[13]=s=>j(y)?y.value=s:null)},null,8,["label","modelValue"]),r(S,{"prepend-icon":"tabler-plus",class:"flex-grow-1 mx-2 my-1",disabled:a(y)<=0||!a(Q),onClick:sa},{default:o(()=>[F(m(e.$t("Add")),1)]),_:1},8,["disabled"])]),_:1}),r(c,{align:"center"},{default:o(()=>[a(P).length?(i(),v(u,{key:0,items:a(P),onDelete:oa,onAddImage:pa,onAddNote:ma,onAddExtraFlavors:ca},null,8,["items"])):_("",!0)]),_:1})]),_:1})]),_:1}),r(b,{class:"mt-7 px-5 rounded pb-10",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:o(()=>[g("p",dl,m(e.$t("User Details")),1),r(b,null,{default:o(()=>[r(c,{justify:"space-between",align:"end"},{default:o(()=>[r(n,{"prepend-inner-icon":"tabler-user",label:e.$t("Name"),rules:[a(w)],placeholder:e.$t("Customer Name"),class:"flex-grow-1 mx-2 my-1",modelValue:a(l).name,"onUpdate:modelValue":t[14]||(t[14]=s=>a(l).name=s)},null,8,["label","rules","placeholder","modelValue"]),r(n,{"prepend-inner-icon":"tabler-at",label:e.$t("Email"),placeholder:e.$t("Customer Email"),rules:[a(Sa),a(w)],class:"flex-grow-1 mx-2 my-1",modelValue:a(l).email,"onUpdate:modelValue":t[15]||(t[15]=s=>a(l).email=s)},null,8,["label","placeholder","rules","modelValue"])]),_:1}),r(c,{justify:"space-between",align:"end",class:"mt-6"},{default:o(()=>[r(n,{"prepend-inner-icon":"tabler-phone",placeholder:e.$t("Customer Phone Number"),label:e.$t("Phone Number"),rules:[a(we),a(w),a($e)],class:"flex-grow-1 mx-2 my-1",modelValue:a(l).address_phone,"onUpdate:modelValue":t[16]||(t[16]=s=>a(l).address_phone=s)},null,8,["placeholder","label","rules","modelValue"]),a(k)=="admin"?(i(),v(n,{key:0,"prepend-inner-icon":"tabler-user-check",label:e.$t("Agent"),placeholder:e.$t("Agent"),class:"flex-grow-1 mx-2 my-1",modelValue:a(l).agent,"onUpdate:modelValue":t[17]||(t[17]=s=>a(l).agent=s)},null,8,["label","placeholder","modelValue"])):_("",!0)]),_:1})]),_:1})]),_:1}),r(b,{class:"mt-7 px-5 rounded pb-10",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:o(()=>[g("p",il,m(e.$t("User Address")),1),r(b,null,{default:o(()=>[r(c,{justify:"space-between",align:"end"},{default:o(()=>[a(k)=="admin"?(i(),v(ve,{key:0,clearable:"","prepend-inner-icon":"tabler-building-community",loading:a(Y),modelValue:a(l).address_address_area,"onUpdate:modelValue":[t[18]||(t[18]=s=>a(l).address_address_area=s),t[19]||(t[19]=s=>ne())],"return-object":!1,items:a(pe),"item-value":"name","item-title":"name",style:{width:"100%"},variant:"outlined",rules:[a(w)],label:e.$t("Area"),class:"flex-grow-0 my-1 w-50 mx-2"},null,8,["loading","modelValue","items","rules","label"])):_("",!0),a(k)=="restaurant"?(i(),v(ve,{key:1,clearable:"","prepend-inner-icon":"tabler-building-community",loading:a(Y),modelValue:a(l).address_address_area,"onUpdate:modelValue":[t[20]||(t[20]=s=>a(l).address_address_area=s),t[21]||(t[21]=s=>ne())],items:a(pe),"item-value":"name","item-title":"name","return-object":!1,style:{width:"100%"},variant:"outlined",rules:[a(w)],label:e.$t("Area"),class:"flex-grow-0 my-1 w-50 mx-2"},null,8,["loading","modelValue","items","rules","label"])):_("",!0),r(n,{"prepend-inner-icon":"tabler-container",label:e.$t("Building Number"),rules:[a(w)],placeholder:e.$t("Building Number"),class:"flex-grow-1 mx-2 my-1",modelValue:a(l).address_building_no,"onUpdate:modelValue":t[22]||(t[22]=s=>a(l).address_building_no=s)},null,8,["label","rules","placeholder","modelValue"])]),_:1}),r(c,{justify:"space-between",align:"end",class:"mt-6"},{default:o(()=>[r(n,{"prepend-inner-icon":"tabler-stairs",placeholder:e.$t("Floor"),label:e.$t("Floor"),rules:[a(w)],class:"flex-grow-1 mx-2 my-1",modelValue:a(l).address_floor,"onUpdate:modelValue":t[23]||(t[23]=s=>a(l).address_floor=s)},null,8,["placeholder","label","rules","modelValue"]),r(n,{"prepend-inner-icon":"tabler-window",label:e.$t("Apartment"),rules:[a(w)],placeholder:e.$t("Apartment"),class:"flex-grow-1 mx-2 my-1",modelValue:a(l).address_apartment,"onUpdate:modelValue":t[24]||(t[24]=s=>a(l).address_apartment=s)},null,8,["label","rules","placeholder","modelValue"])]),_:1}),r(c,{justify:"space-between",align:"end",class:"mt-6"},{default:o(()=>[r(n,{"prepend-inner-icon":"tabler-road",placeholder:e.$t("Street Name"),rules:[a(w)],label:e.$t("Street Name"),class:"flex-grow-1 mx-2 my-1",modelValue:a(l).address_street_name,"onUpdate:modelValue":t[25]||(t[25]=s=>a(l).address_street_name=s)},null,8,["placeholder","rules","label","modelValue"]),r(n,{"prepend-inner-icon":"tabler-number",rules:[a(w)],label:e.$t("Block Number"),placeholder:e.$t("Block Number"),class:"flex-grow-1 mx-2 my-1",modelValue:a(l).block_no,"onUpdate:modelValue":t[26]||(t[26]=s=>a(l).block_no=s)},null,8,["rules","label","placeholder","modelValue"])]),_:1})]),_:1})]),_:1}),a(k)=="admin"||a(k)=="restaurant"?(i(),v(b,{key:2,class:"mt-7 px-5 rounded pb-10",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:o(()=>[r(c,{class:"mx-0 my-0 py-0 px-0",align:"center",justify:"space-between"},{default:o(()=>[g("p",pl,m(e.$t("Order Scheduling")),1),a(Z)&&a(l).is_pickup?(i(),v(La,{key:0,size:"large",label:"",color:"error",class:"text-h6",height:"200","prepend-icon":"tabler-info-circle"},{default:o(()=>[F("The Branch is currently Closed")]),_:1})):_("",!0)]),_:1}),r(b,null,{default:o(()=>[r(c,{justify:"space-between",align:"center",class:Fa(e.$vuetify.display.smAndDown?"":"flex-nowrap")},{default:o(()=>[a(l).is_pickup?(i(),ee("div",cl,[(i(),v(f,{rules:[a(w)],disabled:!a(l).is_pickup,"prepend-inner-icon":"tabler-calendar",modelValue:a(l).delivery_date,"onUpdate:modelValue":[t[27]||(t[27]=s=>a(l).delivery_date=s),ne],placeholder:e.$t("Choose Date"),class:"flex-grow-1 mx-2 my-1",config:{minDate:a(le)},key:a(ce)},null,8,["rules","disabled","modelValue","placeholder","config"])),(i(),v(f,{rules:[a(w)],disabled:!a(l).is_pickup||a(Z)||Ke,"prepend-inner-icon":"tabler-clock",modelValue:a(l).delivery_time,"onUpdate:modelValue":t[28]||(t[28]=s=>a(l).delivery_time=s),placeholder:e.$t("Enter your time"),class:"flex-grow-1 mx-2 my-1",key:a(X),config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i",minTime:a(B),maxTime:a(W)}},null,8,["rules","disabled","modelValue","placeholder","config"]))])):_("",!0),a(l).is_pickup?_("",!0):(i(),ee("div",ml,[(i(),v(f,{disabled:!a(l).is_pickup,"prepend-inner-icon":"tabler-calendar",modelValue:a(l).delivery_date,"onUpdate:modelValue":[t[29]||(t[29]=s=>a(l).delivery_date=s),ne],placeholder:a(te)("Choose Date"),class:"flex-grow-1 mx-2 my-1",config:{minDate:a(le)},key:a(ce)},null,8,["disabled","modelValue","placeholder","config"])),(i(),v(f,{disabled:!a(l).is_pickup||a(Z),"prepend-inner-icon":"tabler-clock",modelValue:a(l).delivery_time,"onUpdate:modelValue":t[30]||(t[30]=s=>a(l).delivery_time=s),placeholder:a(te)("Enter your time"),class:"flex-grow-1 mx-2 my-1",key:a(X),config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i",minTime:a(B),maxTime:a(W)}},null,8,["disabled","modelValue","placeholder","config"]))])),r(c,{class:"w-50 mx-2 my-0",justify:e.$vuetify.display.smAndDown?"center":"start"},{default:o(()=>[r(Ya,{modelValue:a(l).is_pickup,"onUpdate:modelValue":[t[31]||(t[31]=s=>a(l).is_pickup=s),Fe],"false-value":!1,"true-value":!0,inset:!1,label:a(te)("Schedule Order")},null,8,["modelValue","label"])]),_:1},8,["justify"])]),_:1},8,["class"])]),_:1})]),_:1})):_("",!0)]),_:1},8,["cols"]),r(b,{class:"pt-0",cols:e.$vuetify.display.smAndDown?12:4},{default:o(()=>[r(b,{class:"mt-16 px-5 rounded pb-10 w-100 mx-auto",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:o(()=>[g("p",vl,m(e.$t("Order Summary")),1),r(b,null,{default:o(()=>[r(c,{justify:"space-between",align:"center"},{default:o(()=>[r(qe,{clearable:"","prepend-inner-icon":"tabler-building-store",placeholder:"Select a Branch",rules:[a(w)],label:e.$t("Branch"),loading:a(L),modelValue:a(l).branch_id,"onUpdate:modelValue":[t[32]||(t[32]=s=>a(l).branch_id=s),ne],items:a(x),"item-value":"id","item-title":a(Re),style:{width:"100%"},variant:"outlined","return-object":!1},null,8,["rules","label","loading","modelValue","items","item-title"])]),_:1}),r(c,{class:"mt-4"},{default:o(()=>[r(b,{class:"w-100 px-0"},{default:o(()=>[a(T)?(i(),v(n,{key:0,class:"w-100 flex-grow-1","prepend-inner-icon":"tabler-user-star",placeholder:e.$t("Enter Employee code"),modelValue:a(N),"onUpdate:modelValue":t[33]||(t[33]=s=>j(N)?N.value=s:null),style:{width:"100%"},variant:"outlined"},null,8,["placeholder","modelValue"])):_("",!0),a(T)?_("",!0):(i(),v(n,{key:1,class:"w-100 flex-grow-1","prepend-inner-icon":"tabler-gift",placeholder:e.$t("Have a Voucher?"),modelValue:a(C),"onUpdate:modelValue":t[34]||(t[34]=s=>j(C)?C.value=s:null),style:{width:"100%"},variant:"outlined"},null,8,["placeholder","modelValue"])),r(Ga,{onClick:ia,label:e.$t("Is An Employee"),modelValue:a(T),"onUpdate:modelValue":t[35]||(t[35]=s=>j(T)?T.value=s:null),class:"mt-2"},null,8,["label","modelValue"]),!a(T)&&a(k)=="admin"?(i(),v(S,{key:2,class:"mt-3",disabled:!a(C),block:"",loading:a(M),onClick:aa},{default:o(()=>[F(m(e.$t("Apply Voucher")),1)]),_:1},8,["disabled","loading"])):_("",!0),!a(T)&&a(k)=="restaurant"?(i(),v(S,{key:3,class:"mt-3",disabled:!a(C),block:"",loading:a(M),onClick:la},{default:o(()=>[F(m(e.$t("Apply Voucher")),1)]),_:1},8,["disabled","loading"])):_("",!0),a(T)&&a(k)=="admin"?(i(),v(S,{key:4,class:"mt-3",disabled:!a(N),block:"",loading:a(J),onClick:ua},{default:o(()=>[F(m(e.$t("Check Employee")),1)]),_:1},8,["disabled","loading"])):_("",!0),a(T)&&a(k)=="restaurant"?(i(),v(S,{key:5,class:"mt-3",disabled:!a(N),block:"",loading:a(J),onClick:da},{default:o(()=>[F(m(e.$t("Check Employee")),1)]),_:1},8,["disabled","loading"])):_("",!0)]),_:1})]),_:1}),r(c,{class:"mt-5"},{default:o(()=>[r(me,{class:"w-100 px-2 py-2",variant:"tonal",color:e.$vuetify.theme.current.dark?"#B3BFFFFF":"primary"},{default:o(()=>[r(ae,null,{default:o(()=>[r(c,{align:"center",justify:"space-between"},{default:o(()=>[g("p",fl,m(e.$t("Deliver Cost")),1),g("p",_l,m(a(l).delivery_cost)+" KWD",1)]),_:1}),r(c,null,{default:o(()=>[r(De,{color:e.$vuetify.theme.current.dark?"#B3BFFFFF":"primary"},null,8,["color"])]),_:1}),r(c,{align:"center",justify:"space-between",class:"mt-5"},{default:o(()=>[gl,g("p",bl,m(Number(a(U)+a(l).delivery_cost).toFixed(2))+" KWD",1)]),_:1}),a(l).v_code?(i(),v(c,{key:0},{default:o(()=>[r(De,{color:e.$vuetify.theme.current.dark?"#B3BFFFFF":"primary"},null,8,["color"])]),_:1})):_("",!0),a(l).v_code||a(l).employee_code?(i(),v(c,{key:1,align:"center",justify:"space-between",class:"mt-5"},{default:o(()=>[g("p",yl,m(e.$t("Discount rate")),1),g("p",hl,m(a(q)),1)]),_:1})):_("",!0),a(l).v_code||a(l).employee_code?(i(),v(c,{key:2},{default:o(()=>[r(De,{color:e.$vuetify.theme.current.dark?"#B3BFFFFF":"primary"},null,8,["color"])]),_:1})):_("",!0),a(l).v_code||a(l).employee_code?(i(),v(c,{key:3,align:"center",justify:"space-between",class:"mt-5"},{default:o(()=>[g("p",Vl,m(e.$t("New Total")),1),g("p",kl,m(Number(a(ta)).toFixed(1))+" KWD",1)]),_:1})):_("",!0)]),_:1})]),_:1},8,["color"])]),_:1}),r(c,{class:"mt-8"},{default:o(()=>[r(S,{type:"submit",loading:a(ie),block:""},{default:o(()=>[F(m(e.$t("Create Order")),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["cols"])]),_:1},8,["onSubmit"])]),_:1})])}}};typeof Me=="function"&&Me(He);const tt=ka(He,[["__scopeId","data-v-52472e67"]]);export{tt as default};
