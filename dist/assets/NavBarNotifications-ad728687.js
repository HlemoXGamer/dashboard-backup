import{k as C,r as I,o as r,b as y,w as e,c as u,y as l,A as p,q as t,z as O,I as S,J as w,K as L,H as f,s as N,P as B,F as g,a as T,L as q,n as P,M as z,N as A,O as v,Q as c,R as D,S as R}from"./index-8020c556.js";import{V as F}from"./VMenu-1bad06f2.js";import{V as x}from"./VDivider-6944b310.js";import{V as M,a as b,b as h,c as E}from"./VList-82debb1c.js";import{V as J}from"./VListItemAction-ef011a55.js";import"./VOverlay-1fb1e8c5.js";import"./lazy-28908172.js";import"./dialog-transition-0d625075.js";import"./ssrBoot-e30dcb21.js";const H={key:0,class:"notification-badge position-absolute bg-error"},K={key:0},Q={class:"text-xs text-disabled"},W={__name:"Notifications",props:{notifications:{type:Array,required:!0},total:{type:Number,required:!0,default:0},badgeProps:{type:null,required:!1,default:void 0},location:{type:null,required:!1,default:"bottom end"}},emits:["click:notification"],setup(V,{emit:k}){const n=V,i=C(),_=(a,o)=>a=="created"?{text:`New Order is added #${o}`}:a=="ready_for_delivery"?{text:`Order #${o} is Ready for delivery`}:a=="in_progress"?{text:`Order #${o} is In Progress`}:a=="cancelled"?{text:`Order #${o} is cancelled`}:a=="on_the_way"?{text:`Order #${o} is On The Way`}:{text:`Order #${o} is ${a}`},d=a=>{i.replace(`/orders/${a}`)};return(a,o)=>{const m=I("IconBtn");return r(),y(m,{id:"notification-btn position-relative",onClick:o[0]||(o[0]=s=>a.$emit("click:notification"))},{default:e(()=>[n.total!==0?(r(),u("span",H,l(n.total),1)):p("",!0),t(O,{size:"26",icon:"tabler-bell"}),t(F,{activator:"parent",width:"380px",location:n.location,offset:"14px","close-on-content-click":!1},{default:e(()=>[t(S,{class:"d-flex flex-column"},{default:e(()=>[t(w,{class:"notification-section"},{default:e(()=>[t(L,{class:"text-lg"},{default:e(()=>[f(l(a.$t("notifications")),1)]),_:1})]),_:1}),t(x),t(N(B),{options:{wheelPropagation:!1},style:{"max-block-size":"23.75rem"}},{default:e(()=>[t(M,{class:"notification-list rounded-0 py-0"},{default:e(()=>[(r(!0),u(g,null,T(n.notifications,(s,$)=>(r(),u(g,{key:s.id},[$>0?(r(),y(x,{key:0})):p("",!0),t(b,{link:"",lines:"one","min-height":"66px",class:"list-item-hover-class",onClick:j=>d(s.order_id)},{prepend:e(()=>[t(J,{start:""},{default:e(()=>[t(q,{size:"40",variant:"tonal"},{default:e(()=>[s.order_id?(r(),u("span",K,l(s.order_id),1)):p("",!0)]),_:2},1024)]),_:2},1024)]),default:e(()=>[t(h,null,{default:e(()=>[f("#"+l(s.order_id),1)]),_:2},1024),t(E,null,{default:e(()=>[f(l(_(s.status,s.order_id).text),1)]),_:2},1024),P("span",Q,l(s.time),1)]),_:2},1032,["onClick"])],64))),128)),z(t(b,{class:"text-center text-medium-emphasis",style:{"block-size":"56px"}},{default:e(()=>[t(h,null,{default:e(()=>[f("No Notification Found!")]),_:1})]),_:1},512),[[A,!n.notifications.length]])]),_:1})]),_:1}),t(x)]),_:1})]),_:1},8,["location"])]),_:1})}}},it={__name:"NavBarNotifications",setup(V){var d;const k=v(()=>c().$state.items),n=v(()=>c().$state.total),i=(d=JSON.parse(localStorage.getItem("userData")))==null?void 0:d.type,_=()=>{(i=="restaurant"||i=="admin")&&(c().getNotifications(i),c().updateNotifications(i),c().SET_TOTAL(0))};return D(async()=>{(i=="restaurant"||i=="admin")&&(await R.requestPermissions(),c().getNotifications(i))}),(a,o)=>{const m=W;return r(),y(m,{notifications:N(k),total:N(n),"onClick:notification":_},null,8,["notifications","total"])}}};export{it as default};
