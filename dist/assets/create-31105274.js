import{_ as ua}from"./AppTextarea-ec209ad1.js";import{_ as ia}from"./OrderProducts-8dd18099.js";import{_ as pa}from"./AppDateTimePicker-a5e2f7c6.js";import{_ as ca}from"./DialogCloseBtn-35cd036e.js";import{ba as ma,C as va,l as n,aV as fa,O as fe,R as _a,aB as ba,o as m,c as G,q as r,w as d,I as oe,F as Se,a as Ie,s as l,b as y,aX as J,az as j,H as U,y as f,G as T,n as b,aY as ga,z as Be,U as p,W as _,A as $,a$ as Ne,b0 as Ue,b1 as x,b2 as Te,bc as Ae,t as je,bd as ya,aZ as Ee,aW as ha,a_ as Va,a8 as wa,a9 as ka}from"./index-5f1e036d.js";import{t as $a}from"./files-2e167225.js";import{g as xa}from"./areas-3a13c662.js";import{a as Da,g as Ca}from"./branches-75c730bf.js";import{c as Fa,b as Sa,d as Ia}from"./orders-9ecf0b1d.js";import{g as Ba}from"./products-db454d48.js";import{V as _e}from"./VDialog-c2a8b0a4.js";import{V as be}from"./VSelect-38820d74.js";import{V as Oe}from"./VChip-c99b15f1.js";import{V as Na}from"./VSwitch-0e059f6e.js";import{V as Pe}from"./VCombobox-2917f1fb.js";import{V as Ua}from"./VCheckbox-3a13a249.js";import{V as ge}from"./VDivider-ca899a5a.js";import"./VDataTable-abff0085.js";import"./VCheckboxBtn-0b3e4e8e.js";import"./VSelectionControl-82ad58b5.js";import"./VList-99b9fa4c.js";import"./ssrBoot-dcc7d968.js";import"./filter-4e25312c.js";import"./VTable-0f962fff.js";import"./VOverlay-315386a7.js";import"./lazy-9d6f5b63.js";import"./dialog-transition-c18f9302.js";import"./VMenu-9df5e73f.js";function Ta(M){return ma.post("agent/employee/check",M)}const Aa=M=>(wa("data-v-7be99d49"),M=M(),ka(),M),ja=["disabled"],Ea={style:{width:"120px",height:"120px",border:"2px solid lightgrey"},class:"product_image px-0 py-0 rounded mx-1 mt-4 position-relative d-flex align-center justify-center"},Oa={class:"w-100 h-100",style:{overflow:"hidden"}},Pa=["src"],Ma={class:"text-h4 pt-3 pb-2"},qa={class:"text-h4 pt-3"},Ha={class:"text-h4 pt-3 mb-5"},Wa={key:0,class:"w-100 flex-grow-1 d-flex"},za={key:1,class:"w-100 flex-grow-1 d-flex"},Ka={class:"text-h4 pt-3 mb-5"},La={class:"text-h4 pt-3 mb-0"},Ra={class:"text-h4 pt-3 mb-4"},Ya={class:"text-h4 pt-3 mb-1"},Ga={class:"text-h4 pt-3 mb-5"},Ja={class:"mb-2"},Qa={class:"mb-2"},Xa=Aa(()=>b("p",{class:"mb-2"},"Total",-1)),Za={class:"mb-2"},el={class:"mb-2"},al={class:"mb-2"},ll={class:"mb-0"},tl={class:"mb-0"},Me={__name:"create",setup(M){var De;const qe=(De=JSON.parse(localStorage.getItem("userData")))==null?void 0:De.type,q=n(""),ye=n(),he=n(),D=fa(),ae=n(!1),Q=n([]),F=n([]),Ve=n([]),le=n(!1),ne=n(!1),ue=n(!1),ie=n(!1);n(!1);const pe=n(!1),H=n([]),g=n(1),W=n(),B=n([]),S=n(0),X=n(new Date().toISOString()),te=n(!1),Z=n(0),we=n(!1),ke=n([]);n(0);const A=n(""),z=n(""),K=n(""),ce=n(0),L=n(!1),ee=n(!1),k=n([]),E=n(""),O=n(!1),N=n(null),R=n(null),P=n(!1),se=n(null),Y=n(!1),re=n(1),a=n({is_pickup:!0,products:[],email:"",name:"",note:"",address_city:1,delivery_date:"",delivery_time:"",address_building_no:"",block_no:"",address_floor:"",address_phone:"",address_apartment:"",address_address_area:null,address_street_name:"",delivery_man_id:"",branch_id:null,v_code:"",employee_code:"",extra:"",flavor:""}),He=()=>{Da().then(({data:e,meta:t})=>{a.value.delivery_cost=e.data.delivery_cost})},We=()=>{ie.value=!0,xa().then(({data:e,meta:t})=>{Ve.value=e.data,ie.value=!1})},$e=e=>{ue.value=!0,Ba(e).then(({data:t,meta:o})=>{H.value=t.data,ue.value=!1})},ze=()=>{var e;(e=ye.value)==null||e.validate().then(async({valid:t})=>{t&&(le.value=!0,Fa({phone:`${q.value}`}).then(o=>{D.success("Customer found!"),ke.value=o.data.data.length?o.data.data[0]:[],a.value.email=o.data.email,a.value.name=o.data.name,we.value=!0,le.value=!1,Je()}).catch(o=>{D.error(o.response.data.message),le.value=!1}))})},Ke=()=>{ne.value=!0,Ca().then(({data:e})=>{Q.value=e.data.filter(t=>t.is_active===1),F.value=e.data.filter(t=>t.id===2),N.value=F.value[0].start,se.value=N.value,R.value=F.value[0].end,Z.value+=1,ne.value=!1})},Le=()=>{te.value=!0,Sa({v_code:A.value,total:S.value}).then(e=>{const t={fixed:" KWD",percentage:"%"};a.value.v_code=A.value,A.value="",z.value=parseInt(e.data.discount_rate)+t[e.data.discount_type],K.value=e.data.discount_type,D.success(e.data.message),te.value=!1}).catch(e=>{D.error(e.response.data.message),te.value=!1})},Re=fe(()=>(K.value=="fixed"?ce.value=parseInt(S.value-parseInt(z.value)):K.value=="percentage"?ce.value=parseInt(S.value)-parseInt(S.value)*parseInt(z.value)/100:K.value=="free_delivery",ce.value+(a.value.delivery_cost??.5))),Ye=()=>{const e=W.value;if(B.value.includes(e)){a.value.products.find(o=>o.product_id===e.id).quantity=parseInt(a.value.products.find(o=>o.product_id===e.id).quantity)+parseInt(g.value);let t=B.value.find(o=>o==e);t.quantity=parseInt(t.quantity)+parseInt(g.value),t.total=t.total+g.value*e.price,S.value+=g.value*e.price,e.has_note==1&&a.value.products.find(o=>o.product_id==e.id).notes.push("")}else{if(e.has_image==1&&e.has_note==1){a.value.products.push({product_id:e.id,quantity:parseInt(g.value),images:[],notes:[]});for(let t=0;t<g.value;t++)a.value.products.find(o=>o.product_id==e.id).notes[t]="";e.images=0,k.value.push({product_id:e.id})}else if(e.has_image==1&&e.has_note==0)a.value.products.push({product_id:e.id,quantity:parseInt(g.value),images:[]}),e.images=0,k.value.push({product_id:e.id});else if(e.has_image==0&&e.has_note==1){a.value.products.push({product_id:e.id,quantity:parseInt(g.value),notes:[]});for(let t=0;t<g.value;t++)a.value.products.find(o=>o.product_id==e.id).notes[t]=""}else a.value.products.push({product_id:e.id,quantity:parseInt(g.value)});e.quantity=g.value,S.value+=e.price*g.value,e.total=e.price*g.value,B.value.push(e)}W.value=null,g.value=1},xe=()=>{const e=new Date;if(a.value.delivery_time=null,a.value.is_pickup===!1&&(a.value.delivery_date=null,a.value.delivery_time=null),a.value.is_pickup===!0&&(a.value.address_address_area==null||a.value.address_address_area==""))F.value=Q.value.filter(t=>t.id===2);else if(a.value.delivery_date!==me(e)&&a.value.is_pickup===!0)F.value=Q.value.filter(t=>t.id===2),a.value.branch_id=2;else if(a.value.delivery_date==me(e)){const t=Q.value.filter(o=>o.areas.find(i=>i.name===a.value.address_address_area)!==void 0);t.find(o=>o.id==a.value.branch_id)||(a.value.branch_id=null),F.value=t}else if(a.value.is_pickup===!1&&a.value.address_address_area!==null&&a.value.address_address_area!==""){const t=Q.value.filter(o=>o.areas.find(i=>i.name===a.value.address_address_area)!==void 0);t.find(o=>o.id==a.value.branch_id)||(a.value.branch_id=null),F.value=t}},me=e=>{const t=String(e.getDate()).padStart(2,"0"),o=String(e.getMonth()+1).padStart(2,"0");return`${e.getFullYear()}-${o}-${t}`},de=()=>{F.value.find(e=>e.id===a.value.branch_id),Z.value+=1,Ge()},Ge=()=>{var t,o,u,i;const e=new Date;if(e.toISOString(),xe(),F.value.find(v=>v.id==a.value.branch_id),a.value.delivery_date==me(e)){const v=e.getHours(),h=e.getMinutes(),[s,V]=(t=N.value.split(":"))==null?void 0:t.map(Number),[C,w]=(o=R.value.split(":"))==null?void 0:o.map(Number);if(v>C||v===C&&h>=w)P.value=!0;else if(v<s||v===s&&h<V)N.value=se.value;else{const I=new Date(new Date().setMinutes(new Date().getMinutes()+40)),Ce=I.getHours(),oa=I.getMinutes();(u=N.value.split(":"))==null||u.map(Number);const[Fe,na]=(i=R.value.split(":"))==null?void 0:i.map(Number);Ce>Fe||Ce===Fe&&oa>=na?P.value=!0:N.value=new Date(new Date().setMinutes(new Date().getMinutes()+40)).toTimeString().slice(0,5)}}else{P.value=!1,N.value=se.value;let v,h=new Date,s=new Date(h);s.setHours(0,0,0,0);let V=new Date(h);V.setHours(4,55,0,0),(h.getDate()!==ve.value||h>=s&&h<=V)&&(v="menuType=pre-order",$e(v))}Z.value+=1,a.value.delivery_time=null},Je=()=>{const e=ke.value;a.value.address_apartment=e==null?void 0:e.apartment,a.value.block_no=e==null?void 0:e.block_no,a.value.address_building_no=e==null?void 0:e.building_num,a.value.address_floor=e==null?void 0:e.floor,a.value.address_street_name=e==null?void 0:e.street_name,a.value.address_address_area=e.area_name,a.value.address_phone=q.value,we.value=!1},Qe=e=>{S.value=S.value-e.price*e.quantity,B.value.splice(B.value.indexOf(e),1),a.value.products.splice(a.value.products.indexOf(a.value.products.find(t=>t.product_id==e.id)),1),e.has_image==1&&k.value.splice(k.value.indexOf(k.value.find(t=>t.product_id==e.id)),1)},Xe=async()=>{var t,o,u;if(a.value.is_pickup===!1){const i=new Date().getHours(),v=new Date().getMinutes(),[h,s]=(t=se.value.split(":"))==null?void 0:t.map(Number),[V,C]=(o=R.value.split(":"))==null?void 0:o.map(Number);if(i>V||i===V&&v>=C||i<h||i===h&&v<s)return D.error("The Branch is currently closed.")}let e=new FormData;e.append("branch_id",a.value.branch_id),e.append("is_pickup",a.value.is_pickup),e.append("email",a.value.email),e.append("name",a.value.name),e.append("agent_note",a.value.agent),e.append("address_city",a.value.address_city),a.value.delivery_date!==null&&e.append("delivery_date",a.value.delivery_date+" "+a.value.delivery_time+":00"),e.append("address_building_no",a.value.address_building_no),e.append("block_no",a.value.block_no),e.append("address_floor",a.value.address_floor),e.append("address_phone",a.value.address_phone),e.append("address_apartment",a.value.address_apartment),e.append("address_address_area",a.value.address_address_area),e.append("address_street_name",a.value.address_street_name),e.append("v_code",a.value.v_code),e.append("employee_code",a.value.employee_code),a.value.products.forEach((i,v)=>{var h,s,V,C;e.append(`products[${v}][product_id]`,i.product_id),e.append(`products[${v}][quantity]`,i.quantity),(h=i.images)==null||h.forEach((w,I)=>{e.append(`products[${v}][images][${I}]`,w.file)}),(s=i.notes)==null||s.forEach((w,I)=>{e.append(`products[${v}][notes][${I}]`,w)}),(V=i.extra)==null||V.filter(w=>w!=="").forEach((w,I)=>{e.append(`products[${v}][extra_flavors][${I}]`,w)}),(C=i.flavor)==null||C.filter(w=>w!=="").forEach((w,I)=>{e.append(`products[${v}][extra_flavors][${I}]`,w)})}),(u=he.value)==null||u.validate().then(async({valid:i})=>{if(i){if(k.value.length>0)return D.error("You must pick at least the min number of Images for each Product");if(a.value.products.length==0)return D.error("You need to select at least 1 product");if(S.value<5)return D.error("The Total Cost Without The Delivery Cost Must Be More Than 5 KWD");ae.value=!0;try{await Ia(e),D.success("Order created successfully"),ha.push({name:"orders"}),ae.value=!1}catch{ae.value=!1}}})},Ze=()=>{pe.value=!0,Ta({employee_code:E.value}).then(({data:e})=>{const t={fixed:" KWD",percentage:"%"};D.success(e.meesage),z.value=parseInt(e.discount_rate)+t[e.discount_type],K.value=e.discount_type,a.value.employee_code=E.value}).catch(({response:e})=>{D.error(e.data.message)}).finally(()=>{pe.value=!1})},ea=()=>{z.value="",K.value="",E.value="",A.value="",a.value.v_code="",a.value.employee_code=""},c=n(),aa=e=>{L.value=!0,c.value=e.id},la=e=>{ee.value=!0,c.value=e},ta=e=>{var t,o;Y.value=!0,c.value=e.id,a.value.extra=(t=a.value.products.find(u=>u.product_id==u.id))==null?void 0:t.extras.map(u=>u.id),a.value.flavor=(o=a.value.products.find(u=>u.product_id==u.id))==null?void 0:o.flavors.map(u=>u.id)},sa=async e=>{let t=B.value.find(i=>i.id==c.value),o=a.value.products.find(i=>i.product_id==c.value);const u={file:e.target.files[0],id:o.images.length,binary:""};await $a(u.file).then(i=>{u.binary=i}),o.images.push(u),t.images+=1,t.images==t.quantity&&k.value.splice(k.value.indexOf(k.value.find(i=>i.product_id==c.value.product_id))),e.target.value=""},ra=e=>{let t=a.value.products.find(u=>u.product_id==c.value),o=B.value.find(u=>u.id==c.value);o.images-=1,o.images==o.quantity?k.value.splice(k.value.indexOf(k.value.find(u=>u.product_id==c.value))):k.value.map(u=>u.product_id).includes(o.id)||k.value.push({product_id:o.id}),t.images.splice(t.images.indexOf(e),1)},da=()=>{let e=a.value.products.find(t=>t.product_id==c.value);e.extra=a.value.extra,e.flavor=a.value.flavor,Y.value=!1};fe(()=>H.value.find(e=>e.id==c.value).extras),fe(()=>H.value.find(e=>e.id==c.value).flavors);const ve=n(new Date().toISOString());return _a(()=>{qe=="agent"&&(Ke(),$e(),We(),He());let e=setInterval(()=>{X.value=new Date().toISOString(),new Date(ve.value).getDate()!==new Date(X.value).getDate()&&(ve.value=X.value,re.value=re.value*2)},1e3);ba(()=>{clearInterval(e)})}),(e,t)=>{const o=Va,u=ca,i=pa,v=ia,h=ua;return m(),G("div",null,[r(_e,{modelValue:l(ee),"onUpdate:modelValue":t[1]||(t[1]=s=>T(ee)?ee.value=s:null),persistent:"",class:"v-dialog-sm"},{default:d(()=>[r(oe,{title:e.$t("Products Notes")},{default:d(()=>[(m(!0),G(Se,null,Ie(l(a).products.find(s=>s.product_id==l(c).id).notes,(s,V)=>(m(),y(J,{class:"pt-2"},{default:d(()=>[r(o,{label:`Note #${V+1}`,class:"flex-grow-1",modelValue:l(a).products.find(C=>C.product_id==l(c).id).notes[V],"onUpdate:modelValue":C=>l(a).products.find(w=>w.product_id==l(c).id).notes[V]=C},null,8,["label","modelValue","onUpdate:modelValue"])]),_:2},1024))),256)),r(J,{class:"d-flex justify-end gap-3 flex-wrap"},{default:d(()=>[r(j,{onClick:t[0]||(t[0]=s=>ee.value=!1)},{default:d(()=>[U(f(e.$t("Save")),1)]),_:1})]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"]),r(_e,{modelValue:l(L),"onUpdate:modelValue":t[3]||(t[3]=s=>T(L)?L.value=s:null),persistent:"",class:"v-dialog-sm"},{default:d(()=>[r(u,{onClick:t[2]||(t[2]=s=>L.value=!l(L))}),r(oe,{title:"Product Images"},{default:d(()=>[r(J,{class:"d-flex flex-row align-center px-0 pb-5 pt-0 flex-wrap px-5"},{default:d(()=>[b("div",{style:ga([l(a).products.find(s=>s.product_id==l(c)).images.length==l(a).products.find(s=>s.product_id==l(c)).quantity*10?"pointer-events: none;":"",{width:"120px",height:"120px",border:"2px solid lightgrey"}]),class:"add_image px-0 py-0 rounded mx-1 mt-4 position-relative d-flex align-center justify-center"},[r(Be,{class:"position-absolute",icon:"tabler-plus"}),b("input",{onChange:sa,type:"file",name:"file",style:{opacity:"0",height:"100%"},class:"h-100",multiple:"",accept:"image/png, image/gif, image/jpeg",disabled:l(a).products.find(s=>s.product_id==l(c)).images.length==l(a).products.find(s=>s.product_id==l(c)).quantity*10},null,40,ja)],4),(m(!0),G(Se,null,Ie(l(a).products.find(s=>s.product_id==l(c)).images,s=>(m(),G("div",Ea,[r(j,{size:"33",color:"error",class:"delete_btn position-absolute px-1 py-1"},{default:d(()=>[r(Be,{icon:"tabler-trash",size:"22",onClick:V=>ra(s)},null,8,["onClick"])]),_:2},1024),b("div",Oa,[b("img",{src:s.binary,style:{"object-fit":"cover"},class:"w-100 h-100",alt:"product_image"},null,8,Pa)])]))),256))]),_:1})]),_:1})]),_:1},8,["modelValue"]),r(_e,{modelValue:l(Y),"onUpdate:modelValue":t[8]||(t[8]=s=>T(Y)?Y.value=s:null),persistent:"",class:"v-dialog-sm"},{default:d(()=>[r(u,{onClick:t[4]||(t[4]=s=>Y.value=!1)}),r(oe,{title:"Additional Options"},{default:d(()=>[r(J,null,{default:d(()=>[l(c)?(m(),y(p,{key:0},{default:d(()=>[r(_,null,{default:d(()=>[r(be,{"prepend-inner-icon":"tabler-building-store",placeholder:"Flavor",label:e.$t("Flavor"),modelValue:l(a).flavor,"onUpdate:modelValue":t[5]||(t[5]=s=>l(a).flavor=s),items:l(H).find(s=>s.id==l(c)).flavors,"item-value":"id","item-title":"name",variant:"outlined","return-object":!1,class:"flex-grow-1 my-1 mx-2"},null,8,["label","modelValue","items"])]),_:1}),r(_,null,{default:d(()=>[r(be,{"prepend-inner-icon":"tabler-package",modelValue:l(a).extra,"onUpdate:modelValue":t[6]||(t[6]=s=>l(a).extra=s),"item-title":"name",items:l(H).find(s=>s.id==l(c)).extras,"item-value":"id",variant:"outlined",label:e.$t("Extra"),"return-object":!1,class:"flex-grow-1 my-1 mx-2",multiple:""},null,8,["modelValue","items","label"])]),_:1})]),_:1})):$("",!0)]),_:1}),r(J,{class:"d-flex justify-end gap-3 flex-wrap"},{default:d(()=>[r(j,{onClick:t[7]||(t[7]=s=>da())},{default:d(()=>[U(" Confirm ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),r(p,{class:"mt-4 px-2",justify:"space-around"},{default:d(()=>[r(l(Ne),{ref_key:"refVForm",ref:he,onSubmit:Ue(Xe,["prevent"]),class:"w-100 d-flex"},{default:d(()=>[r(_,{class:"pt-0",cols:e.$vuetify.display.smAndDown?12:8},{default:d(()=>[b("p",Ma,f(e.$t("Create Order")),1),r(l(Ne),{ref_key:"phoneForm",ref:ye,onSubmit:Ue(ze,["prevent"])},{default:d(()=>[r(_,{class:"px-5 rounded pb-7",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:d(()=>[b("p",qa,f(e.$t("Search by Phone Number")),1),r(_,null,{default:d(()=>[r(p,{justify:"space-between",align:"start"},{default:d(()=>[r(o,{rules:[l(x),l(Te),l(Ae)],min:1,"prepend-inner-icon":"tabler-phone",style:{width:"100%"},class:"pe-3 flex-grow-1",modelValue:l(q),"onUpdate:modelValue":t[9]||(t[9]=s=>T(q)?q.value=s:null),placeholder:e.$t("Phone Number")},null,8,["rules","modelValue","placeholder"]),r(j,{type:"submit",disabled:!l(q),loading:l(le)},{default:d(()=>[U(f(e.$t("Search")),1)]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"]),r(_,{class:"mt-7 px-5 rounded pb-10",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:d(()=>[r(p,{class:"mx-0 my-0 py-0 px-0",align:"center",justify:"space-between"},{default:d(()=>[b("p",Ha,f(e.$t("Order Scheduling")),1),l(P)&&l(a).is_pickup?(m(),y(Oe,{key:0,size:"large",label:"",color:"error",class:"text-h6",height:"200","prepend-icon":"tabler-info-circle"},{default:d(()=>[U("The Branch is currently Closed")]),_:1})):$("",!0)]),_:1}),r(_,null,{default:d(()=>[r(p,{justify:"space-between",align:"center",class:je(e.$vuetify.display.smAndDown?"":"flex-nowrap")},{default:d(()=>[l(a).is_pickup?(m(),G("div",Wa,[(m(),y(i,{rules:[l(x)],disabled:!l(a).is_pickup,"prepend-inner-icon":"tabler-calendar",modelValue:l(a).delivery_date,"onUpdate:modelValue":[t[10]||(t[10]=s=>l(a).delivery_date=s),de],placeholder:e.$t("Choose Date"),class:"flex-grow-1 mx-2 my-1",config:{minDate:l(X)},key:l(re)},null,8,["rules","disabled","modelValue","placeholder","config"])),(m(),y(i,{rules:[l(x)],disabled:!l(a).is_pickup||l(P),"prepend-inner-icon":"tabler-clock",modelValue:l(a).delivery_time,"onUpdate:modelValue":t[11]||(t[11]=s=>l(a).delivery_time=s),placeholder:e.$t("Enter your time"),class:"flex-grow-1 mx-2 my-1",key:l(Z),config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i",minTime:l(N),maxTime:l(R)}},null,8,["rules","disabled","modelValue","placeholder","config"]))])):$("",!0),l(a).is_pickup?$("",!0):(m(),G("div",za,[(m(),y(i,{disabled:!l(a).is_pickup,"prepend-inner-icon":"tabler-calendar",modelValue:l(a).delivery_date,"onUpdate:modelValue":[t[12]||(t[12]=s=>l(a).delivery_date=s),de],placeholder:e.$t("Choose Date"),class:"flex-grow-1 mx-2 my-1",config:{minDate:l(X)},key:l(re)},null,8,["disabled","modelValue","placeholder","config"])),(m(),y(i,{disabled:!l(a).is_pickup||l(P),"prepend-inner-icon":"tabler-clock",modelValue:l(a).delivery_time,"onUpdate:modelValue":t[13]||(t[13]=s=>l(a).delivery_time=s),placeholder:e.$t("Enter your time"),class:"flex-grow-1 mx-2 my-1",key:l(Z),config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i",minTime:l(N),maxTime:l(R)}},null,8,["disabled","modelValue","placeholder","config"]))])),r(p,{class:"w-50 mx-2 my-0",justify:e.$vuetify.display.smAndDown?"center":"start"},{default:d(()=>[r(Na,{modelValue:l(a).is_pickup,"onUpdate:modelValue":[t[14]||(t[14]=s=>l(a).is_pickup=s),xe],"false-value":!1,"true-value":!0,inset:!1,label:e.$t("Schedule Order")},null,8,["modelValue","label"])]),_:1},8,["justify"])]),_:1},8,["class"])]),_:1}),r(p,{class:"mx-0 my-0 py-0 px-0",align:"center",justify:"space-between"},{default:d(()=>[b("p",Ka,f(e.$t("Area & Branch")),1),l(P)&&l(a).is_pickup?(m(),y(Oe,{key:0,size:"large",label:"",color:"error",class:"text-h6",height:"200","prepend-icon":"tabler-info-circle"},{default:d(()=>[U("The Branch is currently Closed")]),_:1})):$("",!0)]),_:1}),r(_,null,{default:d(()=>[r(p,{justify:"space-between",align:"center",class:je(e.$vuetify.display.smAndDown?"":"flex-nowrap")},{default:d(()=>[r(_,{cols:"6",class:"ma-0 py-0 pe-0 pe-2"},{default:d(()=>[r(Pe,{clearable:"","prepend-inner-icon":"tabler-building-community",loading:l(ie),modelValue:l(a).address_address_area,"onUpdate:modelValue":[t[15]||(t[15]=s=>l(a).address_address_area=s),t[16]||(t[16]=s=>de())],items:l(Ve),"item-value":"name","item-title":"name","return-object":!1,style:{width:"100%"},variant:"outlined",rules:[l(x)],label:e.$t("Area"),class:"flex-grow-1 my-1 w-100"},null,8,["loading","modelValue","items","rules","label"])]),_:1}),r(_,{cols:"6",class:"ma-0 py-0 pe-0 pe-2"},{default:d(()=>[r(be,{clearable:"","prepend-inner-icon":"tabler-building-store",placeholder:e.$t("Select a Branch"),rules:[l(x)],label:e.$t("Branch"),loading:l(ne),modelValue:l(a).branch_id,"onUpdate:modelValue":[t[17]||(t[17]=s=>l(a).branch_id=s),de],items:l(F),"item-value":"id","item-title":"name_en",style:{width:"100%"},variant:"outlined",disabled:!l(a).address_address_area||l(a).address_address_area=="",class:"flex-grow-1 my-1 w-100"},null,8,["placeholder","rules","label","loading","modelValue","items","disabled"])]),_:1})]),_:1},8,["class"])]),_:1})]),_:1}),r(_,{class:"mt-7 px-5 rounded pb-10",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:d(()=>[b("p",La,f(e.$t("Products")),1),r(_,null,{default:d(()=>[r(p,{justify:"space-between",align:"end"},{default:d(()=>[r(Pe,{disabled:!l(a).branch_id||!l(a).delivery_date&&l(a).is_pickup,"prepend-inner-icon":"tabler-package",loading:l(ue),modelValue:l(W),"onUpdate:modelValue":t[18]||(t[18]=s=>T(W)?W.value=s:null),items:l(H),"item-title":"name_en","item-value":"id",style:{width:"100%"},variant:"outlined",label:e.$t("Products"),class:"flex-grow-1 my-1 w-50 mx-2"},null,8,["disabled","loading","modelValue","items","label"]),r(o,{label:e.$t("Quantity"),type:"number",disabled:!l(a).branch_id||!String(l(a).delivery_date).length&&l(a).is_pickup,class:"flex-grow-1 mx-2 my-1 w-25",modelValue:l(g),"onUpdate:modelValue":t[19]||(t[19]=s=>T(g)?g.value=s:null)},null,8,["label","disabled","modelValue"]),r(j,{"prepend-icon":"tabler-plus",class:"flex-grow-1 mx-2 my-1",disabled:l(g)<=0||!l(W),onClick:Ye},{default:d(()=>[U("Add")]),_:1},8,["disabled"])]),_:1}),r(p,{align:"center"},{default:d(()=>[l(B).length?(m(),y(v,{key:0,items:l(B),onDelete:Qe,onAddImage:aa,onAddNote:la,onAddExtraFlavors:ta},null,8,["items"])):$("",!0)]),_:1})]),_:1})]),_:1}),r(_,{class:"mt-7 px-5 rounded pb-10",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:d(()=>[b("p",Ra,f(e.$t("User Details")),1),r(_,null,{default:d(()=>[r(p,{justify:"space-between",align:"end"},{default:d(()=>[r(o,{"prepend-inner-icon":"tabler-user",label:e.$t("Name"),rules:[l(x)],placeholder:e.$t("Customer Name"),class:"flex-grow-1 mx-2 my-1",modelValue:l(a).name,"onUpdate:modelValue":t[20]||(t[20]=s=>l(a).name=s)},null,8,["label","rules","placeholder","modelValue"]),r(o,{"prepend-inner-icon":"tabler-at",label:e.$t("Email"),placeholder:e.$t("Customer Email"),rules:[l(ya),l(x)],class:"flex-grow-1 mx-2 my-1",modelValue:l(a).email,"onUpdate:modelValue":t[21]||(t[21]=s=>l(a).email=s)},null,8,["label","placeholder","rules","modelValue"])]),_:1}),r(p,{justify:"space-between",align:"end",class:"mt-6"},{default:d(()=>[r(o,{"prepend-inner-icon":"tabler-phone",placeholder:e.$t("Customer Phone Number"),label:e.$t("Phone Number"),rules:[l(Te),l(x),l(Ae)],class:"flex-grow-1 mx-2 my-1",modelValue:l(a).address_phone,"onUpdate:modelValue":t[22]||(t[22]=s=>l(a).address_phone=s)},null,8,["placeholder","label","rules","modelValue"])]),_:1})]),_:1})]),_:1}),r(_,{class:"mt-7 px-5 rounded pb-10",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:d(()=>[b("p",Ya,f(e.$t("User Address")),1),r(_,null,{default:d(()=>[r(p,{justify:"space-between",align:"end"},{default:d(()=>[r(o,{"prepend-inner-icon":"tabler-container",label:e.$t("Building Number"),rules:[l(x)],placeholder:e.$t("Building Number"),class:"flex-grow-1 mx-2 my-1",modelValue:l(a).address_building_no,"onUpdate:modelValue":t[23]||(t[23]=s=>l(a).address_building_no=s)},null,8,["label","rules","placeholder","modelValue"]),r(o,{"prepend-inner-icon":"tabler-stairs",placeholder:e.$t("Floor"),label:e.$t("Floor"),rules:[l(x)],class:"flex-grow-1 mx-2 my-1",modelValue:l(a).address_floor,"onUpdate:modelValue":t[24]||(t[24]=s=>l(a).address_floor=s)},null,8,["placeholder","label","rules","modelValue"])]),_:1}),r(p,{justify:"space-between",align:"end",class:"mt-6"},{default:d(()=>[r(o,{"prepend-inner-icon":"tabler-window",label:e.$t("Apartment"),rules:[l(x)],placeholder:e.$t("Apartment"),class:"flex-grow-1 mx-2 my-1",modelValue:l(a).address_apartment,"onUpdate:modelValue":t[25]||(t[25]=s=>l(a).address_apartment=s)},null,8,["label","rules","placeholder","modelValue"]),r(o,{"prepend-inner-icon":"tabler-road",placeholder:e.$t("Street Name"),rules:[l(x)],label:e.$t("Street Name"),class:"flex-grow-1 mx-2 my-1",modelValue:l(a).address_street_name,"onUpdate:modelValue":t[26]||(t[26]=s=>l(a).address_street_name=s)},null,8,["placeholder","rules","label","modelValue"])]),_:1}),r(p,{justify:"space-between",align:"end",class:"mt-6"},{default:d(()=>[r(o,{"prepend-inner-icon":"tabler-number",rules:[l(x)],label:e.$t("Block Number"),placeholder:e.$t("Block Number"),class:"flex-grow-1 mx-2 my-1",modelValue:l(a).block_no,"onUpdate:modelValue":t[27]||(t[27]=s=>l(a).block_no=s)},null,8,["rules","label","placeholder","modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["cols"]),r(_,{class:"pt-0",cols:e.$vuetify.display.smAndDown?12:4},{default:d(()=>[r(_,{class:"mt-16 px-5 rounded pb-10 w-100 mx-auto",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:d(()=>[b("p",Ga,f(e.$t("Order Summary")),1),r(_,null,{default:d(()=>[r(p,{justify:"space-between",align:"center",class:"pt-0"},{default:d(()=>[r(h,{"v-model":l(a).note,label:e.$t("Note"),class:"w-100 mt-0"},null,8,["v-model","label"])]),_:1}),r(p,{class:"mt-4"},{default:d(()=>[r(_,{class:"w-100 px-0"},{default:d(()=>[l(O)?(m(),y(o,{key:0,class:"w-100 flex-grow-1","prepend-inner-icon":"tabler-user-star",placeholder:e.$t("Enter Employee code"),modelValue:l(E),"onUpdate:modelValue":t[28]||(t[28]=s=>T(E)?E.value=s:null),style:{width:"100%"},variant:"outlined"},null,8,["placeholder","modelValue"])):$("",!0),l(O)?$("",!0):(m(),y(o,{key:1,class:"w-100 flex-grow-1","prepend-inner-icon":"tabler-gift",placeholder:e.$t("Have a Voucher?"),modelValue:l(A),"onUpdate:modelValue":t[29]||(t[29]=s=>T(A)?A.value=s:null),style:{width:"100%"},variant:"outlined"},null,8,["placeholder","modelValue"])),r(Ua,{onClick:ea,label:e.$t("Is An Employee"),modelValue:l(O),"onUpdate:modelValue":t[30]||(t[30]=s=>T(O)?O.value=s:null),class:"mt-2"},null,8,["label","modelValue"]),l(O)?$("",!0):(m(),y(j,{key:2,class:"mt-3",disabled:!l(A),block:"",loading:l(te),onClick:Le},{default:d(()=>[U(f(e.$t("Apply Voucher")),1)]),_:1},8,["disabled","loading"])),l(O)?(m(),y(j,{key:3,class:"mt-3",disabled:!l(E),block:"",loading:l(pe),onClick:Ze},{default:d(()=>[U(f(e.$t("Check Employee")),1)]),_:1},8,["disabled","loading"])):$("",!0)]),_:1})]),_:1}),r(p,{class:"mt-5"},{default:d(()=>[r(oe,{class:"w-100 px-2 py-2",variant:"tonal",color:e.$vuetify.theme.current.dark?"#B3BFFFFF":"primary"},{default:d(()=>[r(J,null,{default:d(()=>[r(p,{align:"center",justify:"space-between"},{default:d(()=>[b("p",Ja,f(e.$t("Deliver Cost")),1),b("p",Qa,f(l(a).delivery_cost??.5)+" KWD",1)]),_:1}),r(p,null,{default:d(()=>[r(ge,{color:e.$vuetify.theme.current.dark?"#B3BFFFFF":"primary"},null,8,["color"])]),_:1}),r(p,{align:"center",justify:"space-between",class:"mt-5"},{default:d(()=>[Xa,b("p",Za,f(Number(l(S)+(l(a).delivery_cost??.5)).toFixed(1))+" KWD",1)]),_:1}),l(a).v_code?(m(),y(p,{key:0},{default:d(()=>[r(ge,{color:e.$vuetify.theme.current.dark?"#B3BFFFFF":"primary"},null,8,["color"])]),_:1})):$("",!0),l(a).v_code||l(a).employee_code?(m(),y(p,{key:1,align:"center",justify:"space-between",class:"mt-5"},{default:d(()=>[b("p",el,f(e.$t("Discount rate")),1),b("p",al,f(l(z)),1)]),_:1})):$("",!0),l(a).v_code||l(a).employee_code?(m(),y(p,{key:2},{default:d(()=>[r(ge,{color:e.$vuetify.theme.current.dark?"#B3BFFFFF":"primary"},null,8,["color"])]),_:1})):$("",!0),l(a).v_code||l(a).employee_code?(m(),y(p,{key:3,align:"center",justify:"space-between",class:"mt-5"},{default:d(()=>[b("p",ll,f(e.$t("New Total")),1),b("p",tl,f(Number(l(Re)).toFixed(2))+" KWD",1)]),_:1})):$("",!0)]),_:1})]),_:1},8,["color"])]),_:1}),r(p,{class:"mt-8"},{default:d(()=>[r(j,{type:"submit",loading:l(ae),block:""},{default:d(()=>[U(f(e.$t("Create Order")),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["cols"])]),_:1},8,["onSubmit"])]),_:1})])}}};typeof Ee=="function"&&Ee(Me);const Nl=va(Me,[["__scopeId","data-v-7be99d49"]]);export{Nl as default};
