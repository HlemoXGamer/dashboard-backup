import{_ as L}from"./DialogCloseBtn-544004f3.js";import{r as O,g as R}from"./areas-51e3e9f0.js";import{D as j,O as w,l as m,aV as J,r as U,o as B,c as W,q as e,w as t,s as o,I as b,aX as A,H as v,y as p,az as h,G as T,n as I,z as k,F as q,R as E,b as G,a2 as H,a1 as D,t as M,aY as X,aZ as x,a_ as Y}from"./index-358c466b.js";import{V as Z}from"./VDialog-09c6c5a5.js";import{V as K}from"./VDataTable-bbf485fa.js";import"./VOverlay-2dca64b1.js";import"./lazy-0a540379.js";import"./dialog-transition-d456e6da.js";import"./VCheckboxBtn-9bbd9eb4.js";import"./VSelectionControl-32ddc2e6.js";import"./VSelect-5e4f7ae5.js";import"./VList-8b7c6abf.js";import"./ssrBoot-404c9b1f.js";import"./VDivider-a7998058.js";import"./VMenu-317b780d.js";import"./VChip-01fa3c4b.js";import"./filter-4c18135b.js";import"./VTable-70707c6b.js";const P={class:"d-flex gap-1"},Q={__name:"AreasTable",props:{areas:{type:Array,default:[]},search:{type:String,default:""},loading:{type:Boolean,default:!1}},setup(y){const d=y,i=j(),c=i.t,_=w(()=>{if(i.locale.value==="en")return"name_en";if(i.locale.value==="ar")return"name_ar"}),a=m([]),l=m(!1),$=J(),s=m(!1),f=w(()=>[{title:c("Name"),key:_},{title:c("Actions"),sortable:!1,key:"actions"}]),S=(n,u,g,V)=>{const r=u;return g.raw.name.toLowerCase().includes(r.toLowerCase())?g.raw.name.toLowerCase().includes(r.toLowerCase()):!1};let C={};const N=n=>{C=n,a.value=JSON.stringify(n),a.value=JSON.parse(a.value),s.value=!0},z=async()=>{l.value=!0;try{await O(a.value),console.log(C),d.areas.splice(d.areas.indexOf(C),1),$.success("Area deleted successfully"),l.value=!1,s.value=!1}catch{console.log("Something Went Wrong"),s.value=!1}};return(n,u)=>{const g=L,V=U("IconBtn");return B(),W(q,null,[e(Z,{modelValue:o(s),"onUpdate:modelValue":u[2]||(u[2]=r=>T(s)?s.value=r:null),persistent:"",class:"v-dialog-sm"},{default:t(()=>[e(g,{onClick:u[0]||(u[0]=r=>s.value=!o(s))}),e(b,{title:"Delete Area"},{default:t(()=>[e(A,null,{default:t(()=>[v(p(n.$t("Are you sure that you want to delete this Area?")),1)]),_:1}),e(A,{class:"d-flex justify-end gap-3 flex-wrap"},{default:t(()=>[e(h,{color:"secondary",variant:"tonal",onClick:u[1]||(u[1]=r=>s.value=!1),disabled:o(l)},{default:t(()=>[v(p(n.$t("Cancel")),1)]),_:1},8,["disabled"]),e(h,{onClick:z,loading:o(l)},{default:t(()=>[v(p(n.$t("Delete")),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(b,{elevation:"0",rounded:"0",class:"px-0 mb-0 pb-5 mt-10 pt-2",loading:y.loading},{default:t(()=>[e(o(K),{items:d.areas,headers:o(f),search:d.search,"custom-filter":S,"items-per-page":15},{"item.actions":t(({item:r})=>[I("div",P,[e(V,{onClick:F=>n.$router.push(`areas/edit/${r.raw.id}`)},{default:t(()=>[e(k,{icon:"mdi-pencil-outline"})]),_:2},1032,["onClick"]),e(V,null,{default:t(()=>[e(k,{icon:"mdi-delete-outline",onClick:F=>N(r.value)},null,8,["onClick"])]),_:2},1024)])]),_:1},8,["items","headers","search"])]),_:1},8,["loading"])],64)}}},ee={class:"text-h4 pt-3 pb-2 px-3"},ae={__name:"index",setup(y){const d=m([]),i=m(""),c=m(!1),_=()=>{c.value=!0,R().then(({data:a,meta:l})=>{d.value=a.data}).finally(()=>{c.value=!1})};return E(()=>{_()}),(a,l)=>{const $=Y,s=Q;return B(),G(D,{class:"mt-4 px-4"},{default:t(()=>[e(H,{style:{"background-color":"rgb(var(--v-theme-surface))"},class:"rounded"},{default:t(()=>[I("p",ee,p(a.$t("Areas")),1),e(D,{class:"ps-lg-1 pe-lg-5 ps-md-1 pe-md-5 ps-sm-1 pe-sm-5 mx-0 w-100",align:"center",justify:"space-between"},{default:t(()=>[e($,{modelValue:o(i),"onUpdate:modelValue":l[0]||(l[0]=f=>T(i)?i.value=f:null),placeholder:a.$t("Search for an Area"),class:M(["mx-lg-2",a.$vuetify.display.xs?"w-100":""]),style:X(a.$vuetify.display.xs?"width: 100%;":"width: 300px;")},null,8,["modelValue","placeholder","class","style"]),e(h,{block:a.$vuetify.display.xs,class:"mt-lg-0 mt-md-0 mt-sm-0 mt-3",onClick:l[1]||(l[1]=f=>a.$router.push("areas/add/"))},{default:t(()=>[e(k,{start:"",icon:"tabler-plus"}),v(p(a.$t("Add Area")),1)]),_:1},8,["block"])]),_:1}),e(s,{loading:o(c),areas:o(d),search:o(i)},null,8,["loading","areas","search"])]),_:1})]),_:1})}}};typeof x=="function"&&x(ae);export{ae as default};
