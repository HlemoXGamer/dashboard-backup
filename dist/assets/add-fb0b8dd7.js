import{_ as S}from"./AppCombobox-d20837b2.js";import{C as E,l as m,aV as A,aP as D,R as T,o as q,b as z,w as r,q as t,W as b,n as B,y as _,s as l,a$ as F,b0 as I,U as i,b1 as d,b2 as M,bd as P,be as G,G as W,bf as H,t as v,aY as J,az as g,z as $,H as k,aZ as h,aW as O,a_ as Y}from"./index-ae436fe7.js";import{g as Z}from"./discounts-61364e18.js";import{a as K}from"./employees-0a522cc2.js";import"./VCombobox-00c6c73c.js";import"./VSelect-37a65f33.js";import"./VList-5353bc34.js";import"./ssrBoot-23d40ca5.js";import"./VDivider-b42cad0f.js";import"./dialog-transition-568cfe1a.js";import"./VMenu-2753b03a.js";import"./VOverlay-b7c1cab0.js";import"./lazy-98a42def.js";import"./VCheckboxBtn-b63b227c.js";import"./VSelectionControl-36f39ce1.js";import"./VChip-4bd7dba5.js";import"./filter-c9d71b19.js";const L={class:"text-h4 pt-3 pb-2"},j={__name:"add",setup(Q){var w;const u=m(null),y=A(),p=m(!1);D().params.id;const s=m({employee_name:null,employee_phone:"",employee_email:"",employee_position:"",employee_code:"",discount_rate:"",discount_type:""}),V=m(),f=m(),U=(w=JSON.parse(localStorage.getItem("userData")))==null?void 0:w.type,C=e=>{const a="0123456789";let n="";for(let c=0;c<e;c++){const o=Math.floor(Math.random()*a.length);n+=a.charAt(o)}return n},N=()=>{const e=C(4);s.value.employee_code=`${e}`},x=async()=>{try{const{data:e}=await Z();f.value=e.data,u.value=e.data[0].name}catch(e){y.error(e)}},R=async()=>{var e;(e=V.value)==null||e.validate().then(async({valid:a})=>{if(a){p.value=!0;try{s.value.discount_type=f.value.filter(n=>n.name==u.value)[0].id,await K(s.value),p.value=!1,y.success("Employee added successfully"),O.back()}catch(n){y.error(n.response.data.message),p.value=!1}}})};return T(()=>{U=="admin"&&x()}),(e,a)=>{const n=Y,c=S;return q(),z(i,{class:"mt-4 px-4",justify:"space-around"},{default:r(()=>[t(b,{class:"pt-0"},{default:r(()=>[t(b,{class:"px-5 rounded",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:r(()=>[B("p",L,_(e.$t("Add Employee")),1),t(l(F),{ref_key:"refVForm",ref:V,onSubmit:I(R,["prevent"]),class:"w-100"},{default:r(()=>[t(b,null,{default:r(()=>[t(i,{justify:"space-between",align:"start"},{default:r(()=>[t(n,{"prepend-inner-icon":"tabler-writing",rules:[l(d)],style:{width:"100%"},class:"pe-3 w-50",modelValue:l(s).employee_name,"onUpdate:modelValue":a[0]||(a[0]=o=>l(s).employee_name=o),label:e.$t("Name")},null,8,["rules","modelValue","label"]),t(n,{"prepend-inner-icon":"tabler-phone",rules:[l(d),l(M),l(P)],style:{width:"100%"},class:"pe-3 w-50",modelValue:l(s).employee_phone,"onUpdate:modelValue":a[1]||(a[1]=o=>l(s).employee_phone=o),label:e.$t("Phone Number")},null,8,["rules","modelValue","label"])]),_:1}),t(i,{class:"mt-10",justify:"space-between",align:"start"},{default:r(()=>[t(n,{"prepend-inner-icon":"tabler-user-question",rules:[l(d)],style:{width:"100%"},class:"pe-3 w-50",modelValue:l(s).employee_position,"onUpdate:modelValue":a[2]||(a[2]=o=>l(s).employee_position=o),label:e.$t("Employee Position")},null,8,["rules","modelValue","label"]),t(n,{"prepend-inner-icon":"tabler-at",rules:[l(d),l(G)],style:{width:"100%"},class:"pe-3 w-50",modelValue:l(s).employee_email,"onUpdate:modelValue":a[3]||(a[3]=o=>l(s).employee_email=o),label:e.$t("Email")},null,8,["rules","modelValue","label"])]),_:1}),t(i,{class:"mt-10",justify:"space-between",align:"start"},{default:r(()=>[t(c,{disabled:"","prepend-inner-icon":"tabler-discount-2",rules:[l(d)],style:{width:"100%"},class:"pe-3 w-50",modelValue:l(u),"onUpdate:modelValue":a[4]||(a[4]=o=>W(u)?u.value=o:null),label:e.$t("Select Type"),items:l(f),"item-value":"id","item-title":"name"},null,8,["rules","modelValue","label","items"]),t(n,{"prepend-inner-icon":"tabler-coins",rules:[l(d),l(H)(l(s).discount_rate,1,50)],style:{width:"100%"},class:"ps-0 w-50",modelValue:l(s).discount_rate,"onUpdate:modelValue":a[5]||(a[5]=o=>l(s).discount_rate=o),label:e.$t("Discount Rate")},null,8,["rules","modelValue","label"])]),_:1}),t(i,{class:"mt-10",justify:"start",align:"end"},{default:r(()=>[t(n,{rules:[l(d)],class:v(e.$vuetify.display.xs?"w-100 mt-2":"flex-grow-0"),style:J(e.$vuetify.display.xs?"width: 100%":"width: 140px"),modelValue:l(s).employee_code,"onUpdate:modelValue":a[6]||(a[6]=o=>l(s).employee_code=o),label:e.$t("Employee Code")},null,8,["rules","class","style","modelValue","label"]),t(i,{align:"center",class:"mx-0 my-0",justify:"center","justify-lg":"start","justify-md":"start","justify-sm":"center"},{default:r(()=>[t(g,{block:e.$vuetify.display.xs,class:v([e.$vuetify.display.xs?"mt-2":"mx-2 mt-0",e.$vuetify.display.sm?"mt-2":""]),onClick:a[7]||(a[7]=o=>N())},{default:r(()=>[t($,{start:"",icon:"tabler-reload"}),k(_(e.$t("Generate")),1)]),_:1},8,["block","class"])]),_:1})]),_:1})]),_:1}),t(i,{class:"pb-6 mt-8 px-3",align:"center",justify:"center"},{default:r(()=>[t(g,{block:e.$vuetify.display.xs,color:"primary",class:"px-12",loading:l(p),type:"submit"},{default:r(()=>[t($,{start:"",icon:"tabler-plus"}),k(_(e.$t("Add")),1)]),_:1},8,["block","loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})}}};typeof h=="function"&&h(j);const be=E(j,[["__scopeId","data-v-e82127e3"]]);export{be as default};
