import{_ as S}from"./AppCombobox-b5c23508.js";import{C as E,l as m,aV as A,aP as D,R as T,o as q,b as z,w as r,q as t,a2 as b,n as B,y as _,s as l,a$ as F,b0 as I,a1 as i,b1 as d,b2 as M,bc as P,bd as G,G as H,be as J,t as v,aY as O,az as g,z as $,H as k,aZ as h,aW as W,a_ as Y}from"./index-581c2083.js";import{g as Z}from"./discounts-238376af.js";import{a as K}from"./employees-12337b4c.js";import"./VCombobox-6fdf6a72.js";import"./VSelect-91e75b33.js";import"./VList-800b0139.js";import"./ssrBoot-f2e19377.js";import"./VDivider-007f86e5.js";import"./dialog-transition-e2ab3ff7.js";import"./VMenu-568d971d.js";import"./VOverlay-b3d70df2.js";import"./lazy-e0bc52de.js";import"./VCheckboxBtn-36803dae.js";import"./VSelectionControl-6e42f01a.js";import"./VChip-2cd4c1fb.js";import"./filter-887944dd.js";const L={class:"text-h4 pt-3 pb-2"},j={__name:"add",setup(Q){var w;const u=m(null),y=A(),p=m(!1);D().params.id;const s=m({employee_name:null,employee_phone:"",employee_email:"",employee_position:"",employee_code:"",discount_rate:"",discount_type:""}),V=m(),f=m(),C=(w=JSON.parse(localStorage.getItem("userData")))==null?void 0:w.type,N=e=>{const a="0123456789";let n="";for(let c=0;c<e;c++){const o=Math.floor(Math.random()*a.length);n+=a.charAt(o)}return n},U=()=>{const e=N(4);s.value.employee_code=`${e}`},x=async()=>{try{const{data:e}=await Z();f.value=e.data,u.value=e.data[0].name}catch(e){y.error(e)}},R=async()=>{var e;(e=V.value)==null||e.validate().then(async({valid:a})=>{if(a){p.value=!0;try{s.value.discount_type=f.value.filter(n=>n.name==u.value)[0].id,await K(s.value),p.value=!1,y.success("Employee added successfully"),W.back()}catch(n){y.error(n.response.data.message),p.value=!1}}})};return T(()=>{C=="admin"&&x()}),(e,a)=>{const n=Y,c=S;return q(),z(i,{class:"mt-4 px-4",justify:"space-around"},{default:r(()=>[t(b,{class:"pt-0"},{default:r(()=>[t(b,{class:"px-5 rounded",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:r(()=>[B("p",L,_(e.$t("Add Employee")),1),t(l(F),{ref_key:"refVForm",ref:V,onSubmit:I(R,["prevent"]),class:"w-100"},{default:r(()=>[t(b,null,{default:r(()=>[t(i,{justify:"space-between",align:"start"},{default:r(()=>[t(n,{"prepend-inner-icon":"tabler-writing",rules:[l(d)],style:{width:"100%"},class:"pe-3 w-50",modelValue:l(s).employee_name,"onUpdate:modelValue":a[0]||(a[0]=o=>l(s).employee_name=o),label:e.$t("Name")},null,8,["rules","modelValue","label"]),t(n,{"prepend-inner-icon":"tabler-phone",rules:[l(d),l(M),l(P)],style:{width:"100%"},class:"pe-3 w-50",modelValue:l(s).employee_phone,"onUpdate:modelValue":a[1]||(a[1]=o=>l(s).employee_phone=o),label:e.$t("Phone Number")},null,8,["rules","modelValue","label"])]),_:1}),t(i,{class:"mt-10",justify:"space-between",align:"start"},{default:r(()=>[t(n,{"prepend-inner-icon":"tabler-user-question",rules:[l(d)],style:{width:"100%"},class:"pe-3 w-50",modelValue:l(s).employee_position,"onUpdate:modelValue":a[2]||(a[2]=o=>l(s).employee_position=o),label:e.$t("Employee Position")},null,8,["rules","modelValue","label"]),t(n,{"prepend-inner-icon":"tabler-at",rules:[l(d),l(G)],style:{width:"100%"},class:"pe-3 w-50",modelValue:l(s).employee_email,"onUpdate:modelValue":a[3]||(a[3]=o=>l(s).employee_email=o),label:e.$t("Email")},null,8,["rules","modelValue","label"])]),_:1}),t(i,{class:"mt-10",justify:"space-between",align:"start"},{default:r(()=>[t(c,{disabled:"","prepend-inner-icon":"tabler-discount-2",rules:[l(d)],style:{width:"100%"},class:"pe-3 w-50",modelValue:l(u),"onUpdate:modelValue":a[4]||(a[4]=o=>H(u)?u.value=o:null),label:e.$t("Select Type"),items:l(f),"item-value":"id","item-title":"name"},null,8,["rules","modelValue","label","items"]),t(n,{"prepend-inner-icon":"tabler-coins",rules:[l(d),l(J)(l(s).discount_rate,1,50)],style:{width:"100%"},class:"ps-0 w-50",modelValue:l(s).discount_rate,"onUpdate:modelValue":a[5]||(a[5]=o=>l(s).discount_rate=o),label:e.$t("Discount Rate")},null,8,["rules","modelValue","label"])]),_:1}),t(i,{class:"mt-10",justify:"start",align:"end"},{default:r(()=>[t(n,{rules:[l(d)],class:v(e.$vuetify.display.xs?"w-100 mt-2":"flex-grow-0"),style:O(e.$vuetify.display.xs?"width: 100%":"width: 140px"),modelValue:l(s).employee_code,"onUpdate:modelValue":a[6]||(a[6]=o=>l(s).employee_code=o),label:e.$t("Employee Code")},null,8,["rules","class","style","modelValue","label"]),t(i,{align:"center",class:"mx-0 my-0",justify:"center","justify-lg":"start","justify-md":"start","justify-sm":"center"},{default:r(()=>[t(g,{block:e.$vuetify.display.xs,class:v([e.$vuetify.display.xs?"mt-2":"mx-2 mt-0",e.$vuetify.display.sm?"mt-2":""]),onClick:a[7]||(a[7]=o=>U())},{default:r(()=>[t($,{start:"",icon:"tabler-reload"}),k(_(e.$t("Generate")),1)]),_:1},8,["block","class"])]),_:1})]),_:1})]),_:1}),t(i,{class:"pb-6 mt-8 px-3",align:"center",justify:"center"},{default:r(()=>[t(g,{block:e.$vuetify.display.xs,color:"primary",class:"px-12",loading:l(p),type:"submit"},{default:r(()=>[t($,{start:"",icon:"tabler-plus"}),k(_(e.$t("Add")),1)]),_:1},8,["block","loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})}}};typeof h=="function"&&h(j);const be=E(j,[["__scopeId","data-v-70ef7fb3"]]);export{be as default};
