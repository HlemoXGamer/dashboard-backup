import{_ as E}from"./AppDateTimePicker-9f3b3ecb.js";import{C as P,aP as A,l as u,aV as W,R as q,o as z,b as M,w as i,q as o,a2 as U,s as a,a$ as G,b0 as J,n as O,y as B,a1 as f,b1 as m,b2 as Z,bc as K,bd as L,G as C,az as Q,z as X,H as Y,aZ as F,a_ as ee}from"./index-358c466b.js";import{g as ae}from"./days-bb4a166a.js";import{a as le}from"./branches-dad0420d.js";import{s as te,u as se}from"./deliveries-099b7114.js";import{g as oe}from"./branches-91b35a42.js";import{s as ne,u as ie}from"./deliveries-096d477b.js";import{V as N}from"./VCombobox-4f8968e1.js";import{V as re}from"./VSwitch-cb13388f.js";import"./VSelect-5e4f7ae5.js";import"./VList-8b7c6abf.js";import"./ssrBoot-404c9b1f.js";import"./VDivider-a7998058.js";import"./dialog-transition-d456e6da.js";import"./VMenu-317b780d.js";import"./VOverlay-2dca64b1.js";import"./lazy-0a540379.js";import"./VCheckboxBtn-9bbd9eb4.js";import"./VSelectionControl-32ddc2e6.js";import"./VChip-01fa3c4b.js";import"./filter-4c18135b.js";const de={class:"text-h4 pt-3 pb-2"},T={__name:"[id]",setup(ue){var j;const d=(j=JSON.parse(localStorage.getItem("userData")))==null?void 0:j.type,v=A().params.id,p=u([]),D=u(),S=W(),w=u(!1),V=u([]),b=u([]),c=u(""),s=u({start:"",end:"",name:"",phone:"",email:"",password:"",code:"",working_hour:null,working_days:[],is_active:0,branch_id:null}),x=async()=>{d=="admin"?await te(v).then(t=>{let{start:l,end:n,name:r,phone:e,email:_,code:y,working_hour:g,working_days:h,branch_id:k,is_active:$}=t.data.data;s.value={start:l,end:n,name:r,phone:e,email:_,code:y,working_hour:g,working_days:h,branch_id:k,is_active:$}}):d=="logistic"&&await ne(v).then(t=>{let{start:l,end:n,name:r,phone:e,email:_,code:y,working_hour:g,working_days:h,branch_id:k,is_active:$}=t.data.data;s.value={start:l,end:n,name:r,phone:e,email:_,code:y,working_hour:g,working_days:h,branch_id:k,is_active:$}})},H=async()=>{var t;(t=D.value)==null||t.validate().then(async({valid:l})=>{if(l){w.value=!0;let n=[];V.value.forEach(e=>{b.value.forEach(_=>{e.name_en==_&&n.push(e.id)})}),s.value.working_days=n;let r=p.value.filter(e=>e.name_en==c.value)[0].id;s.value.branch_id=r;try{const{data:e}=d=="admin"?await se(v,s.value):await ie(v,s.value);S.success("Delivery man updated successfully"),w.value=!1}catch(e){S.error(e.response.data.message),w.value=!1}}})},I=async()=>{d=="admin"?await le().then(({data:t,meta:l})=>{p.value=t.data,c.value=p.value.filter(n=>n.id==s.value.branch_id)[0].name_en}):d=="logistic"&&await oe().then(({data:t,meta:l})=>{p.value=t.data,c.value=p.value.filter(n=>n.id==s.value.branch_id)[0].name_en})},R=async()=>{await ae().then(({data:t,meta:l})=>{V.value=t.data,b.value=t.data.map(n=>n.name_en)})};return q(()=>{(d=="admin"||d=="logistic")&&(x(),R(),I())}),(t,l)=>{const n=ee,r=E;return z(),M(f,{class:"mt-4 px-4",justify:"space-around"},{default:i(()=>[o(U,{class:"pt-0"},{default:i(()=>[o(a(G),{ref_key:"refVForm",ref:D,onSubmit:J(H,["prevent"])},{default:i(()=>[o(U,{class:"px-5 rounded",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:i(()=>[O("p",de,B(t.$t("Update Delivery")),1),o(U,null,{default:i(()=>[o(f,{justify:"space-between",align:"start"},{default:i(()=>[o(n,{rules:[a(m)],style:{width:"100%"},class:"pe-3 w-50",modelValue:a(s).name,"onUpdate:modelValue":l[0]||(l[0]=e=>a(s).name=e),label:t.$t("Name")},null,8,["rules","modelValue","label"]),o(n,{rules:[a(m),a(Z),a(K)],style:{width:"100%"},class:"ps-3 w-50",modelValue:a(s).phone,"onUpdate:modelValue":l[1]||(l[1]=e=>a(s).phone=e),label:t.$t("Phone Number")},null,8,["rules","modelValue","label"])]),_:1}),o(f,{class:"mt-10",justify:"space-between",align:"start"},{default:i(()=>[o(n,{rules:[a(m),a(L)],style:{width:"100%"},class:"pe-3 w-50",modelValue:a(s).email,"onUpdate:modelValue":l[2]||(l[2]=e=>a(s).email=e),label:t.$t("Email")},null,8,["rules","modelValue","label"]),o(n,{style:{width:"100%"},class:"ps-3 w-50",modelValue:a(s).password,"onUpdate:modelValue":l[3]||(l[3]=e=>a(s).password=e),label:t.$t("Password")},null,8,["modelValue","label"])]),_:1}),o(f,{class:"mt-10",justify:"space-between",align:"end"},{default:i(()=>[o(N,{modelValue:a(b),"onUpdate:modelValue":l[4]||(l[4]=e=>C(b)?b.value=e:null),multiple:"",rules:[a(m)],style:{width:"100%"},class:"pe-3 w-50",items:a(V).map(e=>e.name_en),variant:"outlined",label:t.$t("Working Days")},null,8,["modelValue","rules","items","label"]),o(r,{rules:[a(m)],modelValue:a(s).start,"onUpdate:modelValue":l[5]||(l[5]=e=>a(s).start=e),label:t.$t("Start Working Hours"),class:"ps-3 flex-grow-0",config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i"}},null,8,["rules","modelValue","label"])]),_:1}),o(f,{class:"mt-10",justify:"space-between",align:"end"},{default:i(()=>[o(r,{rules:[a(m)],modelValue:a(s).end,"onUpdate:modelValue":l[6]||(l[6]=e=>a(s).end=e),label:t.$t("End Working Hours"),class:"pe-3 flex-grow-0",config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i"}},null,8,["rules","modelValue","label"]),o(N,{modelValue:a(c),"onUpdate:modelValue":l[7]||(l[7]=e=>C(c)?c.value=e:null),rules:[a(m)],style:{width:"100%"},class:"w-50 ps-3 flex-grow-0",items:a(p).map(e=>e.name_en),variant:"outlined",label:t.$t("Branch")},null,8,["modelValue","rules","items","label"])]),_:1}),o(f,{class:"pb-4 mt-8 px-3 mt-10",align:"center",justify:"center"},{default:i(()=>[o(Q,{block:t.$vuetify.display.xs,color:"primary",class:"px-12",loading:a(w),type:"submit"},{default:i(()=>[o(X,{start:"",icon:"tabler-check"}),Y(B(t.$t("Update")),1)]),_:1},8,["block","loading"]),o(re,{class:"ml-7",modelValue:a(s).is_active,"onUpdate:modelValue":l[8]||(l[8]=e=>a(s).is_active=e),"false-value":0,"true-value":1,inset:!1,label:t.$t("Active")},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})}}};typeof F=="function"&&F(T);const Ne=P(T,[["__scopeId","data-v-d02e6d49"]]);export{Ne as default};
