import{_ as ka}from"./OrderProducts-2cd013e4.js";import{_ as $a}from"./AppDateTimePicker-4b01bd67.js";import{_ as xa}from"./DialogCloseBtn-860f0769.js";import{ba as Ie,bb as Da,C as Ca,l as d,D as Sa,O as fe,aV as Fa,R as Ia,aB as Ba,o as i,c as le,q as r,w as o,I as _e,F as Oe,a as Me,s as a,b as v,aX as te,az as U,H as F,y as m,G as j,n as b,aY as Aa,z as qe,U as p,W as _,a$ as $e,b0 as xe,b1 as $,b2 as De,bc as Ce,A as g,t as He,bd as Ua,aZ as Re,aW as Na,a_ as ja,a8 as Ta,a9 as Pa}from"./index-da9d1f4c.js";import{g as Ea}from"./areas-a7e8b414.js";import{a as Oa,g as Ma}from"./branches-28d8dac8.js";import{c as qa}from"./employees-57db3465.js";import{c as Ha,a as Ra,b as Wa}from"./orders-78ebaaa2.js";import{c as Ka,a as za,b as La}from"./orders-d15f87a5.js";import{a as Ya}from"./products-52bf8316.js";import{g as Ga}from"./products-cfe54494.js";import{t as Ja}from"./files-2e167225.js";import{V as Se}from"./VDialog-6356f5b7.js";import{V as We}from"./VSelect-5f26a094.js";import{V as ge}from"./VCombobox-729186ff.js";import{V as Ke}from"./VChip-c8f80af1.js";import{V as Qa}from"./VSwitch-693442e2.js";import{V as Xa}from"./VCheckbox-b1d77ce0.js";import{V as Fe}from"./VDivider-5b89ba88.js";import"./VDataTable-2c10507f.js";import"./VCheckboxBtn-92986c24.js";import"./VSelectionControl-bd6214ad.js";import"./VList-0aeeda85.js";import"./ssrBoot-429fa803.js";import"./filter-40c60adf.js";import"./VTable-bede0536.js";import"./VOverlay-70385bc3.js";import"./lazy-13ae1582.js";import"./dialog-transition-1a2afc0f.js";import"./VMenu-a150ef44.js";function Za(){return Ie.get("/areas")}let{get:el,show:tt,update:st,create:rt,remove:ot}=Da("/restaurant-apis/branches");function al(){return Ie.get("/restaurant-apis/branch/service-cost")}function ll(Y){return Ie.post("/restaurant-apis/employee/check",Y)}const tl=Y=>(Ta("data-v-61e887d0"),Y=Y(),Pa(),Y),sl=["disabled"],rl={style:{width:"120px",height:"120px",border:"2px solid lightgrey"},class:"product_image px-0 py-0 rounded mx-1 mt-4 position-relative d-flex align-center justify-center"},ol={class:"w-100 h-100",style:{overflow:"hidden"}},nl=["src"],ul={class:"text-h4 pt-3 pb-2"},dl={class:"text-h4 pt-3"},il={class:"text-h4 pt-3"},cl={class:"text-h4 pt-3 mb-5"},pl={key:0,class:"w-100 flex-grow-1 d-flex"},ml={key:1,class:"w-100 flex-grow-1 d-flex"},vl={class:"text-h4 pt-3 mb-5"},fl={class:"text-h4 pt-3 mb-0"},_l={class:"text-h4 pt-3 mb-4"},gl={class:"text-h4 pt-3 mb-1"},bl={class:"text-h4 pt-3 mb-5"},yl={class:"mb-2"},hl={class:"mb-2"},Vl=tl(()=>b("p",{class:"mb-2"},"Total",-1)),wl={class:"mb-2"},kl={class:"mb-2"},$l={class:"mb-2"},xl={class:"mb-0"},Dl={class:"mb-0"},ze={__name:"create",setup(Y){var Te;const se=d(new Date().toISOString()),be=Sa(),re=be.t,Le=fe(()=>{if(be.locale.value==="en")return"name_en";if(be.locale.value==="ar")return"name_ar"}),V=(Te=JSON.parse(localStorage.getItem("userData")))==null?void 0:Te.type,I=d(""),ce=d(),Be=d(),w=Fa(),pe=d(!1),R=d([]),D=d([]),me=d([]),O=d(!1),G=d(!1),oe=d(!1),J=d(!1),Q=d(!1),X=d(!1),ne=d(!1),Z=d(!1),ue=d([]),h=d(1),ee=d(),T=d([]),B=d(0),M=d(!1),ae=d(0),ye=d(!1),he=d([]),S=d(""),q=d(""),H=d(""),Ve=d(0),N=d(""),P=d(!1),A=d(null),W=d(null),K=d(!1),de=d(null),ve=d(1),Ye=!1,l=d({is_pickup:!0,products:[],email:"",name:"",agent:"",address_city:1,delivery_date:"",delivery_time:"",delivery_cost:"",address_building_no:"",block_no:"",address_floor:"",address_phone:"",address_apartment:"",address_address_area:null,address_street_name:"",branch_id:null,v_code:"",employee_code:"",extra:"",flavor:""}),x=d([]),Ge=()=>{J.value=!0,Ea().then(({data:e,meta:t})=>{me.value=e.data,J.value=!1})},Je=()=>{J.value=!0,Za().then(({data:e})=>{me.value=e.data,J.value=!1})},Qe=()=>{G.value=!0,el().then(({data:e})=>{R.value=e.data,G.value=!0,R.value=e.data.filter(t=>t.is_active===1),D.value=e.data.filter(t=>t.id===2),A.value=D.value[0].start,de.value=A.value,W.value=D.value[0].end,ae.value+=1,G.value=!1})},Ae=e=>{oe.value=!0,Ya(e).then(({data:t,meta:n})=>{ue.value=t.data,oe.value=!1})},Ue=e=>{oe.value=!0,Ga(e).then(({data:t,meta:n})=>{ue.value=t.data,oe.value=!1})},Xe=()=>{var e;(e=ce.value)==null||e.validate().then(async({valid:t})=>{t&&(O.value=!0,Ha({phone:`${I.value}`}).then(n=>{w.success("Customer found!"),he.value=n.data.data.length?n.data.data[0]:[],l.value.email=n.data.email,l.value.name=n.data.name,ye.value=!0,O.value=!1,je()}).catch(n=>{w.error(n.response.data.message),O.value=!1}))})},Ze=()=>{var e;(e=ce.value)==null||e.validate().then(async({valid:t})=>{t&&(O.value=!0,Ka({phone:`${I.value}`}).then(n=>{w.success("Customer found!"),he.value=n.data.data.length?n.data.data[0]:[],l.value.email=n.data.email,l.value.name=n.data.name,ye.value=!0,O.value=!1,je()}).catch(n=>{w.error(n.response.data.message),O.value=!1}))})},ea=()=>{G.value=!0,Oa().then(({data:e})=>{R.value=e.data.filter(t=>t.is_active===1),D.value=e.data.filter(t=>t.id===2),A.value=D.value[0].start,de.value=A.value,W.value=D.value[0].end,ae.value+=1,G.value=!1})},aa=()=>{Ma().then(({data:e,meta:t})=>{l.value.delivery_cost=e.data.delivery_cost})},la=()=>{al().then(({data:e,meta:t})=>{l.value.delivery_cost=e.data.delivery_cost})},ta=()=>{M.value=!0,Ra({v_code:S.value,total:B.value}).then(e=>{const t={fixed:" KWD",percentage:"%"};l.value.v_code=S.value,S.value="",q.value=parseInt(e.data.discount_rate)+t[e.data.discount_type],H.value=e.data.discount_type,w.success(e.data.message),M.value=!1}).catch(e=>{w.error(e.response.data.message),M.value=!1})},sa=()=>{M.value=!0,za({v_code:S.value,total:B.value}).then(e=>{const t={fixed:" KWD",percentage:"%"};l.value.v_code=S.value,S.value="",q.value=parseInt(e.data.discount_rate)+t[e.data.discount_type],H.value=e.data.discount_type,w.success(e.data.message),M.value=!1}).catch(e=>{w.error(e.response.data.message),M.value=!1})},ra=fe(()=>(H.value=="fixed"?Ve.value=parseInt(B.value-parseInt(q.value)):H.value=="percentage"?Ve.value=parseInt(B.value)-parseInt(B.value)*parseInt(q.value)/100:H.value=="free_delivery",Ve.value+(l.value.delivery_cost??0))),oa=()=>{const e=ee.value;if(T.value.includes(e)){l.value.products.find(n=>n.product_id===e.id).quantity=parseInt(l.value.products.find(n=>n.product_id===e.id).quantity)+parseInt(h.value);let t=T.value.find(n=>n==e);t.quantity=parseInt(t.quantity)+parseInt(h.value),t.total=t.total+h.value*e.price,B.value+=h.value*e.price,e.has_note==1&&l.value.products.find(n=>n.product_id==e.id).notes.push("")}else{if(e.has_image==1&&e.has_note==1){l.value.products.push({product_id:e.id,quantity:parseInt(h.value),images:[],notes:[]});for(let t=0;t<h.value;t++)l.value.products.find(n=>n.product_id==e.id).notes[t]="";e.images=0,x.value.push({product_id:e.id})}else if(e.has_image==1&&e.has_note==0)l.value.products.push({product_id:e.id,quantity:parseInt(h.value),images:[]}),e.images=0,x.value.push({product_id:e.id});else if(e.has_image==0&&e.has_note==1){l.value.products.push({product_id:e.id,quantity:parseInt(h.value),notes:[]});for(let t=0;t<h.value;t++)l.value.products.find(n=>n.product_id==e.id).notes[t]=""}else l.value.products.push({product_id:e.id,quantity:parseInt(h.value)});e.quantity=h.value,B.value+=e.price*h.value,e.total=e.price*h.value,T.value.push(e)}ee.value=null,h.value=1},Ne=()=>{const e=new Date;if(l.value.delivery_time=null,l.value.is_pickup===!1&&(l.value.delivery_date=null,l.value.delivery_time=null),l.value.is_pickup===!0&&(l.value.address_address_area==null||l.value.address_address_area==""))D.value=R.value.filter(t=>t.id===2);else if(l.value.delivery_date!==we(e)&&l.value.is_pickup===!0)D.value=R.value.filter(t=>t.id===2),l.value.branch_id=2;else if(l.value.delivery_date==we(e)){const t=R.value.filter(n=>n.areas.find(u=>u.name===l.value.address_address_area)!==void 0);t.find(n=>n.id==l.value.branch_id)||(l.value.branch_id=null),D.value=t}else if(l.value.is_pickup===!1&&l.value.address_address_area!==null&&l.value.address_address_area!==""){const t=R.value.filter(n=>n.areas.find(u=>u.name===l.value.address_address_area)!==void 0);t.find(n=>n.id==l.value.branch_id)||(l.value.branch_id=null),D.value=t}},ie=()=>{D.value.find(e=>e.id===l.value.branch_id),ae.value+=1,na()},we=e=>{const t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0");return`${e.getFullYear()}-${n}-${t}`},na=()=>{var t,n,c,u;const e=new Date;if(e.toISOString(),Ne(),D.value.find(f=>f.id==l.value.branch_id),l.value.delivery_date==we(e)){const f=e.getHours(),s=e.getMinutes(),[k,C]=(t=A.value.split(":"))==null?void 0:t.map(Number),[z,L]=(n=W.value.split(":"))==null?void 0:n.map(Number);if(f>z||f===z&&s>=L)K.value=!0;else if(f<k||f===k&&s<C)A.value=de.value;else{const E=new Date(new Date().setMinutes(new Date().getMinutes()+40)),Pe=E.getHours(),Va=E.getMinutes();(c=A.value.split(":"))==null||c.map(Number);const[Ee,wa]=(u=W.value.split(":"))==null?void 0:u.map(Number);Pe>Ee||Pe===Ee&&Va>=wa?K.value=!0:A.value=new Date(new Date().setMinutes(new Date().getMinutes()+40)).toTimeString().slice(0,5)}}else{K.value=!1,A.value=de.value;let f,s=new Date,k=new Date(s);k.setHours(0,0,0,0);let C=new Date(s);C.setHours(4,55,0,0),(s.getDate()!==ke.value||s>=k&&s<=C)&&(f="menuType=pre-order",V=="admin"?Ae(f):V=="restaurant"&&Ue(f))}ae.value+=1,l.value.delivery_time=null},je=()=>{const e=he.value;l.value.address_apartment=e==null?void 0:e.apartment,l.value.block_no=e==null?void 0:e.block_no,l.value.address_building_no=e==null?void 0:e.building_num,l.value.address_floor=e==null?void 0:e.floor,l.value.address_street_name=e==null?void 0:e.street_name,l.value.address_address_area=e==null?void 0:e.area_name,l.value.address_phone=I.value,ye.value=!1},ua=e=>{B.value=B.value-e.price*e.quantity,T.value.splice(T.value.indexOf(e),1),l.value.products.splice(l.value.products.indexOf(l.value.products.find(t=>t.product_id==e.id)),1),e.has_image==1&&x.value.splice(x.value.indexOf(x.value.find(t=>t.product_id==e.id)),1)},da=async()=>{var e,t,n;if(l.value.is_pickup===!1){const c=new Date().getHours(),u=new Date().getMinutes(),[f,s]=(e=de.value.split(":"))==null?void 0:e.map(Number),[k,C]=(t=W.value.split(":"))==null?void 0:t.map(Number);if(c>k||c===k&&u>=C||c<f||c===f&&u<s)return w.error("The Branch is currently closed.")}(n=Be.value)==null||n.validate().then(async({valid:c})=>{if(c){let u=new FormData;if(u.append("branch_id",l.value.branch_id),u.append("is_pickup",l.value.is_pickup),u.append("email",l.value.email),u.append("name",l.value.name),u.append("agent",l.value.agent),u.append("address_city",l.value.address_city),l.value.delivery_date!==null&&u.append("delivery_date",l.value.delivery_date+" "+l.value.delivery_time+":00"),l.value.delivery_time!==null&&u.append("delivery_time",l.value.delivery_time),u.append("delivery_cost",l.value.delivery_cost),u.append("address_building_no",l.value.address_building_no),u.append("block_no",l.value.block_no),u.append("address_floor",l.value.address_floor),u.append("address_phone",l.value.address_phone),u.append("address_apartment",l.value.address_apartment),u.append("address_address_area",l.value.address_address_area),u.append("address_street_name",l.value.address_street_name),u.append("v_code",l.value.v_code),u.append("employee_code",l.value.employee_code),l.value.products.forEach((f,s)=>{var k,C,z;u.append(`products[${s}][product_id]`,f.product_id),u.append(`products[${s}][quantity]`,f.quantity),(k=f.images)==null||k.forEach((L,E)=>{u.append(`products[${s}][images][${E}]`,L.file)}),(C=f.notes)==null||C.forEach((L,E)=>{u.append(`products[${s}][notes][${E}]`,L)}),(z=f.extra_flavors)==null||z.forEach((L,E)=>{u.append(`products[${E}][extra_flavors][${E}]`,L)})}),x.value.length>0)return w.error("You must pick at least the min. number of Images for each Product");if(l.value.products.length==0)return w.error("You need to select at least 1 product");if(B.value<5)return w.error("The Total Cost Without The Delivery Cost Must Be More Than 5 KWD");pe.value=!0;try{V=="admin"?await Wa(u):V=="restaurant"&&await La(u),w.success("Order created successfully"),Na.back(),pe.value=!1}catch(f){console.log(f),pe.value=!1}}})},ia=()=>{Z.value=!0,qa({employee_code:N.value}).then(({data:e})=>{const t={fixed:" KWD",percentage:"%"};w.success(e.meesage),q.value=parseInt(e.discount_rate)+t[e.discount_type],H.value=e.discount_type,l.value.employee_code=N.value}).catch(({response:e})=>{w.error(e.data.message)}).finally(()=>{Z.value=!1})},ca=()=>{Z.value=!0,ll({employee_code:N.value}).then(({data:e})=>{const t={fixed:" KWD",percentage:"%"};w.success(e.meesage),q.value=parseInt(e.discount_rate)+t[e.discount_type],H.value=e.discount_type,l.value.employee_code=N.value}).catch(({response:e})=>{w.error(e.data.message)}).finally(()=>{Z.value=!1})},pa=()=>{q.value="",H.value="",N.value="",S.value="",l.value.v_code="",l.value.employee_code=""},y=d(),ma=e=>{Q.value=!0,y.value=e.id},va=e=>{X.value=!0,y.value=e.id},fa=e=>{ne.value=!0,y.value=e},_a=async e=>{let t=T.value.find(u=>u.id==y.value),n=l.value.products.find(u=>u.product_id==y.value);const c={file:e.target.files[0],id:n.images.length,binary:""};await Ja(c.file).then(u=>{c.binary=u}),n.images.push(c),t.images+=1,t.images==t.quantity&&x.value.splice(x.value.indexOf(x.value.find(u=>u.product_id==y.value.product_id))),e.target.value=""},ga=e=>{let t=l.value.products.find(c=>c.product_id==y.value),n=T.value.find(c=>c.id==y.value);n.images-=1,n.images==n.quantity?x.value.splice(x.value.indexOf(x.value.find(c=>c.product_id==y.value))):x.value.map(c=>c.product_id).includes(n.id)||x.value.push({product_id:n.id}),t.images.splice(t.images.indexOf(e),1)},ba=fe(()=>ue.value.find(e=>e.id==y.value).extras),ya=fe(()=>ue.value.find(e=>e.id==y.value).flavors),ha=()=>{let e=l.value.products.find(t=>t.product_id==y.value);e.extra_flavors=l.value.extra.concat(l.value.flavor),X.value=!1},ke=d(new Date().toISOString());return Ia(()=>{V=="admin"?(ea(),Ae(),Ge(),aa()):V=="restaurant"&&(Ue(),Je(),Qe(),la());let e=setInterval(()=>{se.value=new Date().toISOString(),new Date(ke.value).getDate()!==new Date(se.value).getDate()&&(ke.value=se.value,ve.value=ve.value*2)},1e3);Ba(()=>{clearInterval(e)})}),(e,t)=>{const n=ja,c=xa,u=$a,f=ka;return i(),le("div",null,[r(Se,{modelValue:a(ne),"onUpdate:modelValue":t[1]||(t[1]=s=>j(ne)?ne.value=s:null),persistent:"",class:"v-dialog-sm"},{default:o(()=>[r(_e,{title:e.$t("Products Notes")},{default:o(()=>[(i(!0),le(Oe,null,Me(a(l).products.find(s=>s.product_id==a(y).id).notes,(s,k)=>(i(),v(te,{class:"pt-2"},{default:o(()=>[r(n,{label:`Note #${k+1}`,class:"flex-grow-1",modelValue:a(l).products.find(C=>C.product_id==a(y).id).notes[k],"onUpdate:modelValue":C=>a(l).products.find(z=>z.product_id==a(y).id).notes[k]=C},null,8,["label","modelValue","onUpdate:modelValue"])]),_:2},1024))),256)),r(te,{class:"d-flex justify-end gap-3 flex-wrap"},{default:o(()=>[r(U,{onClick:t[0]||(t[0]=s=>ne.value=!1)},{default:o(()=>[F(m(e.$t("Save")),1)]),_:1})]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"]),r(Se,{modelValue:a(Q),"onUpdate:modelValue":t[3]||(t[3]=s=>j(Q)?Q.value=s:null),persistent:"",class:"v-dialog-sm"},{default:o(()=>[r(c,{onClick:t[2]||(t[2]=s=>Q.value=!a(Q))}),r(_e,{title:"Product Images"},{default:o(()=>[r(te,{class:"d-flex flex-row align-center px-0 pb-5 pt-0 flex-wrap px-5"},{default:o(()=>[b("div",{style:Aa([a(l).products.find(s=>s.product_id==a(y)).images.length==a(l).products.find(s=>s.product_id==a(y)).quantity*10?"pointer-events: none;":"",{width:"120px",height:"120px",border:"2px solid lightgrey"}]),class:"add_image px-0 py-0 rounded mx-1 mt-4 position-relative d-flex align-center justify-center"},[r(qe,{class:"position-absolute",icon:"tabler-plus"}),b("input",{onChange:_a,type:"file",name:"file",style:{opacity:"0",height:"100%"},class:"h-100",multiple:"",accept:"image/png, image/gif, image/jpeg",disabled:a(l).products.find(s=>s.product_id==a(y)).images.length==a(l).products.find(s=>s.product_id==a(y)).quantity*10},null,40,sl)],4),(i(!0),le(Oe,null,Me(a(l).products.find(s=>s.product_id==a(y)).images,s=>(i(),le("div",rl,[r(U,{size:"33",color:"error",class:"delete_btn position-absolute px-1 py-1"},{default:o(()=>[r(qe,{icon:"tabler-trash",size:"22",onClick:k=>ga(s)},null,8,["onClick"])]),_:2},1024),b("div",ol,[b("img",{src:s.binary,style:{"object-fit":"cover"},class:"w-100 h-100",alt:"product_image"},null,8,nl)])]))),256))]),_:1})]),_:1})]),_:1},8,["modelValue"]),r(Se,{modelValue:a(X),"onUpdate:modelValue":t[8]||(t[8]=s=>j(X)?X.value=s:null),persistent:"",class:"v-dialog-sm"},{default:o(()=>[r(c,{onClick:t[4]||(t[4]=s=>X.value=!1)}),r(_e,{title:"Additional Options"},{default:o(()=>[r(te,null,{default:o(()=>[r(p,null,{default:o(()=>[r(_,null,{default:o(()=>[r(We,{"prepend-inner-icon":"tabler-building-store",placeholder:"Flavor",label:e.$t("Flavor"),modelValue:a(l).flavor,"onUpdate:modelValue":t[5]||(t[5]=s=>a(l).flavor=s),items:a(ya),"item-value":"name","item-title":"name",variant:"outlined","return-object":!1,class:"flex-grow-1 my-1 mx-2"},null,8,["label","modelValue","items"])]),_:1}),r(_,null,{default:o(()=>[r(ge,{"prepend-inner-icon":"tabler-package",modelValue:a(l).extra,"onUpdate:modelValue":t[6]||(t[6]=s=>a(l).extra=s),"item-title":"name",items:a(ba),"item-value":"name",variant:"outlined",label:e.$t("Extra"),"return-object":!1,class:"flex-grow-1 my-1 mx-2",multiple:""},null,8,["modelValue","items","label"])]),_:1})]),_:1})]),_:1}),r(te,{class:"d-flex justify-end gap-3 flex-wrap"},{default:o(()=>[r(U,{onClick:t[7]||(t[7]=s=>ha())},{default:o(()=>[F(" Confirm ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),r(p,{class:"mt-4 px-2",justify:"space-around"},{default:o(()=>[r(a($e),{ref_key:"refVForm",ref:Be,onSubmit:xe(da,["prevent"]),class:"w-100 d-flex"},{default:o(()=>[r(_,{class:"pt-0",cols:e.$vuetify.display.smAndDown?12:8},{default:o(()=>[b("p",ul,m(e.$t("Create Order")),1),a(V)=="admin"?(i(),v(a($e),{key:0,ref_key:"phoneForm",ref:ce,onSubmit:xe(Xe,["prevent"])},{default:o(()=>[r(_,{class:"px-5 rounded pb-7",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:o(()=>[b("p",dl,m(e.$t("Search by Phone Number")),1),r(_,null,{default:o(()=>[r(p,{justify:"space-between",align:"start"},{default:o(()=>[r(n,{rules:[a($),a(De),a(Ce)],min:1,"prepend-inner-icon":"tabler-phone",style:{width:"100%"},class:"pe-3 flex-grow-1",modelValue:a(I),"onUpdate:modelValue":t[9]||(t[9]=s=>j(I)?I.value=s:null),placeholder:a(re)("Phone Number")},null,8,["rules","modelValue","placeholder"]),r(U,{type:"submit",disabled:!a(I),loading:a(O)},{default:o(()=>[F(m(e.$t("Search")),1)]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])):g("",!0),a(V)=="restaurant"?(i(),v(a($e),{key:1,ref_key:"phoneForm",ref:ce,onSubmit:xe(Ze,["prevent"])},{default:o(()=>[r(_,{class:"px-5 rounded pb-7",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:o(()=>[b("p",il,m(e.$t("Search by Phone Number")),1),r(_,null,{default:o(()=>[r(p,{justify:"space-between",align:"start"},{default:o(()=>[r(n,{rules:[a($),a(De),a(Ce)],min:1,"prepend-inner-icon":"tabler-phone",style:{width:"100%"},class:"pe-3 flex-grow-1",modelValue:a(I),"onUpdate:modelValue":t[10]||(t[10]=s=>j(I)?I.value=s:null),placeholder:a(re)("Phone Number")},null,8,["rules","modelValue","placeholder"]),r(U,{type:"submit",disabled:!a(I),loading:a(O)},{default:o(()=>[F(m(e.$t("Search")),1)]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])):g("",!0),a(V)=="admin"||a(V)=="restaurant"?(i(),v(_,{key:2,class:"mt-7 px-5 rounded pb-10",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:o(()=>[r(p,{class:"mx-0 my-0 py-0 px-0",align:"center",justify:"space-between"},{default:o(()=>[b("p",cl,m(e.$t("Order Scheduling")),1),a(K)&&a(l).is_pickup?(i(),v(Ke,{key:0,size:"large",label:"",color:"error",class:"text-h6",height:"200","prepend-icon":"tabler-info-circle"},{default:o(()=>[F("The Branch is currently Closed")]),_:1})):g("",!0)]),_:1}),r(_,null,{default:o(()=>[r(p,{justify:"space-between",align:"center",class:He(e.$vuetify.display.smAndDown?"":"flex-nowrap")},{default:o(()=>[a(l).is_pickup?(i(),le("div",pl,[(i(),v(u,{rules:[a($)],disabled:!a(l).is_pickup,"prepend-inner-icon":"tabler-calendar",modelValue:a(l).delivery_date,"onUpdate:modelValue":[t[11]||(t[11]=s=>a(l).delivery_date=s),ie],placeholder:e.$t("Choose Date"),class:"flex-grow-1 mx-2 my-1",config:{minDate:a(se)},key:a(ve)},null,8,["rules","disabled","modelValue","placeholder","config"])),(i(),v(u,{rules:[a($)],disabled:!a(l).is_pickup||a(K)||Ye,"prepend-inner-icon":"tabler-clock",modelValue:a(l).delivery_time,"onUpdate:modelValue":t[12]||(t[12]=s=>a(l).delivery_time=s),placeholder:e.$t("Enter your time"),class:"flex-grow-1 mx-2 my-1",key:a(ae),config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i",minTime:a(A),maxTime:a(W)}},null,8,["rules","disabled","modelValue","placeholder","config"]))])):g("",!0),a(l).is_pickup?g("",!0):(i(),le("div",ml,[(i(),v(u,{disabled:!a(l).is_pickup,"prepend-inner-icon":"tabler-calendar",modelValue:a(l).delivery_date,"onUpdate:modelValue":[t[13]||(t[13]=s=>a(l).delivery_date=s),ie],placeholder:a(re)("Choose Date"),class:"flex-grow-1 mx-2 my-1",config:{minDate:a(se)},key:a(ve)},null,8,["disabled","modelValue","placeholder","config"])),(i(),v(u,{disabled:!a(l).is_pickup||a(K),"prepend-inner-icon":"tabler-clock",modelValue:a(l).delivery_time,"onUpdate:modelValue":t[14]||(t[14]=s=>a(l).delivery_time=s),placeholder:a(re)("Enter your time"),class:"flex-grow-1 mx-2 my-1",key:a(ae),config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i",minTime:a(A),maxTime:a(W)}},null,8,["disabled","modelValue","placeholder","config"]))])),r(p,{class:"w-50 mx-2 my-0",justify:e.$vuetify.display.smAndDown?"center":"start"},{default:o(()=>[r(Qa,{modelValue:a(l).is_pickup,"onUpdate:modelValue":[t[15]||(t[15]=s=>a(l).is_pickup=s),Ne],"false-value":!1,"true-value":!0,inset:!1,label:a(re)("Schedule Order")},null,8,["modelValue","label"])]),_:1},8,["justify"])]),_:1},8,["class"])]),_:1}),r(p,{class:"mx-0 my-0 py-0 px-0",align:"center",justify:"space-between"},{default:o(()=>[b("p",vl,m(e.$t("Area & Branch")),1),a(K)&&a(l).is_pickup?(i(),v(Ke,{key:0,size:"large",label:"",color:"error",class:"text-h6",height:"200","prepend-icon":"tabler-info-circle"},{default:o(()=>[F("The Branch is currently Closed")]),_:1})):g("",!0)]),_:1}),r(_,null,{default:o(()=>[r(p,{justify:"space-between",align:"center",class:He(e.$vuetify.display.smAndDown?"":"flex-nowrap")},{default:o(()=>[r(_,{cols:"6",class:"ma-0 py-0 pe-0 pe-2"},{default:o(()=>[a(V)=="admin"?(i(),v(ge,{key:0,clearable:"","prepend-inner-icon":"tabler-building-community",loading:a(J),modelValue:a(l).address_address_area,"onUpdate:modelValue":[t[16]||(t[16]=s=>a(l).address_address_area=s),t[17]||(t[17]=s=>ie())],"return-object":!1,items:a(me),"item-value":"name","item-title":"name",style:{width:"100%"},variant:"outlined",rules:[a($)],label:e.$t("Area"),class:"flex-grow-1 my-1 w-100"},null,8,["loading","modelValue","items","rules","label"])):g("",!0),a(V)=="restaurant"?(i(),v(ge,{key:1,clearable:"","prepend-inner-icon":"tabler-building-community",loading:a(J),modelValue:a(l).address_address_area,"onUpdate:modelValue":[t[18]||(t[18]=s=>a(l).address_address_area=s),t[19]||(t[19]=s=>ie())],items:a(me),"item-value":"name","item-title":"name","return-object":!1,style:{width:"100%"},variant:"outlined",rules:[a($)],label:e.$t("Area"),class:"flex-grow-1 my-1 w-100"},null,8,["loading","modelValue","items","rules","label"])):g("",!0)]),_:1}),r(_,{cols:"6",class:"ma-0 py-0 pe-0 ps-2"},{default:o(()=>[r(We,{clearable:"","prepend-inner-icon":"tabler-building-store",placeholder:"Select a Branch",rules:[a($)],label:e.$t("Branch"),loading:a(G),modelValue:a(l).branch_id,"onUpdate:modelValue":[t[20]||(t[20]=s=>a(l).branch_id=s),ie],items:a(D),"item-value":"id","item-title":a(Le),style:{width:"100%"},variant:"outlined","return-object":!1,disabled:!a(l).address_address_area||a(l).address_address_area=="",class:"w-100 flex-grow-1"},null,8,["rules","label","loading","modelValue","items","item-title","disabled"])]),_:1})]),_:1},8,["class"])]),_:1})]),_:1})):g("",!0),r(_,{class:"mt-7 px-5 rounded pb-10",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:o(()=>[b("p",fl,m(e.$t("Products")),1),r(_,null,{default:o(()=>[r(p,{justify:"space-between",align:"end"},{default:o(()=>[r(ge,{"prepend-inner-icon":"tabler-package",loading:a(oe),modelValue:a(ee),"onUpdate:modelValue":t[21]||(t[21]=s=>j(ee)?ee.value=s:null),items:a(ue),"item-title":"name_en","item-value":"id",style:{width:"100%"},variant:"outlined",label:e.$t("Products"),class:"flex-grow-1 my-1 w-50 mx-2"},null,8,["loading","modelValue","items","label"]),r(n,{label:e.$t("Quantity"),type:"number",class:"flex-grow-1 mx-2 my-1 w-25",modelValue:a(h),"onUpdate:modelValue":t[22]||(t[22]=s=>j(h)?h.value=s:null)},null,8,["label","modelValue"]),r(U,{"prepend-icon":"tabler-plus",class:"flex-grow-1 mx-2 my-1",disabled:a(h)<=0||!a(ee),onClick:oa},{default:o(()=>[F(m(e.$t("Add")),1)]),_:1},8,["disabled"])]),_:1}),r(p,{align:"center"},{default:o(()=>[a(T).length?(i(),v(f,{key:0,items:a(T),onDelete:ua,onAddImage:ma,onAddNote:fa,onAddExtraFlavors:va},null,8,["items"])):g("",!0)]),_:1})]),_:1})]),_:1}),r(_,{class:"mt-7 px-5 rounded pb-10",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:o(()=>[b("p",_l,m(e.$t("User Details")),1),r(_,null,{default:o(()=>[r(p,{justify:"space-between",align:"end"},{default:o(()=>[r(n,{"prepend-inner-icon":"tabler-user",label:e.$t("Name"),rules:[a($)],placeholder:e.$t("Customer Name"),class:"flex-grow-1 mx-2 my-1",modelValue:a(l).name,"onUpdate:modelValue":t[23]||(t[23]=s=>a(l).name=s)},null,8,["label","rules","placeholder","modelValue"]),r(n,{"prepend-inner-icon":"tabler-at",label:e.$t("Email"),placeholder:e.$t("Customer Email"),rules:[a(Ua),a($)],class:"flex-grow-1 mx-2 my-1",modelValue:a(l).email,"onUpdate:modelValue":t[24]||(t[24]=s=>a(l).email=s)},null,8,["label","placeholder","rules","modelValue"])]),_:1}),r(p,{justify:"space-between",align:"end",class:"mt-6"},{default:o(()=>[r(n,{"prepend-inner-icon":"tabler-phone",placeholder:e.$t("Customer Phone Number"),label:e.$t("Phone Number"),rules:[a(De),a($),a(Ce)],class:"flex-grow-1 mx-2 my-1",modelValue:a(l).address_phone,"onUpdate:modelValue":t[25]||(t[25]=s=>a(l).address_phone=s)},null,8,["placeholder","label","rules","modelValue"]),a(V)=="admin"?(i(),v(n,{key:0,"prepend-inner-icon":"tabler-user-check",label:e.$t("Agent"),placeholder:e.$t("Agent"),class:"flex-grow-1 mx-2 my-1",modelValue:a(l).agent,"onUpdate:modelValue":t[26]||(t[26]=s=>a(l).agent=s)},null,8,["label","placeholder","modelValue"])):g("",!0)]),_:1})]),_:1})]),_:1}),r(_,{class:"mt-7 px-5 rounded pb-10",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:o(()=>[b("p",gl,m(e.$t("User Address")),1),r(_,null,{default:o(()=>[r(p,{justify:"space-between",align:"end"},{default:o(()=>[r(n,{"prepend-inner-icon":"tabler-container",label:e.$t("Building Number"),rules:[a($)],placeholder:e.$t("Building Number"),class:"flex-grow-1 mx-2 my-1",modelValue:a(l).address_building_no,"onUpdate:modelValue":t[27]||(t[27]=s=>a(l).address_building_no=s)},null,8,["label","rules","placeholder","modelValue"]),r(n,{"prepend-inner-icon":"tabler-stairs",placeholder:e.$t("Floor"),label:e.$t("Floor"),rules:[a($)],class:"flex-grow-1 mx-2 my-1",modelValue:a(l).address_floor,"onUpdate:modelValue":t[28]||(t[28]=s=>a(l).address_floor=s)},null,8,["placeholder","label","rules","modelValue"])]),_:1}),r(p,{justify:"space-between",align:"end",class:"mt-6"},{default:o(()=>[r(n,{"prepend-inner-icon":"tabler-window",label:e.$t("Apartment"),rules:[a($)],placeholder:e.$t("Apartment"),class:"flex-grow-1 mx-2 my-1",modelValue:a(l).address_apartment,"onUpdate:modelValue":t[29]||(t[29]=s=>a(l).address_apartment=s)},null,8,["label","rules","placeholder","modelValue"]),r(n,{"prepend-inner-icon":"tabler-road",placeholder:e.$t("Street Name"),rules:[a($)],label:e.$t("Street Name"),class:"flex-grow-1 mx-2 my-1",modelValue:a(l).address_street_name,"onUpdate:modelValue":t[30]||(t[30]=s=>a(l).address_street_name=s)},null,8,["placeholder","rules","label","modelValue"])]),_:1}),r(p,{justify:"space-between",align:"end",class:"mt-6"},{default:o(()=>[r(n,{"prepend-inner-icon":"tabler-number",rules:[a($)],label:e.$t("Block Number"),placeholder:e.$t("Block Number"),class:"flex-grow-1 mx-2 my-1",modelValue:a(l).block_no,"onUpdate:modelValue":t[31]||(t[31]=s=>a(l).block_no=s)},null,8,["rules","label","placeholder","modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["cols"]),r(_,{class:"pt-0",cols:e.$vuetify.display.smAndDown?12:4},{default:o(()=>[r(_,{class:"mt-16 px-5 rounded pb-10 w-100 mx-auto",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:o(()=>[b("p",bl,m(e.$t("Order Summary")),1),r(_,{class:"pt-0"},{default:o(()=>[r(p,{class:"mt-0"},{default:o(()=>[r(_,{class:"w-100 px-0 pt-0"},{default:o(()=>[a(P)?(i(),v(n,{key:0,class:"w-100 flex-grow-1","prepend-inner-icon":"tabler-user-star",placeholder:e.$t("Enter Employee code"),modelValue:a(N),"onUpdate:modelValue":t[32]||(t[32]=s=>j(N)?N.value=s:null),style:{width:"100%"},variant:"outlined"},null,8,["placeholder","modelValue"])):g("",!0),a(P)?g("",!0):(i(),v(n,{key:1,class:"w-100 flex-grow-1","prepend-inner-icon":"tabler-gift",placeholder:e.$t("Have a Voucher?"),modelValue:a(S),"onUpdate:modelValue":t[33]||(t[33]=s=>j(S)?S.value=s:null),style:{width:"100%"},variant:"outlined"},null,8,["placeholder","modelValue"])),r(Xa,{onClick:pa,label:e.$t("Is An Employee"),modelValue:a(P),"onUpdate:modelValue":t[34]||(t[34]=s=>j(P)?P.value=s:null),class:"mt-2"},null,8,["label","modelValue"]),!a(P)&&a(V)=="admin"?(i(),v(U,{key:2,class:"mt-3",disabled:!a(S),block:"",loading:a(M),onClick:ta},{default:o(()=>[F(m(e.$t("Apply Voucher")),1)]),_:1},8,["disabled","loading"])):g("",!0),!a(P)&&a(V)=="restaurant"?(i(),v(U,{key:3,class:"mt-3",disabled:!a(S),block:"",loading:a(M),onClick:sa},{default:o(()=>[F(m(e.$t("Apply Voucher")),1)]),_:1},8,["disabled","loading"])):g("",!0),a(P)&&a(V)=="admin"?(i(),v(U,{key:4,class:"mt-3",disabled:!a(N),block:"",loading:a(Z),onClick:ia},{default:o(()=>[F(m(e.$t("Check Employee")),1)]),_:1},8,["disabled","loading"])):g("",!0),a(P)&&a(V)=="restaurant"?(i(),v(U,{key:5,class:"mt-3",disabled:!a(N),block:"",loading:a(Z),onClick:ca},{default:o(()=>[F(m(e.$t("Check Employee")),1)]),_:1},8,["disabled","loading"])):g("",!0)]),_:1})]),_:1}),r(p,{class:"mt-5"},{default:o(()=>[r(_e,{class:"w-100 px-2 py-2",variant:"tonal",color:e.$vuetify.theme.current.dark?"#B3BFFFFF":"primary"},{default:o(()=>[r(te,null,{default:o(()=>[r(p,{align:"center",justify:"space-between"},{default:o(()=>[b("p",yl,m(e.$t("Deliver Cost")),1),b("p",hl,m(a(l).delivery_cost)+" KWD",1)]),_:1}),r(p,null,{default:o(()=>[r(Fe,{color:e.$vuetify.theme.current.dark?"#B3BFFFFF":"primary"},null,8,["color"])]),_:1}),r(p,{align:"center",justify:"space-between",class:"mt-5"},{default:o(()=>[Vl,b("p",wl,m(Number(a(B)+a(l).delivery_cost).toFixed(2))+" KWD",1)]),_:1}),a(l).v_code?(i(),v(p,{key:0},{default:o(()=>[r(Fe,{color:e.$vuetify.theme.current.dark?"#B3BFFFFF":"primary"},null,8,["color"])]),_:1})):g("",!0),a(l).v_code||a(l).employee_code?(i(),v(p,{key:1,align:"center",justify:"space-between",class:"mt-5"},{default:o(()=>[b("p",kl,m(e.$t("Discount rate")),1),b("p",$l,m(a(q)),1)]),_:1})):g("",!0),a(l).v_code||a(l).employee_code?(i(),v(p,{key:2},{default:o(()=>[r(Fe,{color:e.$vuetify.theme.current.dark?"#B3BFFFFF":"primary"},null,8,["color"])]),_:1})):g("",!0),a(l).v_code||a(l).employee_code?(i(),v(p,{key:3,align:"center",justify:"space-between",class:"mt-5"},{default:o(()=>[b("p",xl,m(e.$t("New Total")),1),b("p",Dl,m(Number(a(ra)).toFixed(1))+" KWD",1)]),_:1})):g("",!0)]),_:1})]),_:1},8,["color"])]),_:1}),r(p,{class:"mt-8"},{default:o(()=>[r(U,{type:"submit",loading:a(pe),block:""},{default:o(()=>[F(m(e.$t("Create Order")),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["cols"])]),_:1},8,["onSubmit"])]),_:1})])}}};typeof Re=="function"&&Re(ze);const nt=Ca(ze,[["__scopeId","data-v-61e887d0"]]);export{nt as default};
