import{_ as O}from"./AppDateTimePicker-ae154d8d.js";import{C as Z,l as u,aV as G,aP as K,R as L,o as Q,b as X,w as o,q as t,W as p,s as e,a$ as Y,b0 as ee,U as n,b1 as d,b2 as ae,bd as le,be as te,b3 as se,az as oe,z as ie,H as re,aZ as k,a_ as de,a8 as ne,a9 as ue,n as U}from"./index-b025a402.js";import{a as me}from"./areas-2db02323.js";import{u as pe,b as ce}from"./branches-6e66a46b.js";import{g as fe}from"./cities-a5211d9d.js";import{g as _e}from"./days-a65402cf.js";import{V as b}from"./VCombobox-3429ebdf.js";import{V as Ve}from"./VSwitch-cb32347d.js";import"./VSelect-2d0ab717.js";import"./VList-3aedf74c.js";import"./ssrBoot-3522fd9b.js";import"./VDivider-0308e2cf.js";import"./dialog-transition-f09eb6ff.js";import"./VMenu-27caa9a1.js";import"./VOverlay-333c2b6c.js";import"./lazy-c32dfe70.js";import"./VCheckboxBtn-c7711e8f.js";import"./VSelectionControl-3bf3f0da.js";import"./VChip-cee9f4ff.js";import"./filter-8b1bb0f3.js";const j=c=>(ne("data-v-04aa47c2"),c=c(),ue(),c),be=j(()=>U("p",{class:"text-h4 pt-3 pb-2"},"Update Branch",-1)),ye=j(()=>U("p",{class:"text-h4 pt-3 pb-2"},"Address",-1)),B={__name:"[id]",setup(c){var h;const S=(h=JSON.parse(localStorage.getItem("userData")))==null?void 0:h.type,y=u(),w=G(),f=u(!1),g=u([]),V=u([]),v=u([]),x=K().params.id,a=u({start:"",end:"",name_en:"",name_ar:"",phone_no:"",city_id:null,areas:[],street_name:"",building_no:"",email:"",password:"",est_time:"",delivery_fee:.5,code:"",working_days:[],is_active:0}),C=async()=>{var r;(r=y.value)==null||r.validate().then(async({valid:l})=>{if(l){f.value=!0;try{await pe(x,a.value),w.success("Branch updated successfully"),f.value=!1}catch(i){w.error(i.response.data.message),f.value=!1}}})},N=()=>{fe().then(({data:r,meta:l})=>{v.value=r.data})},I=()=>{_e().then(({data:r,meta:l})=>{g.value=r.data})},T=async()=>{await ce(x).then(r=>{let{start:l,end:i,name_en:_,name_ar:s,phone_no:D,areas:F,city_id:A,street_name:H,building_no:$,email:E,password:R,est_time:W,delivery_fee:q,code:P,days:z,is_active:M}=r.data.data;a.value={start:l,end:i,name_en:_,name_ar:s,phone_no:D,areas:F,city_id:A,street_name:H,building_no:$,email:E,password:R,est_time:W,delivery_fee:q,code:P,is_active:M},a.value.working_days=z.map(m=>m.id),a.value.email=r.data.data.user.email,me().then(({data:m,meta:we})=>{V.value=m.data,a.value.areas.forEach(J=>{V.value.push(J)})}).finally(()=>{a.value.areas=a.value.areas.map(m=>m.id)})})};return L(()=>{S=="admin"&&(N(),I(),T())}),(r,l)=>{const i=de,_=O;return Q(),X(n,{class:"mt-4 px-4",justify:"space-around"},{default:o(()=>[t(p,{class:"pt-0"},{default:o(()=>[t(e(Y),{ref_key:"refVForm",ref:y,onSubmit:ee(C,["prevent"])},{default:o(()=>[t(p,{class:"px-5 rounded pb-10",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:o(()=>[be,t(p,null,{default:o(()=>[t(n,{justify:"space-between",align:"start"},{default:o(()=>[t(i,{rules:[e(d)],style:{width:"100%"},class:"pe-3 w-50",modelValue:e(a).name_en,"onUpdate:modelValue":l[0]||(l[0]=s=>e(a).name_en=s),label:"Name"},null,8,["rules","modelValue"]),t(i,{rules:[e(d)],style:{width:"100%"},class:"ps-3 w-50 text-right",dir:"rtl",modelValue:e(a).name_ar,"onUpdate:modelValue":l[1]||(l[1]=s=>e(a).name_ar=s),label:"الاسم"},null,8,["rules","modelValue"])]),_:1}),t(n,{class:"mt-10",justify:"space-between",align:"start"},{default:o(()=>[t(i,{rules:[e(d),e(ae),e(le)],style:{width:"100%"},class:"pe-3 w-50",modelValue:e(a).phone_no,"onUpdate:modelValue":l[2]||(l[2]=s=>e(a).phone_no=s),label:"Phone Number"},null,8,["rules","modelValue"]),t(i,{rules:[e(d),e(te)],style:{width:"100%"},class:"ps-3 w-50",modelValue:e(a).email,"onUpdate:modelValue":l[3]||(l[3]=s=>e(a).email=s),label:"Email"},null,8,["rules","modelValue"])]),_:1}),t(n,{class:"mt-10",justify:"space-between",align:"end"},{default:o(()=>[t(b,{modelValue:e(a).working_days,"onUpdate:modelValue":l[4]||(l[4]=s=>e(a).working_days=s),multiple:"",rules:[e(d)],style:{width:"100%"},class:"pe-3 w-50",items:e(g),variant:"outlined",label:"Working Days","item-value":"id","item-title":"name","return-object":!1},null,8,["modelValue","rules","items"]),t(_,{modelValue:e(a).start,"onUpdate:modelValue":l[5]||(l[5]=s=>e(a).start=s),label:"Start Working Hours",class:"ps-3 flex-grow-0",config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i"}},null,8,["modelValue"])]),_:1}),t(n,{class:"mt-10",justify:"space-between",align:"start"},{default:o(()=>[t(_,{modelValue:e(a).end,"onUpdate:modelValue":l[6]||(l[6]=s=>e(a).end=s),label:"End Working Hours",class:"pe-3 flex-grow-0",config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i"}},null,8,["modelValue"]),t(i,{rules:[e(d),e(se)],style:{width:"100%"},class:"ps-3 w-50",modelValue:e(a).est_time,"onUpdate:modelValue":l[7]||(l[7]=s=>e(a).est_time=s),label:"Estimate Time"},null,8,["rules","modelValue"])]),_:1}),t(n,{class:"mt-10",justify:"space-between",align:"start"},{default:o(()=>[t(i,{rules:[e(d)],style:{width:"100%"},class:"pe-3 w-50",modelValue:e(a).code,"onUpdate:modelValue":l[8]||(l[8]=s=>e(a).code=s),label:"Branch Code"},null,8,["rules","modelValue"])]),_:1})]),_:1})]),_:1}),t(p,{class:"mt-10 px-5 rounded",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:o(()=>[ye,t(p,null,{default:o(()=>[t(n,{justify:"space-between",align:"start"},{default:o(()=>[t(b,{modelValue:e(a).city_id,"onUpdate:modelValue":l[9]||(l[9]=s=>e(a).city_id=s),rules:[e(d)],items:e(v),"item-value":"id","item-title":"name",style:{width:"100%"},variant:"outlined",label:"Cities",class:"flex-grow-1 pe-3 my-2 w-50","return-object":!1},null,8,["modelValue","rules","items"]),t(b,{modelValue:e(a).areas,"onUpdate:modelValue":l[10]||(l[10]=s=>e(a).areas=s),multiple:"",rules:[e(d)],disabled:!e(a).city_id,items:e(V),style:{width:"100%"},variant:"outlined",label:"Areas",class:"flex-grow-1 my-2 ps-3 w-50","return-object":!1,"item-value":"id","item-title":"name",clearable:""},null,8,["modelValue","rules","disabled","items"])]),_:1}),t(n,{class:"mt-10",justify:"space-between",align:"start"},{default:o(()=>[t(i,{rules:[e(d)],style:{width:"100%"},class:"pe-3 w-50",modelValue:e(a).street_name,"onUpdate:modelValue":l[11]||(l[11]=s=>e(a).street_name=s),label:"Street Name"},null,8,["rules","modelValue"]),t(i,{rules:[e(d)],style:{width:"100%"},class:"ps-3 w-50",modelValue:e(a).building_no,"onUpdate:modelValue":l[12]||(l[12]=s=>e(a).building_no=s),label:"Building Number"},null,8,["rules","modelValue"])]),_:1})]),_:1}),t(n,{class:"pb-6 mt-8 px-3",align:"center",justify:"center"},{default:o(()=>[t(oe,{block:r.$vuetify.display.xs,color:"primary",class:"px-12",loading:e(f),type:"submit"},{default:o(()=>[t(ie,{start:"",icon:"tabler-check"}),re("Update ")]),_:1},8,["block","loading"]),t(Ve,{class:"ml-7",modelValue:e(a).is_active,"onUpdate:modelValue":l[13]||(l[13]=s=>e(a).is_active=s),"false-value":0,"true-value":1,inset:!1,label:"Active"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})}}};typeof k=="function"&&k(B);const We=Z(B,[["__scopeId","data-v-04aa47c2"]]);export{We as default};
