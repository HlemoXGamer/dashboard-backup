import{_ as wa}from"./OrderProducts-ec690f0e.js";import{_ as ka}from"./AppDateTimePicker-c1bb7025.js";import{_ as $a}from"./DialogCloseBtn-62871b0b.js";import{ba as Ne,bb as xa,C as Da,l as o,D as Ca,O as be,aV as Sa,R as Fa,aB as Ia,o as c,c as se,q as r,w as u,I as ye,F as Me,a as qe,s as a,b as f,aX as re,az as B,H as I,y as _,G as j,n as g,aY as Pa,z as He,U as v,W as b,A as y,a$ as De,b0 as Ce,b1 as $,b2 as Se,bc as Fe,t as Re,bd as Na,aZ as We,aW as Ba,a_ as Aa,a8 as Ua,a9 as ja}from"./index-b5d24edb.js";import{g as Ta}from"./areas-f9cac259.js";import{a as Ea,g as Oa}from"./branches-4fcb03a3.js";import{c as Ma}from"./employees-49a48831.js";import{c as qa,a as Ha,b as Ra}from"./orders-51d579c9.js";import{c as Wa,a as Ka,b as za}from"./orders-d21b794f.js";import{a as La}from"./products-2c78de26.js";import{g as Ya}from"./products-0dfabf59.js";import{t as Ga}from"./files-2e167225.js";import{V as Ie}from"./VDialog-7d28cfe6.js";import{V as ge}from"./VCombobox-8607af61.js";import{V as Ke}from"./VSelect-0e70c656.js";import{V as ze}from"./VChip-240a7907.js";import{V as Ja}from"./VSwitch-6fbde25e.js";import{V as Qa}from"./VCheckbox-2b9bf587.js";import{V as Pe}from"./VDivider-d07c9055.js";import"./VDataTable-405911d5.js";import"./VCheckboxBtn-f0cfd993.js";import"./VSelectionControl-8c9886a9.js";import"./VList-837b200a.js";import"./ssrBoot-de7228ad.js";import"./filter-72a3eb0c.js";import"./VTable-618c4d45.js";import"./VOverlay-a7019e8a.js";import"./lazy-bc0e50cc.js";import"./dialog-transition-bca0bf81.js";import"./VMenu-7ff4824f.js";function Xa(){return Ne.get("/areas")}let{get:Za,show:lt,update:tt,create:st,remove:rt}=xa("/restaurant-apis/branches");function el(){return Ne.get("/restaurant-apis/branch/service-cost")}function al(G){return Ne.post("/restaurant-apis/employee/check",G)}const ll=G=>(Ua("data-v-8c490bbd"),G=G(),ja(),G),tl=["disabled"],sl={style:{width:"120px",height:"120px",border:"2px solid lightgrey"},class:"product_image px-0 py-0 rounded mx-1 mt-4 position-relative d-flex align-center justify-center"},rl={class:"w-100 h-100",style:{overflow:"hidden"}},dl=["src"],ul={class:"text-h4 pt-3 pb-2"},nl={class:"text-h4 pt-3"},ol={class:"text-h4 pt-3"},il={class:"text-h4 pt-3 mb-5"},cl={key:0,class:"w-100 flex-grow-1 d-flex"},pl={key:1,class:"w-100 flex-grow-1 d-flex"},ml={class:"text-h4 pt-3 mb-5"},vl={class:"text-h4 pt-3 mb-0"},fl={class:"text-h4 pt-3 mb-4"},_l={class:"text-h4 pt-3 mb-1"},bl={class:"text-h4 pt-3 mb-5"},yl={class:"mb-2"},gl={class:"mb-2"},hl=ll(()=>g("p",{class:"mb-2"},"Total",-1)),Vl={class:"mb-2"},wl={class:"mb-2"},kl={class:"mb-2"},$l={class:"mb-0"},xl={class:"mb-0"},Le={__name:"create",setup(G){var Ee;const de=o(new Date().toISOString()),he=Ca(),ue=he.t,Ye=be(()=>{if(he.locale.value==="en")return"name_en";if(he.locale.value==="ar")return"name_ar"}),V=(Ee=JSON.parse(localStorage.getItem("userData")))==null?void 0:Ee.type,P=o(""),pe=o(),Be=o(),w=Sa(),me=o(!1),W=o([]),D=o([]),ve=o([]),M=o(!1),J=o(!1),ne=o(!1),Q=o(!1),X=o(!1),Z=o(!1),oe=o(!1),ee=o(!1),T=o([]),h=o(1),ae=o(),E=o([]),C=o(0),q=o(!1),le=o(0),Ve=o(!1),we=o([]),F=o(""),H=o(""),R=o(""),ke=o(0),A=o(""),O=o(!1),N=o(null),K=o(null),z=o(!1),ie=o(null),fe=o(1),Ge=!1,te=o(!1),l=o({is_pickup:!0,products:[],email:"",name:"",agent:"",address_city:1,delivery_date:"",delivery_time:"",delivery_cost:"",address_building_no:"",block_no:"",address_floor:"",address_phone:"",address_apartment:"",address_address_area:null,address_street_name:"",branch_id:null,v_code:"",employee_code:"",extra:null,flavor:null}),x=o([]),Je=()=>{Q.value=!0,Ta().then(({data:e,meta:t})=>{ve.value=e.data,Q.value=!1})},Qe=()=>{Q.value=!0,Xa().then(({data:e})=>{ve.value=e.data,Q.value=!1})},Xe=()=>{J.value=!0,Za().then(({data:e})=>{W.value=e.data,J.value=!0,W.value=e.data.filter(t=>t.is_active===1),D.value=e.data.filter(t=>t.id===2),N.value=D.value[0].start,ie.value=N.value,K.value=D.value[0].end,le.value+=1,J.value=!1})},Ae=e=>{ne.value=!0,La(e).then(({data:t,meta:d})=>{T.value=t.data,ne.value=!1})},Ue=e=>{ne.value=!0,Ya(e).then(({data:t,meta:d})=>{T.value=t.data,ne.value=!1})},Ze=()=>{var e;(e=pe.value)==null||e.validate().then(async({valid:t})=>{t&&(M.value=!0,qa({phone:`${P.value}`}).then(d=>{w.success("Customer found!"),we.value=d.data.data.length?d.data.data[0]:[],l.value.email=d.data.email,l.value.name=d.data.name,Ve.value=!0,M.value=!1,Te()}).catch(d=>{w.error(d.response.data.message),M.value=!1}))})},ea=()=>{var e;(e=pe.value)==null||e.validate().then(async({valid:t})=>{t&&(M.value=!0,Wa({phone:`${P.value}`}).then(d=>{w.success("Customer found!"),we.value=d.data.data.length?d.data.data[0]:[],l.value.email=d.data.email,l.value.name=d.data.name,Ve.value=!0,M.value=!1,Te()}).catch(d=>{w.error(d.response.data.message),M.value=!1}))})},aa=()=>{J.value=!0,Ea().then(({data:e})=>{W.value=e.data.filter(t=>t.is_active===1),D.value=e.data.filter(t=>t.id===2),N.value=D.value[0].start,ie.value=N.value,K.value=D.value[0].end,le.value+=1,J.value=!1})},la=()=>{Oa().then(({data:e,meta:t})=>{l.value.delivery_cost=e.data.delivery_cost})},ta=()=>{el().then(({data:e,meta:t})=>{l.value.delivery_cost=e.data.delivery_cost})},sa=()=>{q.value=!0,Ha({v_code:F.value,total:C.value}).then(e=>{const t={fixed:" KWD",percentage:"%"};l.value.v_code=F.value,F.value="",H.value=parseInt(e.data.discount_rate)+t[e.data.discount_type],R.value=e.data.discount_type,w.success(e.data.message),q.value=!1}).catch(e=>{w.error(e.response.data.message),q.value=!1})},ra=()=>{q.value=!0,Ka({v_code:F.value,total:C.value}).then(e=>{const t={fixed:" KWD",percentage:"%"};l.value.v_code=F.value,F.value="",H.value=parseInt(e.data.discount_rate)+t[e.data.discount_type],R.value=e.data.discount_type,w.success(e.data.message),q.value=!1}).catch(e=>{w.error(e.response.data.message),q.value=!1})},da=be(()=>(R.value=="fixed"?ke.value=parseInt(C.value-parseInt(H.value)):R.value=="percentage"?ke.value=parseInt(C.value)-parseInt(C.value)*parseInt(H.value)/100:R.value=="free_delivery",ke.value+(l.value.delivery_cost??0))),ua=()=>{const e=ae.value;if(E.value.includes(e)){l.value.products.find(d=>d.product_id===e.id).quantity=parseInt(l.value.products.find(d=>d.product_id===e.id).quantity)+parseInt(h.value);let t=E.value.find(d=>d==e);t.quantity=parseInt(t.quantity)+parseInt(h.value),t.total=t.total+h.value*e.price,C.value+=h.value*e.price,e.has_note==1&&l.value.products.find(d=>d.product_id==e.id).notes.push("")}else{if(e.has_image==1&&e.has_note==1){l.value.products.push({product_id:e.id,quantity:parseInt(h.value),images:[],notes:[]});for(let t=0;t<h.value;t++)l.value.products.find(d=>d.product_id==e.id).notes[t]="";e.images=0,x.value.push({product_id:e.id})}else if(e.has_image==1&&e.has_note==0)l.value.products.push({product_id:e.id,quantity:parseInt(h.value),images:[]}),e.images=0,x.value.push({product_id:e.id});else if(e.has_image==0&&e.has_note==1){l.value.products.push({product_id:e.id,quantity:parseInt(h.value),notes:[]});for(let t=0;t<h.value;t++)l.value.products.find(d=>d.product_id==e.id).notes[t]=""}else l.value.products.push({product_id:e.id,quantity:parseInt(h.value)});e.quantity=h.value,C.value+=e.price*h.value,e.total=e.price*h.value,E.value.push(e)}ae.value=null,h.value=1},je=()=>{const e=new Date;if(l.value.delivery_time=null,te.value=!1,l.value.is_pickup===!1&&(l.value.delivery_date=null,l.value.delivery_time=null),l.value.is_pickup===!0&&(l.value.address_address_area==null||l.value.address_address_area==""))D.value=W.value.filter(t=>t.id===2);else if(l.value.delivery_date!==$e(e)&&l.value.is_pickup===!0)D.value=W.value.filter(t=>t.id===2),l.value.branch_id=2;else if(l.value.delivery_date==$e(e)){const t=W.value.filter(d=>d.areas.find(n=>n.name===l.value.address_address_area)!==void 0);t.find(d=>d.id==l.value.branch_id)||(l.value.branch_id=null),D.value=t}else if(l.value.is_pickup===!1&&l.value.address_address_area!==null&&l.value.address_address_area!==""){const t=W.value.filter(d=>d.areas.find(n=>n.name===l.value.address_address_area)!==void 0);t.find(d=>d.id==l.value.branch_id)||(l.value.branch_id=null),D.value=t}},ce=()=>{D.value.find(e=>e.id===l.value.branch_id),le.value+=1,na()},$e=e=>{const t=String(e.getDate()).padStart(2,"0"),d=String(e.getMonth()+1).padStart(2,"0");return`${e.getFullYear()}-${d}-${t}`},na=()=>{var t,d,i,n;const e=new Date;if(e.toISOString(),je(),D.value.find(p=>p.id==l.value.branch_id),l.value.delivery_date==$e(e)){const p=e.getHours(),s=e.getMinutes(),[k,S]=(t=N.value.split(":"))==null?void 0:t.map(Number),[L,_e]=(d=K.value.split(":"))==null?void 0:d.map(Number);if(p>L||p===L&&s>=_e)te.value=!1,z.value=!0;else if(p<k||p===k&&s<S)N.value=ie.value;else{const U=new Date(new Date().setMinutes(new Date().getMinutes()+40)),Y=U.getHours(),ha=U.getMinutes();(i=N.value.split(":"))==null||i.map(Number);const[Oe,Va]=(n=K.value.split(":"))==null?void 0:n.map(Number);Y>Oe||Y===Oe&&ha>=Va?z.value=!0:(te.value=!1,N.value=new Date(new Date().setMinutes(new Date().getMinutes()+40)).toTimeString().slice(0,5))}}else{z.value=!1,N.value=ie.value,te.value=!1;let p,s=new Date,k=new Date(s);k.setHours(0,0,0,0);let S=new Date(s);if(S.setHours(4,55,0,0),l.value.delivery_date==""||l.value.delivery_date==null)return;(new Date(l.value.delivery_date).getDate()!==new Date(xe.value).getDate()||s>=k&&s<=S)&&(te.value=!0,p="menuType=pre-order",V=="admin"?Ae(p):V=="restaurant"&&Ue(p))}le.value+=1,l.value.delivery_time=null},Te=()=>{const e=we.value;l.value.address_apartment=e==null?void 0:e.apartment,l.value.block_no=e==null?void 0:e.block_no,l.value.address_building_no=e==null?void 0:e.building_num,l.value.address_floor=e==null?void 0:e.floor,l.value.address_street_name=e==null?void 0:e.street_name,l.value.address_address_area=e==null?void 0:e.area_name,l.value.address_phone=P.value,Ve.value=!1},oa=e=>{let t=0;if(e.hasOwnProperty("extras")){const d=l.value.products.find(n=>n.product_id==e.id);T.value.find(n=>n.id==e.id).extras.forEach(n=>{d.extra.includes(n.id)&&(t+=Number(n.price))})}C.value=C.value-t-e.price*e.quantity,E.value.splice(E.value.indexOf(e),1),l.value.products.splice(l.value.products.indexOf(l.value.products.find(d=>d.product_id==e.id)),1),e.has_image==1&&x.value.splice(x.value.indexOf(x.value.find(d=>d.product_id==e.id)),1)},ia=async()=>{var e,t,d;if(l.value.is_pickup===!1){const i=new Date().getHours(),n=new Date().getMinutes(),[p,s]=(e=ie.value.split(":"))==null?void 0:e.map(Number),[k,S]=(t=K.value.split(":"))==null?void 0:t.map(Number);if(i>k||i===k&&n>=S||i<p||i===p&&n<s)return w.error("The Branch is currently closed.")}(d=Be.value)==null||d.validate().then(async({valid:i})=>{if(i){let n=new FormData;if(n.append("branch_id",l.value.branch_id),n.append("is_pickup",l.value.is_pickup),n.append("email",l.value.email),n.append("name",l.value.name),n.append("agent",l.value.agent),n.append("address_city",l.value.address_city),l.value.delivery_date!==null&&n.append("delivery_date",l.value.delivery_date+" "+l.value.delivery_time+":00"),l.value.delivery_time!==null&&n.append("delivery_time",l.value.delivery_time),n.append("delivery_cost",l.value.delivery_cost),n.append("address_building_no",l.value.address_building_no),n.append("block_no",l.value.block_no),n.append("address_floor",l.value.address_floor),n.append("address_phone",l.value.address_phone),n.append("address_apartment",l.value.address_apartment),n.append("address_address_area",l.value.address_address_area),n.append("address_street_name",l.value.address_street_name),n.append("v_code",l.value.v_code),n.append("employee_code",l.value.employee_code),l.value.products.forEach((p,s)=>{var S,L,_e;n.append(`products[${s}][product_id]`,p.product_id),n.append(`products[${s}][quantity]`,p.quantity),(S=p.images)==null||S.forEach((U,Y)=>{n.append(`products[${s}][images][${Y}]`,U.file)}),(L=p.notes)==null||L.forEach((U,Y)=>{n.append(`products[${s}][notes][${Y}]`,U)});let k=0;p.hasOwnProperty("extra")&&((_e=p==null?void 0:p.extra)==null||_e.filter(U=>U!=="").forEach((U,Y)=>{n.append(`products[${s}][extra_flavors][${k}]`,U),k++})),p.hasOwnProperty("flavor")&&n.append(`products[${s}][extra_flavors][${k}]`,p.flavor)}),x.value.length>0)return w.error("You must pick at least the min. number of Images for each Product");if(l.value.products.length==0)return w.error("You need to select at least 1 product");if(C.value<5)return w.error("The Total Cost Without The Delivery Cost Must Be More Than 5 KWD");me.value=!0;try{V=="admin"?await Ra(n):V=="restaurant"&&await za(n),w.success("Order created successfully"),Ba.push({name:"orders"}),me.value=!1}catch(p){console.log(p),me.value=!1}}})},ca=()=>{ee.value=!0,Ma({employee_code:A.value}).then(({data:e})=>{const t={fixed:" KWD",percentage:"%"};w.success(e.meesage),H.value=parseInt(e.discount_rate)+t[e.discount_type],R.value=e.discount_type,l.value.employee_code=A.value}).catch(({response:e})=>{w.error(e.data.message)}).finally(()=>{ee.value=!1})},pa=()=>{ee.value=!0,al({employee_code:A.value}).then(({data:e})=>{const t={fixed:" KWD",percentage:"%"};w.success(e.meesage),H.value=parseInt(e.discount_rate)+t[e.discount_type],R.value=e.discount_type,l.value.employee_code=A.value}).catch(({response:e})=>{w.error(e.data.message)}).finally(()=>{ee.value=!1})},ma=()=>{H.value="",R.value="",A.value="",F.value="",l.value.v_code="",l.value.employee_code=""},m=o(),va=e=>{X.value=!0,m.value=e.id},fa=e=>{var d,i;m.value=e.id;const t=l.value.products.find(n=>n.product_id==m.value);t.hasOwnProperty("flavor")&&(l.value.flavor=(d=l.value.products.find(n=>n.product_id==m.value))==null?void 0:d.flavor),t.hasOwnProperty("extra")&&(l.value.extra=(i=l.value.products.find(n=>n.product_id==m.value))==null?void 0:i.extra),Z.value=!0},_a=e=>{oe.value=!0,m.value=e},ba=async e=>{let t=E.value.find(n=>n.id==m.value),d=l.value.products.find(n=>n.product_id==m.value);const i={file:e.target.files[0],id:d.images.length,binary:""};await Ga(i.file).then(n=>{i.binary=n}),d.images.push(i),t.images+=1,t.images==t.quantity&&x.value.splice(x.value.indexOf(x.value.find(n=>n.product_id==m.value.product_id))),e.target.value=""},ya=e=>{let t=l.value.products.find(i=>i.product_id==m.value),d=E.value.find(i=>i.id==m.value);d.images-=1,d.images==d.quantity?x.value.splice(x.value.indexOf(x.value.find(i=>i.product_id==m.value))):x.value.map(i=>i.product_id).includes(d.id)||x.value.push({product_id:d.id}),t.images.splice(t.images.indexOf(e),1)};be(()=>T.value.find(e=>e.id==m.value).extras),be(()=>T.value.find(e=>e.id==m.value).flavors);const ga=()=>{let e=l.value.products.find(d=>d.product_id==m.value);e.extra=l.value.extra,e.flavor=l.value.flavor;let t=0;T.value.find(d=>d.id==m.value).extras.forEach(d=>{e.extra.includes(d.id)&&(t+=Number(d.price)*Number(e.quantity))}),C.value=C.value+t,Z.value=!1},xe=o(new Date().toISOString());return Fa(()=>{V=="admin"?(aa(),Ae(),Je(),la()):V=="restaurant"&&(Ue(),Qe(),Xe(),ta());let e=setInterval(()=>{de.value=new Date().toISOString(),new Date(xe.value).getDate()!==new Date(de.value).getDate()&&(xe.value=de.value,fe.value=fe.value*2)},1e3);Ia(()=>{clearInterval(e)})}),(e,t)=>{const d=Aa,i=$a,n=ka,p=wa;return c(),se("div",null,[r(Ie,{modelValue:a(oe),"onUpdate:modelValue":t[1]||(t[1]=s=>j(oe)?oe.value=s:null),persistent:"",class:"v-dialog-sm"},{default:u(()=>[r(ye,{title:e.$t("Products Notes")},{default:u(()=>[(c(!0),se(Me,null,qe(a(l).products.find(s=>s.product_id==a(m).id).notes,(s,k)=>(c(),f(re,{class:"pt-2"},{default:u(()=>[r(d,{label:`Note #${k+1}`,class:"flex-grow-1",modelValue:a(l).products.find(S=>S.product_id==a(m).id).notes[k],"onUpdate:modelValue":S=>a(l).products.find(L=>L.product_id==a(m).id).notes[k]=S},null,8,["label","modelValue","onUpdate:modelValue"])]),_:2},1024))),256)),r(re,{class:"d-flex justify-end gap-3 flex-wrap"},{default:u(()=>[r(B,{onClick:t[0]||(t[0]=s=>oe.value=!1)},{default:u(()=>[I(_(e.$t("Save")),1)]),_:1})]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"]),r(Ie,{modelValue:a(X),"onUpdate:modelValue":t[3]||(t[3]=s=>j(X)?X.value=s:null),persistent:"",class:"v-dialog-sm"},{default:u(()=>[r(i,{onClick:t[2]||(t[2]=s=>X.value=!a(X))}),r(ye,{title:"Product Images"},{default:u(()=>[r(re,{class:"d-flex flex-row align-center px-0 pb-5 pt-0 flex-wrap px-5"},{default:u(()=>[g("div",{style:Pa([a(l).products.find(s=>s.product_id==a(m)).images.length==a(l).products.find(s=>s.product_id==a(m)).quantity*10?"pointer-events: none;":"",{width:"120px",height:"120px",border:"2px solid lightgrey"}]),class:"add_image px-0 py-0 rounded mx-1 mt-4 position-relative d-flex align-center justify-center"},[r(He,{class:"position-absolute",icon:"tabler-plus"}),g("input",{onChange:ba,type:"file",name:"file",style:{opacity:"0",height:"100%"},class:"h-100",multiple:"",accept:"image/png, image/gif, image/jpeg",disabled:a(l).products.find(s=>s.product_id==a(m)).images.length==a(l).products.find(s=>s.product_id==a(m)).quantity*10},null,40,tl)],4),(c(!0),se(Me,null,qe(a(l).products.find(s=>s.product_id==a(m)).images,s=>(c(),se("div",sl,[r(B,{size:"33",color:"error",class:"delete_btn position-absolute px-1 py-1"},{default:u(()=>[r(He,{icon:"tabler-trash",size:"22",onClick:k=>ya(s)},null,8,["onClick"])]),_:2},1024),g("div",rl,[g("img",{src:s.binary,style:{"object-fit":"cover"},class:"w-100 h-100",alt:"product_image"},null,8,dl)])]))),256))]),_:1})]),_:1})]),_:1},8,["modelValue"]),r(Ie,{modelValue:a(Z),"onUpdate:modelValue":t[8]||(t[8]=s=>j(Z)?Z.value=s:null),persistent:"",class:"v-dialog-sm"},{default:u(()=>[r(i,{onClick:t[4]||(t[4]=s=>Z.value=!1)}),r(ye,{title:"Additional Options"},{default:u(()=>[r(re,null,{default:u(()=>[a(m)?(c(),f(v,{key:0},{default:u(()=>[r(b,{cols:"6"},{default:u(()=>[r(ge,{"prepend-inner-icon":"tabler-building-store",placeholder:"Flavor",label:e.$t("Flavor"),modelValue:a(l).flavor,"onUpdate:modelValue":t[5]||(t[5]=s=>a(l).flavor=s),items:a(T).find(s=>s.id==a(m)).flavors,"item-value":"id","item-title":"name",variant:"outlined","return-object":!1,class:"flex-grow-1 my-1 mx-2"},null,8,["label","modelValue","items"])]),_:1}),r(b,{cols:"6"},{default:u(()=>[r(Ke,{"prepend-inner-icon":"tabler-package",modelValue:a(l).extra,"onUpdate:modelValue":t[6]||(t[6]=s=>a(l).extra=s),"item-title":"name",items:a(T).find(s=>s.id==a(m)).extras,"item-value":"id",variant:"outlined",label:e.$t("Extra"),"return-object":!1,class:"flex-grow-1 my-1 mx-2",multiple:""},null,8,["modelValue","items","label"])]),_:1})]),_:1})):y("",!0)]),_:1}),r(re,{class:"d-flex justify-end gap-3 flex-wrap"},{default:u(()=>[r(B,{onClick:t[7]||(t[7]=s=>ga())},{default:u(()=>[I(" Confirm ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),r(v,{class:"mt-4 px-2",justify:"space-around"},{default:u(()=>[r(a(De),{ref_key:"refVForm",ref:Be,onSubmit:Ce(ia,["prevent"]),class:"w-100 d-flex"},{default:u(()=>[r(b,{class:"pt-0",cols:e.$vuetify.display.smAndDown?12:8},{default:u(()=>[g("p",ul,_(e.$t("Create Order")),1),a(V)=="admin"?(c(),f(a(De),{key:0,ref_key:"phoneForm",ref:pe,onSubmit:Ce(Ze,["prevent"])},{default:u(()=>[r(b,{class:"px-5 rounded pb-7",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:u(()=>[g("p",nl,_(e.$t("Search by Phone Number")),1),r(b,null,{default:u(()=>[r(v,{justify:"space-between",align:"start"},{default:u(()=>[r(d,{rules:[a($),a(Se),a(Fe)],min:1,"prepend-inner-icon":"tabler-phone",style:{width:"100%"},class:"pe-3 flex-grow-1",modelValue:a(P),"onUpdate:modelValue":t[9]||(t[9]=s=>j(P)?P.value=s:null),placeholder:a(ue)("Phone Number")},null,8,["rules","modelValue","placeholder"]),r(B,{type:"submit",disabled:!a(P),loading:a(M)},{default:u(()=>[I(_(e.$t("Search")),1)]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])):y("",!0),a(V)=="restaurant"?(c(),f(a(De),{key:1,ref_key:"phoneForm",ref:pe,onSubmit:Ce(ea,["prevent"])},{default:u(()=>[r(b,{class:"px-5 rounded pb-7",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:u(()=>[g("p",ol,_(e.$t("Search by Phone Number")),1),r(b,null,{default:u(()=>[r(v,{justify:"space-between",align:"start"},{default:u(()=>[r(d,{rules:[a($),a(Se),a(Fe)],min:1,"prepend-inner-icon":"tabler-phone",style:{width:"100%"},class:"pe-3 flex-grow-1",modelValue:a(P),"onUpdate:modelValue":t[10]||(t[10]=s=>j(P)?P.value=s:null),placeholder:a(ue)("Phone Number")},null,8,["rules","modelValue","placeholder"]),r(B,{type:"submit",disabled:!a(P),loading:a(M)},{default:u(()=>[I(_(e.$t("Search")),1)]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])):y("",!0),a(V)=="admin"||a(V)=="restaurant"?(c(),f(b,{key:2,class:"mt-7 px-5 rounded pb-10",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:u(()=>[r(v,{class:"mx-0 my-0 py-0 px-0",align:"center",justify:"space-between"},{default:u(()=>[g("p",il,_(e.$t("Order Scheduling")),1),a(z)&&a(l).is_pickup?(c(),f(ze,{key:0,size:"large",label:"",color:"error",class:"text-h6",height:"200","prepend-icon":"tabler-info-circle"},{default:u(()=>[I("The Branch is currently Closed")]),_:1})):y("",!0)]),_:1}),r(b,null,{default:u(()=>[r(v,{justify:"space-between",align:"center",class:Re(e.$vuetify.display.smAndDown?"":"flex-nowrap")},{default:u(()=>[a(l).is_pickup?(c(),se("div",cl,[(c(),f(n,{rules:[a($)],disabled:!a(l).is_pickup,"prepend-inner-icon":"tabler-calendar",modelValue:a(l).delivery_date,"onUpdate:modelValue":[t[11]||(t[11]=s=>a(l).delivery_date=s),ce],placeholder:e.$t("Choose Date"),class:"flex-grow-1 mx-2 my-1",config:{minDate:a(de)},key:a(fe)},null,8,["rules","disabled","modelValue","placeholder","config"])),(c(),f(n,{rules:[a($)],disabled:!a(l).is_pickup||a(z)||Ge,"prepend-inner-icon":"tabler-clock",modelValue:a(l).delivery_time,"onUpdate:modelValue":t[12]||(t[12]=s=>a(l).delivery_time=s),placeholder:e.$t("Enter your time"),class:"flex-grow-1 mx-2 my-1",key:a(le),config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i",minTime:a(N),maxTime:a(K)}},null,8,["rules","disabled","modelValue","placeholder","config"]))])):y("",!0),a(l).is_pickup?y("",!0):(c(),se("div",pl,[(c(),f(n,{disabled:!a(l).is_pickup,"prepend-inner-icon":"tabler-calendar",modelValue:a(l).delivery_date,"onUpdate:modelValue":[t[13]||(t[13]=s=>a(l).delivery_date=s),ce],placeholder:a(ue)("Choose Date"),class:"flex-grow-1 mx-2 my-1",config:{minDate:a(de)},key:a(fe)},null,8,["disabled","modelValue","placeholder","config"])),(c(),f(n,{disabled:!a(l).is_pickup||a(z),"prepend-inner-icon":"tabler-clock",modelValue:a(l).delivery_time,"onUpdate:modelValue":t[14]||(t[14]=s=>a(l).delivery_time=s),placeholder:a(ue)("Enter your time"),class:"flex-grow-1 mx-2 my-1",key:a(le),config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i",minTime:a(N),maxTime:a(K)}},null,8,["disabled","modelValue","placeholder","config"]))])),r(v,{class:"w-50 mx-2 my-0",justify:e.$vuetify.display.smAndDown?"center":"start"},{default:u(()=>[r(Ja,{modelValue:a(l).is_pickup,"onUpdate:modelValue":[t[15]||(t[15]=s=>a(l).is_pickup=s),je],"false-value":!1,"true-value":!0,inset:!1,label:a(ue)("Schedule Order")},null,8,["modelValue","label"])]),_:1},8,["justify"])]),_:1},8,["class"])]),_:1}),r(v,{class:"mx-0 my-0 py-0 px-0",align:"center",justify:"space-between"},{default:u(()=>[g("p",ml,_(e.$t("Area & Branch")),1),a(z)&&a(l).is_pickup?(c(),f(ze,{key:0,size:"large",label:"",color:"error",class:"text-h6",height:"200","prepend-icon":"tabler-info-circle"},{default:u(()=>[I("The Branch is currently Closed")]),_:1})):y("",!0)]),_:1}),r(b,null,{default:u(()=>[r(v,{justify:"space-between",align:"center",class:Re(e.$vuetify.display.smAndDown?"":"flex-nowrap")},{default:u(()=>[r(b,{cols:"6",class:"ma-0 py-0 pe-0 pe-2"},{default:u(()=>[a(V)=="admin"?(c(),f(ge,{key:0,clearable:"","prepend-inner-icon":"tabler-building-community",loading:a(Q),modelValue:a(l).address_address_area,"onUpdate:modelValue":[t[16]||(t[16]=s=>a(l).address_address_area=s),t[17]||(t[17]=s=>ce())],"return-object":!1,items:a(ve),"item-value":"name","item-title":"name",style:{width:"100%"},variant:"outlined",rules:[a($)],label:e.$t("Area"),class:"flex-grow-1 my-1 w-100"},null,8,["loading","modelValue","items","rules","label"])):y("",!0),a(V)=="restaurant"?(c(),f(ge,{key:1,clearable:"","prepend-inner-icon":"tabler-building-community",loading:a(Q),modelValue:a(l).address_address_area,"onUpdate:modelValue":[t[18]||(t[18]=s=>a(l).address_address_area=s),t[19]||(t[19]=s=>ce())],items:a(ve),"item-value":"name","item-title":"name","return-object":!1,style:{width:"100%"},variant:"outlined",rules:[a($)],label:e.$t("Area"),class:"flex-grow-1 my-1 w-100"},null,8,["loading","modelValue","items","rules","label"])):y("",!0)]),_:1}),r(b,{cols:"6",class:"ma-0 py-0 pe-0 ps-2"},{default:u(()=>[r(Ke,{clearable:"","prepend-inner-icon":"tabler-building-store",placeholder:"Select a Branch",rules:[a($)],label:e.$t("Branch"),loading:a(J),modelValue:a(l).branch_id,"onUpdate:modelValue":[t[20]||(t[20]=s=>a(l).branch_id=s),ce],items:a(D),"item-value":"id","item-title":a(Ye),style:{width:"100%"},variant:"outlined","return-object":!1,disabled:!a(l).address_address_area||a(l).address_address_area=="",class:"w-100 flex-grow-1"},null,8,["rules","label","loading","modelValue","items","item-title","disabled"])]),_:1})]),_:1},8,["class"])]),_:1})]),_:1})):y("",!0),r(b,{class:"mt-7 px-5 rounded pb-10",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:u(()=>[g("p",vl,_(e.$t("Products")),1),r(b,null,{default:u(()=>[r(v,{justify:"space-between",align:"end"},{default:u(()=>[r(ge,{disabled:!a(l).branch_id||!a(l).delivery_date&&a(l).is_pickup,"prepend-inner-icon":"tabler-package",loading:a(ne),modelValue:a(ae),"onUpdate:modelValue":t[21]||(t[21]=s=>j(ae)?ae.value=s:null),items:a(T),"item-title":"name_en","item-value":"id",style:{width:"100%"},variant:"outlined",label:e.$t("Products"),class:"flex-grow-1 my-1 w-50 mx-2"},null,8,["disabled","loading","modelValue","items","label"]),r(d,{disabled:!a(l).branch_id||!String(a(l).delivery_date).length&&a(l).is_pickup,label:e.$t("Quantity"),type:"number",class:"flex-grow-1 mx-2 my-1 w-25",modelValue:a(h),"onUpdate:modelValue":t[22]||(t[22]=s=>j(h)?h.value=s:null)},null,8,["disabled","label","modelValue"]),r(B,{"prepend-icon":"tabler-plus",class:"flex-grow-1 mx-2 my-1",disabled:a(h)<=0||!a(ae),onClick:ua},{default:u(()=>[I(_(e.$t("Add")),1)]),_:1},8,["disabled"])]),_:1}),r(v,{align:"center"},{default:u(()=>[a(E).length?(c(),f(p,{key:0,items:a(E),onDelete:oa,onAddImage:va,onAddNote:_a,onAddExtraFlavors:fa,isPreValid:a(te)},null,8,["items","isPreValid"])):y("",!0)]),_:1})]),_:1})]),_:1}),r(b,{class:"mt-7 px-5 rounded pb-10",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:u(()=>[g("p",fl,_(e.$t("User Details")),1),r(b,null,{default:u(()=>[r(v,{justify:"space-between",align:"end"},{default:u(()=>[r(d,{"prepend-inner-icon":"tabler-user",label:e.$t("Name"),rules:[a($)],placeholder:e.$t("Customer Name"),class:"flex-grow-1 mx-2 my-1",modelValue:a(l).name,"onUpdate:modelValue":t[23]||(t[23]=s=>a(l).name=s)},null,8,["label","rules","placeholder","modelValue"]),r(d,{"prepend-inner-icon":"tabler-at",label:e.$t("Email"),placeholder:e.$t("Customer Email"),rules:[a(Na),a($)],class:"flex-grow-1 mx-2 my-1",modelValue:a(l).email,"onUpdate:modelValue":t[24]||(t[24]=s=>a(l).email=s)},null,8,["label","placeholder","rules","modelValue"])]),_:1}),r(v,{justify:"space-between",align:"end",class:"mt-6"},{default:u(()=>[r(d,{"prepend-inner-icon":"tabler-phone",placeholder:e.$t("Customer Phone Number"),label:e.$t("Phone Number"),rules:[a(Se),a($),a(Fe)],class:"flex-grow-1 mx-2 my-1",modelValue:a(l).address_phone,"onUpdate:modelValue":t[25]||(t[25]=s=>a(l).address_phone=s)},null,8,["placeholder","label","rules","modelValue"]),a(V)=="admin"?(c(),f(d,{key:0,"prepend-inner-icon":"tabler-user-check",label:e.$t("Agent"),placeholder:e.$t("Agent"),class:"flex-grow-1 mx-2 my-1",modelValue:a(l).agent,"onUpdate:modelValue":t[26]||(t[26]=s=>a(l).agent=s)},null,8,["label","placeholder","modelValue"])):y("",!0)]),_:1})]),_:1})]),_:1}),r(b,{class:"mt-7 px-5 rounded pb-10",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:u(()=>[g("p",_l,_(e.$t("User Address")),1),r(b,null,{default:u(()=>[r(v,{justify:"space-between",align:"end"},{default:u(()=>[r(d,{"prepend-inner-icon":"tabler-container",label:e.$t("Building Number"),rules:[a($)],placeholder:e.$t("Building Number"),class:"flex-grow-1 mx-2 my-1",modelValue:a(l).address_building_no,"onUpdate:modelValue":t[27]||(t[27]=s=>a(l).address_building_no=s)},null,8,["label","rules","placeholder","modelValue"]),r(d,{"prepend-inner-icon":"tabler-stairs",placeholder:e.$t("Floor"),label:e.$t("Floor"),rules:[a($)],class:"flex-grow-1 mx-2 my-1",modelValue:a(l).address_floor,"onUpdate:modelValue":t[28]||(t[28]=s=>a(l).address_floor=s)},null,8,["placeholder","label","rules","modelValue"])]),_:1}),r(v,{justify:"space-between",align:"end",class:"mt-6"},{default:u(()=>[r(d,{"prepend-inner-icon":"tabler-window",label:e.$t("Apartment"),rules:[a($)],placeholder:e.$t("Apartment"),class:"flex-grow-1 mx-2 my-1",modelValue:a(l).address_apartment,"onUpdate:modelValue":t[29]||(t[29]=s=>a(l).address_apartment=s)},null,8,["label","rules","placeholder","modelValue"]),r(d,{"prepend-inner-icon":"tabler-road",placeholder:e.$t("Street Name"),rules:[a($)],label:e.$t("Street Name"),class:"flex-grow-1 mx-2 my-1",modelValue:a(l).address_street_name,"onUpdate:modelValue":t[30]||(t[30]=s=>a(l).address_street_name=s)},null,8,["placeholder","rules","label","modelValue"])]),_:1}),r(v,{justify:"space-between",align:"end",class:"mt-6"},{default:u(()=>[r(d,{"prepend-inner-icon":"tabler-number",rules:[a($)],label:e.$t("Block Number"),placeholder:e.$t("Block Number"),class:"flex-grow-1 mx-2 my-1",modelValue:a(l).block_no,"onUpdate:modelValue":t[31]||(t[31]=s=>a(l).block_no=s)},null,8,["rules","label","placeholder","modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["cols"]),r(b,{class:"pt-0",cols:e.$vuetify.display.smAndDown?12:4},{default:u(()=>[r(b,{class:"mt-16 px-5 rounded pb-10 w-100 mx-auto",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:u(()=>[g("p",bl,_(e.$t("Order Summary")),1),r(b,{class:"pt-0"},{default:u(()=>[r(v,{class:"mt-0"},{default:u(()=>[r(b,{class:"w-100 px-0 pt-0"},{default:u(()=>[a(O)?(c(),f(d,{key:0,class:"w-100 flex-grow-1","prepend-inner-icon":"tabler-user-star",placeholder:e.$t("Enter Employee code"),modelValue:a(A),"onUpdate:modelValue":t[32]||(t[32]=s=>j(A)?A.value=s:null),style:{width:"100%"},variant:"outlined"},null,8,["placeholder","modelValue"])):y("",!0),a(O)?y("",!0):(c(),f(d,{key:1,class:"w-100 flex-grow-1","prepend-inner-icon":"tabler-gift",placeholder:e.$t("Have a Voucher?"),modelValue:a(F),"onUpdate:modelValue":t[33]||(t[33]=s=>j(F)?F.value=s:null),style:{width:"100%"},variant:"outlined"},null,8,["placeholder","modelValue"])),r(Qa,{onClick:ma,label:e.$t("Is An Employee"),modelValue:a(O),"onUpdate:modelValue":t[34]||(t[34]=s=>j(O)?O.value=s:null),class:"mt-2"},null,8,["label","modelValue"]),!a(O)&&a(V)=="admin"?(c(),f(B,{key:2,class:"mt-3",disabled:!a(F),block:"",loading:a(q),onClick:sa},{default:u(()=>[I(_(e.$t("Apply Voucher")),1)]),_:1},8,["disabled","loading"])):y("",!0),!a(O)&&a(V)=="restaurant"?(c(),f(B,{key:3,class:"mt-3",disabled:!a(F),block:"",loading:a(q),onClick:ra},{default:u(()=>[I(_(e.$t("Apply Voucher")),1)]),_:1},8,["disabled","loading"])):y("",!0),a(O)&&a(V)=="admin"?(c(),f(B,{key:4,class:"mt-3",disabled:!a(A),block:"",loading:a(ee),onClick:ca},{default:u(()=>[I(_(e.$t("Check Employee")),1)]),_:1},8,["disabled","loading"])):y("",!0),a(O)&&a(V)=="restaurant"?(c(),f(B,{key:5,class:"mt-3",disabled:!a(A),block:"",loading:a(ee),onClick:pa},{default:u(()=>[I(_(e.$t("Check Employee")),1)]),_:1},8,["disabled","loading"])):y("",!0)]),_:1})]),_:1}),r(v,{class:"mt-5"},{default:u(()=>[r(ye,{class:"w-100 px-2 py-2",variant:"tonal",color:e.$vuetify.theme.current.dark?"#B3BFFFFF":"primary"},{default:u(()=>[r(re,null,{default:u(()=>[r(v,{align:"center",justify:"space-between"},{default:u(()=>[g("p",yl,_(e.$t("Deliver Cost")),1),g("p",gl,_(a(l).delivery_cost)+" KWD",1)]),_:1}),r(v,null,{default:u(()=>[r(Pe,{color:e.$vuetify.theme.current.dark?"#B3BFFFFF":"primary"},null,8,["color"])]),_:1}),r(v,{align:"center",justify:"space-between",class:"mt-5"},{default:u(()=>[hl,g("p",Vl,_(Number(a(C)+a(l).delivery_cost).toFixed(2))+" KWD",1)]),_:1}),a(l).v_code?(c(),f(v,{key:0},{default:u(()=>[r(Pe,{color:e.$vuetify.theme.current.dark?"#B3BFFFFF":"primary"},null,8,["color"])]),_:1})):y("",!0),a(l).v_code||a(l).employee_code?(c(),f(v,{key:1,align:"center",justify:"space-between",class:"mt-5"},{default:u(()=>[g("p",wl,_(e.$t("Discount rate")),1),g("p",kl,_(a(H)),1)]),_:1})):y("",!0),a(l).v_code||a(l).employee_code?(c(),f(v,{key:2},{default:u(()=>[r(Pe,{color:e.$vuetify.theme.current.dark?"#B3BFFFFF":"primary"},null,8,["color"])]),_:1})):y("",!0),a(l).v_code||a(l).employee_code?(c(),f(v,{key:3,align:"center",justify:"space-between",class:"mt-5"},{default:u(()=>[g("p",$l,_(e.$t("New Total")),1),g("p",xl,_(Number(a(da)).toFixed(1))+" KWD",1)]),_:1})):y("",!0)]),_:1})]),_:1},8,["color"])]),_:1}),r(v,{class:"mt-8"},{default:u(()=>[r(B,{type:"submit",loading:a(me),block:""},{default:u(()=>[I(_(e.$t("Create Order")),1)]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1},8,["cols"])]),_:1},8,["onSubmit"])]),_:1})])}}};typeof We=="function"&&We(Le);const dt=Da(Le,[["__scopeId","data-v-8c490bbd"]]);export{dt as default};
