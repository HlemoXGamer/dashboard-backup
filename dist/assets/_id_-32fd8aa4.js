import{D as ie,O as Q,o as v,b as k,w as a,q as e,aX as B,s as i,I as T,l as p,R as ee,n as w,y as I,U as b,W as d,G as U,a_ as ae,az as S,H as _,C as re,aV as me,aP as fe,E as M,c as A,F as H,a as L,aZ as X,a8 as ce,a9 as pe}from"./index-ad06e79a.js";import{_ as le}from"./AppDateTimePicker-7f0cc36c.js";import{V as Ve}from"./VDataTable-c727e2d1.js";import{g as be}from"./cities-1428fd23.js";import{V as R}from"./VCombobox-26856a8e.js";import{_ as ye}from"./DialogCloseBtn-338c2407.js";import{V as ve}from"./VDialog-fbd7f1ae.js";import{b as ge,d as Y}from"./branches-f687d4e9.js";import{a as _e}from"./areas-cb180112.js";import{V as xe,a as Z}from"./VTabs-8f421d6b.js";import{a as we,V as K}from"./VWindowItem-f64698f8.js";import{V as q}from"./VSwitch-cab5ab76.js";import"./VCheckboxBtn-f6dd6c6f.js";import"./VSelectionControl-694a1f9e.js";import"./VSelect-76fdbbde.js";import"./VList-9ab7df99.js";import"./ssrBoot-defe399c.js";import"./VDivider-4cc22aef.js";import"./dialog-transition-9757e826.js";import"./VMenu-0f9b48c2.js";import"./VOverlay-907c7a82.js";import"./lazy-4cfe01f9.js";import"./VChip-5e82d9df.js";import"./filter-1b8aa21b.js";import"./VTable-31714374.js";const De={__name:"BranchesViewTable",props:{data:{type:Array,default:[]},loading:{type:Boolean,default:!1}},setup(l){const f=ie().t,r=Q(()=>[{title:f("Day"),key:"day"},{title:f("Time"),sortable:!1,key:"time"},{title:f("Item Name"),sortable:!1,key:"item_name"},{title:f("Action"),sortable:!1,key:"action"},{title:f("Details"),sortable:!1,key:"details"}]);return(t,o)=>(v(),k(T,{rounded:"lg",class:"pb-0 px-0",variant:"flat",loading:l.loading},{default:a(()=>[e(B,{class:"pa-0"},{default:a(()=>[e(i(Ve),{items:l.data,headers:i(r),"items-per-page":15,class:"pb-5 mt-0",title:"Branches Log"},null,8,["items","headers"])]),_:1})]),_:1},8,["loading"]))}},$e={class:"text-h4 py-1 mb-3"},Se={__name:"BranchesViewSummary",props:{data:{type:Object,default:{}}},setup(l){const V=p([]),f=()=>{be().then(({data:r,meta:t})=>{V.value=r.data,console.log(V.value)})};return ee(()=>{f()}),(r,t)=>{const o=ae;return v(),k(T,{rounded:"lg",class:"pb-6 px-0",variant:"flat"},{default:a(()=>[e(B,null,{default:a(()=>[w("p",$e,I(r.$t("Branches Details")),1),e(b,{class:"px-2 mt-3"},{default:a(()=>[e(d,null,{default:a(()=>[e(o,{readonly:"",label:r.$t("Name"),class:"mx-4 flex-grow-1",modelValue:l.data.name_en,"onUpdate:modelValue":t[0]||(t[0]=n=>l.data.name_en=n)},null,8,["label","modelValue"])]),_:1}),e(d,null,{default:a(()=>[e(o,{readonly:"",label:r.$t("Phone Number"),class:"mx-4 flex-grow-1",modelValue:l.data.phone_no,"onUpdate:modelValue":t[1]||(t[1]=n=>l.data.phone_no=n)},null,8,["label","modelValue"])]),_:1}),e(d,null,{default:a(()=>[e(o,{readonly:"",label:r.$t("Email"),class:"mx-4 flex-grow-1",modelValue:l.data.email,"onUpdate:modelValue":t[2]||(t[2]=n=>l.data.email=n)},null,8,["label","modelValue"])]),_:1})]),_:1}),e(b,{class:"px-2 mt-7"},{default:a(()=>[e(d,null,{default:a(()=>[e(R,{readonly:"",class:"mx-4 flex-grow-1",modelValue:l.data.days,"onUpdate:modelValue":t[3]||(t[3]=n=>l.data.days=n),label:r.$t("Working Days"),"return-object":!1,items:l.data.days,multiple:"",style:{width:"100%"},variant:"outlined","item-value":"id","item-title":"name"},null,8,["modelValue","label","items"])]),_:1}),e(d,null,{default:a(()=>[e(o,{readonly:"",label:r.$t("Start Working Hours"),class:"mx-4 flex-grow-1",modelValue:l.data.start,"onUpdate:modelValue":t[4]||(t[4]=n=>l.data.start=n)},null,8,["label","modelValue"])]),_:1}),e(d,null,{default:a(()=>[e(o,{readonly:"",label:r.$t("End Working Hours"),class:"mx-4 flex-grow-1",modelValue:l.data.end,"onUpdate:modelValue":t[5]||(t[5]=n=>l.data.end=n)},null,8,["label","modelValue"])]),_:1})]),_:1}),e(b,{class:"px-2 mt-7"},{default:a(()=>[e(d,null,{default:a(()=>[e(o,{readonly:"",label:r.$t("Estimate Time"),class:"mx-4 flex-grow-1",modelValue:l.data.est_time,"onUpdate:modelValue":t[6]||(t[6]=n=>l.data.est_time=n)},null,8,["label","modelValue"])]),_:1}),e(d,null,{default:a(()=>[e(o,{readonly:"",label:r.$t("Branch Code"),class:"mx-4 flex-grow-1",modelValue:l.data.code,"onUpdate:modelValue":t[7]||(t[7]=n=>l.data.code=n)},null,8,["label","modelValue"])]),_:1}),e(d,null,{default:a(()=>[e(R,{readonly:"",class:"mx-4 flex-grow-1",modelValue:i(V),"onUpdate:modelValue":t[8]||(t[8]=n=>U(V)?V.value=n:null),label:r.$t("Cities"),"return-object":!1,items:i(V),multiple:"",style:{width:"100%"},variant:"outlined","item-value":"id","item-title":"name"},null,8,["modelValue","label","items"])]),_:1})]),_:1}),e(b,{class:"px-2 mt-7"},{default:a(()=>[e(d,null,{default:a(()=>[e(R,{readonly:"",class:"mx-4 flex-grow-1",modelValue:l.data.areas,"onUpdate:modelValue":t[9]||(t[9]=n=>l.data.areas=n),label:r.$t("Areas"),"return-object":!1,items:l.data.areas,multiple:"",style:{width:"100%"},variant:"outlined","item-value":"id","item-title":"name"},null,8,["modelValue","label","items"])]),_:1}),e(d,null,{default:a(()=>[e(o,{readonly:"",label:r.$t("Street Name"),class:"mx-4 flex-grow-1",modelValue:l.data.street_name,"onUpdate:modelValue":t[10]||(t[10]=n=>l.data.street_name=n)},null,8,["label","modelValue"])]),_:1}),e(d,null,{default:a(()=>[e(o,{readonly:"",label:r.$t("Building Number"),class:"mx-4 flex-grow-1",modelValue:l.data.building_no,"onUpdate:modelValue":t[11]||(t[11]=n=>l.data.building_no=n)},null,8,["label","modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},Ue={__name:"BranchesViewDialog",emits:["exit"],setup(l,{emit:V}){const f=p(null),r=()=>{V("exit",!0,f.value),f.value=null};return(t,o)=>{const n=ye,C=le;return v(),k(ve,{persistent:"",class:"v-dialog-sm"},{default:a(()=>[e(n,{onClick:o[0]||(o[0]=y=>t.$emit("close"))}),e(T,{title:t.$t("Pick a custom Date")},{default:a(()=>[e(B,{class:"d-flex"},{default:a(()=>[e(C,{class:"ms-1","prepend-inner-icon":"tabler-calendar",modelValue:i(f),"onUpdate:modelValue":o[1]||(o[1]=y=>U(f)?f.value=y:null)},null,8,["modelValue"])]),_:1}),e(B,{class:"d-flex justify-end gap-3 flex-wrap"},{default:a(()=>[e(S,{onClick:o[2]||(o[2]=y=>r()),loading:t.loading,disabled:!i(f)},{default:a(()=>[_(I(t.$t("Pick")),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1},8,["title"])]),_:1})}}};const F=l=>(ce("data-v-ded116de"),l=l(),pe(),l),ke={class:"text-h4 pt-3 pb-0"},Be=F(()=>w("p",{class:"text-h3 py-1 mb-3"},"Order Type",-1)),Ce=F(()=>w("p",{class:"text-h3 py-1 mb-3"},"Branch Slots",-1)),he=F(()=>w("p",{class:"text-h4 py-1 mb-3"},"Size",-1)),Ie=F(()=>w("p",{class:"text-h4 py-1 mb-3"},"Time",-1)),Te=F(()=>w("p",{class:"text-h4 py-1 mb-3"},"Status",-1)),te={__name:"[id]",setup(l){var G;me();const V=(G=JSON.parse(localStorage.getItem("userData")))==null?void 0:G.type,f=p(!1),r=p(!1),t=p(!1),o=p(new Date().toISOString().substr(0,10)),n=p([]),C=p([]),y=p(!1),se=p(null),x=p(!1),D=p("view"),c=p({start:"",end:"",name_en:"",name_ar:"",phone_no:"",city_id:null,areas:[],street_name:"",building_no:"",email:"",password:"",est_time:"",delivery_fee:.5,code:"",working_days:[],is_active:0,time_slots:[],order_types:[],delivery_types:[],slotsForSelectedDay:[]}),$=p("today"),N=Q(()=>m=>$.value===m?"elevated":"tonal"),z=()=>{c.value.time_slots&&c.value.time_slots.length>0&&(c.value.slotsForSelectedDay=c.value.time_slots.filter(m=>m.day===o.value))},O=fe().params.id,ne=async()=>{const u=(await ge(O)).data.data;c.value={...u,working_days:u.days,deliveryNowActive:f,laterTodayActive:r,preOrderActive:t,code:"Wassup",email:u.user.email},_e().then(({data:g,meta:J})=>{n.value=g.data})},j=(m,u)=>{x.value=!0,m===!0?(y.value=!1,V=="admin"&&Y(`${$.value}&branchId=${O}${u!==null?"&day="+u:""}`).then(({data:g})=>{C.value=g.data}).finally(()=>{x.value=!1})):V=="admin"&&Y(`${$.value}&branchId=${O}`).then(({data:g})=>{C.value=g.data}).finally(()=>{x.value=!1})},de=()=>{y.value=!1,$.value="today",se.value=null,j(!0)},W=m=>{m==$.value&&m!=="custom"||($.value=m,setTimeout(()=>{m=="custom"?y.value=!0:j(!1)},100))};return M(o,m=>{const u=c.value.time_slots.filter(g=>g.day===m)||[];c.value.slotsForSelectedDay=u}),M(()=>[c.value.time_slots,o.value],()=>{z()},{immediate:!0}),ee(()=>{if(V==="admin"){ne().then(()=>{z()}),j(!1);const m=c.value.time_slots.filter(u=>u.day===o)||[];c.value.slotsForSelectedDay=m}}),(m,u)=>{const g=Ue,J=Se,oe=De,E=le,ue=ae;return v(),A("div",null,[e(g,{onExit:j,modelValue:i(y),"onUpdate:modelValue":u[0]||(u[0]=s=>U(y)?y.value=s:null),onClose:de},null,8,["modelValue"]),e(b,{class:"mt-4 px-4",justify:"space-around"},{default:a(()=>[e(d,{class:"pt-0"},{default:a(()=>[e(d,{class:"py-5"},{default:a(()=>[e(xe,{modelValue:i(D),"onUpdate:modelValue":u[1]||(u[1]=s=>U(D)?D.value=s:null),class:"v-tabs-pill"},{default:a(()=>[e(Z,{value:"view"},{default:a(()=>[_("Update Branch")]),_:1}),e(Z,{value:"slots"},{default:a(()=>[_("Update Slots")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(we,{modelValue:i(D),"onUpdate:modelValue":u[6]||(u[6]=s=>U(D)?D.value=s:null)},{default:a(()=>[e(K,{value:"view"},{default:a(()=>[e(J,{data:i(c),cities:m.cities},null,8,["data","cities"]),e(b,{class:"gap-5 pt-16 pl-3 pb-0"},{default:a(()=>[e(S,{disabled:i(x),variant:i(N)("today"),onClick:u[2]||(u[2]=s=>W("today"))},{default:a(()=>[_("Today")]),_:1},8,["disabled","variant"]),e(S,{disabled:i(x),variant:i(N)("yesterday"),onClick:u[3]||(u[3]=s=>W("yesterday"))},{default:a(()=>[_("Yesterday ")]),_:1},8,["disabled","variant"]),e(S,{disabled:i(x),variant:i(N)("custom"),onClick:u[4]||(u[4]=s=>W("custom"))},{default:a(()=>[_("Custom")]),_:1},8,["disabled","variant"])]),_:1}),e(d,{class:"px-5 rounded mt-10",style:{"background-color":"rgb(var(--v-theme-surface))"}},{default:a(()=>[w("p",ke,I(m.$t("Branches Log")),1),e(oe,{data:i(C),loading:i(x)},null,8,["data","loading"])]),_:1})]),_:1}),e(K,{value:"slots"},{default:a(()=>[e(T,{rounded:"lg",class:"pb-6 px-0 mb-10",variant:"flat"},{default:a(()=>[e(B,null,{default:a(()=>[e(b,null,{default:a(()=>[e(d,null,{default:a(()=>[Be]),_:1})]),_:1}),e(b,{class:"order-types"},{default:a(()=>[(v(!0),A(H,null,L(i(c).order_types,s=>(v(),k(d,{key:s.id,class:"d-flex",style:{"justify-content":"center","align-items":"center",gap:"20px"}},{default:a(()=>[e(S,{disabled:!s.status},{default:a(()=>[_(I(s.name),1)]),_:2},1032,["disabled"]),e(q,{modelValue:s.status,"onUpdate:modelValue":h=>s.status=h,inset:!1,"true-value":1,"false-value":0,readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1}),e(T,{rounded:"lg",class:"pb-6 px-0",variant:"flat"},{default:a(()=>[e(B,null,{default:a(()=>[e(b,{style:{display:"flex","justify-content":"space-between","align-items":"center"}},{default:a(()=>[e(d,null,{default:a(()=>[Ce]),_:1}),e(d,null,{default:a(()=>[e(E,{modelValue:i(o),"onUpdate:modelValue":u[5]||(u[5]=s=>U(o)?o.value=s:null),config:{minDate:new Date().toISOString().substr(0,10),maxDate:new Date(new Date().setDate(new Date().getDate()+6)).toISOString().substr(0,10)}},null,8,["modelValue","config"])]),_:1})]),_:1}),e(b,null,{default:a(()=>[e(d,{class:"text-center"},{default:a(()=>[he]),_:1}),e(d,{class:"text-center"},{default:a(()=>[Ie]),_:1}),e(d,{class:"text-center"},{default:a(()=>[Te]),_:1})]),_:1}),(v(!0),A(H,null,L(i(c).slotsForSelectedDay,(s,h)=>(v(),k(b,{key:h,class:"mb-2"},{default:a(()=>[e(d,{class:"text-center"},{default:a(()=>[e(ue,{modelValue:s.capacity,"onUpdate:modelValue":P=>s.capacity=P,readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(d,{class:"text-center d-flex",style:{}},{default:a(()=>[e(E,{config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i"},value:s.from,"prepend-inner-icon":"tabler-calendar",class:"flex-grow-1 mx-2 my-1",disabled:!0},null,8,["value"]),e(E,{config:{enableTime:!0,noCalendar:!0,dateFormat:"H:i"},value:s.to,"prepend-inner-icon":"tabler-calendar",class:"flex-grow-1 mx-2 my-1",disabled:!0},null,8,["value"])]),_:2},1024),e(d,{class:"text-center d-flex",style:{"justify-content":"center","align-items":"center"}},{default:a(()=>[e(q,{modelValue:s.status,"onUpdate:modelValue":P=>s.status=P,inset:!1,"false-value":0,"true-value":1,readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128)),e(b,{class:"delivery-types"},{default:a(()=>[(v(!0),A(H,null,L(i(c).delivery_types,s=>(v(),k(d,{key:s.id,class:"d-flex",style:{"justify-content":"center","align-items":"center",gap:"20px"}},{default:a(()=>[e(S,{disabled:!s.status},{default:a(()=>[_(I(s.name),1)]),_:2},1032,["disabled"]),e(q,{modelValue:s.status,"onUpdate:modelValue":h=>s.status=h,inset:!1,"true-value":1,"false-value":0,readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})])}}};typeof X=="function"&&X(te);const sa=re(te,[["__scopeId","data-v-ded116de"]]);export{sa as default};
